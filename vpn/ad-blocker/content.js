(()=>{var e={7588:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof T?t:T,o=Object.create(i.prototype),a=new R(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===E){if("throw"===i)throw o;return k()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===A)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=E,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?E:f,c.arg===A)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=E,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",h="executing",E="completed",A={};function T(){}function y(){}function _(){}var v={};c(v,o,(function(){return this}));var g=Object.getPrototypeOf,S=g&&g(g(D([])));S&&S!==n&&r.call(S,o)&&(v=S);var p=_.prototype=T.prototype=Object.create(v);function m(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function b(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,b(e,n),"throw"===n.method))return A;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,A;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,A):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function D(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:t,done:!0}}return y.prototype=_,c(p,"constructor",_),c(_,"constructor",y),y.displayName=c(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,s,"GeneratorFunction")),e.prototype=Object.create(p),e},e.awrap=function(e){return{__await:e}},m(C.prototype),c(C.prototype,a,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new C(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},m(p),c(p,s,"Generator"),c(p,o,(function(){return this})),c(p,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=D,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,A):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),A}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},8962:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,r,i;return n=e,i=[{key:"CONFIG_PANELOS_VERSION",get:function(){return"2.0.14"}},{key:"CONFIG_PINSTANCE_ID",get:function(){return 1}},{key:"CONFIG_PARTNER_ID",get:function(){return 5}},{key:"CONFIG_DISTRIBUTOR_ID",get:function(){return 5}},{key:"CONFIG_UTILITY_HOST",get:function(){return"https://authentication.urban-vpn.com"}},{key:"CONFIG_PANELBACKEND_ENDPOINT",get:function(){return"https://analytics-toolbar.urban-vpn.com"}},{key:"CONFIG_PANELBACKEND_ENDPOINT_ULR_OUTTICKET",get:function(){return"/tickets"}},{key:"CONFIG_PANELBACKEND_ENDPOINT_ULR_INSTALL_EVENT",get:function(){return"/install"}},{key:"CONFIG_PANELBACKEND_ENDPOINT_ULR_CONFIGURATION",get:function(){return"/configuration?pv=".concat(this.CONFIG_PANELOS_VERSION)}},{key:"CONFIG_GLOBAL_ACTIVE_STATUS",get:function(){return!1}},{key:"CONFIG_USE_COMPRESSION",get:function(){return!0}},{key:"CONFIG_MARK_AD_CANDIDATES",get:function(){return!1}},{key:"CONFIG_MARK_PROCESSED_AD_CANDIDATES",get:function(){return!1}},{key:"CONFIG_ADBLOCKER_AVAILABLE",get:function(){return!0}},{key:"CONFIG_TARGET_URL_BY_CLICK_AVAILABLE",get:function(){return!0}},{key:"CONFIG_ANALYTIC_INSTALL_EVENTS_TRACING_AVAILABLE",get:function(){return!0}},{key:"CONFIG_ADBLOCK_INSPECTOR_AVAILABLE",get:function(){return!0}},{key:"CONFIG_DATA_COLLECTION_ENABLED",get:function(){return!1}},{key:"CONFIG_PANALYTICS_UTILITY_LOGGING",get:function(){return!1}}],(r=null)&&t(n.prototype,r),i&&t(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();e.exports=n},661:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(5212),o=n(3124),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.init=!1,this.InspectorConfig=null}var t,n,a;return t=e,(n=[{key:"Init",value:function(e){return this.InspectorConfig=e,!this.init&&this.InspectorConfig&&this.InspectorConfig.active&&(this.init=!0,setTimeout(this.CheckForActiveAdblocker.bind(this),1e3*this.GetAgentActivationTimeout())),this.init}},{key:"CheckForActiveAdblocker",value:function(){document.readyState===o.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.CheckAdblockerActivityStatus.bind(this)):document.readyState!==o.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==o.DOCUMENT_READYSTATE_COMPLETE||this.CheckAdblockerActivityStatus()}},{key:"CheckAdblockerActivityStatus",value:function(){var e=this,t=this.CreateDumpAdElement();setTimeout((function(){var n={};n.hasActiveAdblock=e.IsElementHidden(t),t.remove(),i.SendAdBlockInspectorAgentReport(e.id,n,null)}),1e3*this.GetAdblockerAdRemovingTimeout())}},{key:"IsElementHidden",value:function(e){return 0===e.offsetHeight}},{key:"CreateDumpAdElement",value:function(){var e=document.createElement("div");return e.innerHTML="&nbsp;",e.className=this.GetAdblockerDetectionClassName(),e.id="google_ads_iframe_/6355419/Travel/Europe/France/Paris_0__container__",document.body.appendChild(e),e}},{key:"GetAdblockerDetectionClassName",value:function(){return this.init&&this.InspectorConfig&&this.InspectorConfig.detectionClassName}},{key:"GetAgentActivationTimeout",value:function(){return this.init&&this.InspectorConfig&&this.InspectorConfig.agentActivationTimeoutSec}},{key:"GetAdblockerAdRemovingTimeout",value:function(){return this.init&&this.InspectorConfig&&this.InspectorConfig.adRemovingTimeoutSec}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=a},5733:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(8962),o=n(3124),a=n(1225),s=n(5212),c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.IOManager=n,this.init=!1,this.tabId=null,this.status=a.GetDefaultAdblockerStatus(),this.excludeList={domains:[],pages:[]},this.IOManager&&(this.IOManager.onAdBlockerStatusChanged=this.onAdBlockerStatusChanged.bind(this))}var t,n,c;return t=e,(n=[{key:"GetStatus",value:function(){return this.status}},{key:"Init",value:function(e,t,n){return!this.init&&i.CONFIG_ADBLOCKER_AVAILABLE&&(this.tabId=n,this.status=e,this.excludeList=t,this.init=!0),this.init}},{key:"onAdBlockerStatusChanged",value:function(e){this.status=e}},{key:"SetHiddenAmount",value:function(e){e>0&&s.SendHiddenAdCandidatesAmount(this.id,e)}},{key:"IsEnabled",value:function(){return this.init&&i.CONFIG_ADBLOCKER_AVAILABLE&&this.status[o.ADBLOCKER_FOR_DISPLAY]===o.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}},{key:"IsEnabledForFacebook",value:function(){return this.init&&i.CONFIG_ADBLOCKER_AVAILABLE&&this.status[o.ADBLOCKER_FOR_FACEBOOK]===o.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}},{key:"IsEnabledForTwitter",value:function(){return this.init&&i.CONFIG_ADBLOCKER_AVAILABLE&&this.status[o.ADBLOCKER_FOR_TWITTER]===o.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}},{key:"IsEnabledForReddit",value:function(){return this.init&&i.CONFIG_ADBLOCKER_AVAILABLE&&this.status[o.ADBLOCKER_FOR_REDDIT]===o.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}},{key:"IsEnabledForPinterest",value:function(){return this.init&&i.CONFIG_ADBLOCKER_AVAILABLE&&this.status[o.ADBLOCKER_FOR_PINTEREST]===o.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}},{key:"IsEnabledForInstagram",value:function(){return this.init&&i.CONFIG_ADBLOCKER_AVAILABLE&&this.status[o.ADBLOCKER_FOR_INSTAGRAM]===o.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}},{key:"IsConfigUseLocal",value:function(){return this.init&&this.status[o.USE_LOCAL_CONFIG]===o.ADBLOCKER_STATUS_ENABLED}},{key:"GetCurrentDomain",value:function(){return window.location.origin}},{key:"GetCurrentPageUrl",value:function(){return window.location.href}},{key:"IsExcluded",value:function(){return this.IsExcludedByDomainRule()||this.IsExcludedByPageRule()}},{key:"IsNotExcluded",value:function(){return!this.IsExcluded()}},{key:"IsExcludedByDomainRule",value:function(){return-1!==this.excludeList.domains.indexOf(this.GetCurrentDomain())}},{key:"IsExcludedByPageRule",value:function(){return-1!==this.excludeList.pages.indexOf(this.GetCurrentPageUrl())}}])&&r(t.prototype,n),c&&r(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=c},9543:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var u=n(4019),l=n(9622),d=n(1225),f=n(3124),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(c,e);var t,n,r,s=a(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this)).id=e,t.active=!1,t.candidates=[],t.hiddenAmount=0,t.pageUrl="",t.ticketId="",t.onPageRefreshed=null,t.isActive=!1,t.available=!1,t.elementId=0,t}return t=c,(n=[{key:"getGlobalContainer",value:function(){}},{key:"sendAdCandidatesToBackground",value:function(){}},{key:"getUniqueContentId",value:function(){}},{key:"CandidatesCount",get:function(){return this.candidates.length}},{key:"Candidates",get:function(){return this.candidates}},{key:"HiddenAmount",get:function(){return this.hiddenAmount}},{key:"PageUrl",get:function(){return this.pageUrl}},{key:"TicketId",get:function(){return this.ticketId}},{key:"IsActive",get:function(){return this.active}},{key:"Activated",value:function(){this.active=!0}},{key:"CandidateHidden",value:function(){this.hiddenAmount=this.hiddenAmount+1}},{key:"ClearHiddenCounter",value:function(){this.hiddenAmount=0}},{key:"ClearCandidates",value:function(){this.candidates=[]}},{key:"AddCandidate",value:function(e){this.candidates.push(e)}},{key:"PageRefreshed",value:function(e,t){this.pageUrl=e,this.ticketId=t,this.onPageRefreshed&&this.onPageRefreshed(e,t)}},{key:"getSponsorTwitterScreenName",value:function(e){var t=this.getSponsorPageRelativeUrl(e),n=t.lastIndexOf("/")+1;return t.substring(n)}},{key:"getSponsorRedditScreenName",value:function(e){var t=this.getSponsorScreenNameReddit(e);return t?t.replace(/^.*\/user\//gi,"").replace(/\/.*/gi,""):""}},{key:"getSponsorPageRelativeUrl",value:function(e){var t="",n=e.querySelectorAll("a");if(n.length){t=n[0].getAttribute("href");var r=n[0].getBoundingClientRect().x;n.forEach((function(e){e.getBoundingClientRect().x<r&&(t=e.getAttribute("href"),r=e.getBoundingClientRect().x)}))}return t}},{key:"getSponsorScreenNameReddit",value:function(e){for(var t,n=0,r=Array.from(e.querySelectorAll("a[href]"));n<r.length;n++){var i=r[n],o=new RegExp(/^\/user\/.*/),a=i.getAttribute("href");if(a&&o.test(a)){t=a.replace(/\/user\//,"").replace(/\/.*/,"");break}}return t}},{key:"Context",get:function(){return this}},{key:"getAdTwitterObject",value:function(e,t){var n=d.SetFullSizeToElement(e),r=d.GetCookie("ct0");return{content:u.encode(e.outerHTML),screenName:this.getSponsorTwitterScreenName(e),stylesByElementBisId:this.getStylesByElementsBisId(e),adPlacementType:t,size:n,userDataByScreenName:"",token:r}}},{key:"getAdRedditObject",value:function(e,t,n,r){var i=d.SetFullSizeToElement(e);return{content:u.encode(t.outerHTML),screenName:this.getSponsorRedditScreenName(t),adPlacementType:r,targetUrl:n,size:i}}},{key:"getAdPinterestObject",value:function(e,t,n,r,i,o,a){var s=d.SetFullSizeToElement(e),c=this.getUniqueContentId(t);return{content:u.encode(t.outerHTML),screenName:n,adPlacementType:a,targetUrl:r,size:s,adText:i,advertiserUrl:o,uniqueContentId:c}}},{key:"getAdInstagramObject",value:function(e,t,n,r,i,o){var a=d.SetFullSizeToElement(e);return{content:u.encode(t.outerHTML),screenName:n,adPlacementType:o,targetUrl:r,size:a,aboutPageUrl:i}}},{key:"setSizesAndIdForAllElements",value:function(e){var t=this;if(e&&e.setAttribute){var n=this.getElementId();e.setAttribute(f.ATTRIBUTE_BIS_ELEMENT_ID,n),e.querySelectorAll("*").forEach((function(e){var n=t.getElementId();e.setAttribute&&(e.setAttribute(f.ATTRIBUTE_BIS_ELEMENT_ID,n),d.SetFullSizeToElement(e))}))}}},{key:"isEmpty",value:function(e){return void 0===e||0===e.length}},{key:"getElementId",value:function(){return this.elementId++}},{key:"setActive",set:function(e){"boolean"==typeof e&&(this.isActive=e)}},{key:"setAvailable",set:function(e){"boolean"==typeof e&&(this.available=e)}},{key:"HideElement",value:function(e){e&&e.style&&(e.style.cssText+="left: -10000px !important; position: absolute !important;",this.CandidateHidden())}},{key:"HideElementForInstagramFeedOnly",value:function(e){e&&e.style&&(e.style.cssText+="position: absolute !important; z-index -999999; height: 0px !important; margin: 0 !important; paddinf: 0 !important; overflow: hidden !important;",e.parentElement.style.cssText+="height: 0px !important; visibility: hidden !important;",this.CandidateHidden())}},{key:"UnhideElement",value:function(e){if(e&&e.style){var t=e.style.cssText;t.includes("left: -10000px !important; position: absolute !important;")&&(t=t.replace("left: -10000px !important; position: absolute !important;",""),e.style.cssText=t)}}},{key:"removeCloneElement",value:function(e){e.remove()}},{key:"isCarousel",value:function(e){return!!e.querySelector("ul")}},{key:"isVideo",value:function(e,t){return!(!e||!e.querySelectorAll(t).length)}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(l);e.exports=h},1828:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(3124),o=n(1225),a=n(8794),s=n(2574),c=n(1674),u=n(3177),l=n(9780),d=n(3173),f=n(5216),h=n(9751),E=n(5092),A=function(){function e(t,n,r,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.Config=n,this.AdBlockerAgent=i,this.IOManager=r,this.PageUrl=document.location.href,this.FacebookAds=null,this.TwitterAds=null,this.RedditAds=null,this.SkinAds=null,this.HTML5Ads=null,this.VideoAds=null,this.PinterestAds=null,this.InstagramAds=null,this.IsBlacklistedPublisher=o.IsPublisherInBlacklist(this.PageUrl,this.Config.BlacklistPublishers),!this.IsBlacklistedPublisher)switch(!0){case o.IsFacebookUrl(this.PageUrl):this.FacebookAds=new l(this.id,this.Config,this.AdBlockerAgent);break;case o.IsTwitterUrl(this.PageUrl):this.TwitterAds=new d(this.id,this.Config,this.IOManager,this.AdBlockerAgent);break;case o.IsRedditUrl(this.PageUrl):this.RedditAds=new f(this.id,this.Config,this.IOManager,this.AdBlockerAgent);break;case o.IsTiktokUrl(this.PageUrl):this.VideoAds=new u(this.id,this.Config,this.IOManager);break;case o.IsPinterestUrl(this.PageUrl):this.PinterestAds=new h(this.id,this.Config,this.IOManager,this.AdBlockerAgent);break;case o.IsInstagramUrl(this.PageUrl):this.InstagramAds=new E(this.id,this.Config,this.AdBlockerAgent);break;default:this.SkinAds=new a(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.BannerAds=new s(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.HTML5Ads=new c(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.VideoAds=new u(this.id,this.Config,this.IOManager)}}var t,n,A;return t=e,(n=[{key:"ActivateAdsdetectors",value:function(){this.IsBlacklistedPublisher||(this.TwitterAds&&this.TwitterAds.ActivateVideoTrafficDetector(i.ACTIVATION_BY_ADS_MANAGER),this.PinterestAds&&this.PinterestAds.ActivateVideoTrafficDetector(i.ACTIVATION_BY_ADS_MANAGER),document.readyState===i.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.StartAdsdetectors.bind(this)):document.readyState!==i.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==i.DOCUMENT_READYSTATE_COMPLETE||this.StartAdsdetectors())}},{key:"StartAdsdetectors",value:function(){this.SkinAds&&this.SkinAds.ActivateDetector(i.ACTIVATION_BY_ADS_MANAGER),this.BannerAds&&this.BannerAds.ActivateDetector(i.ACTIVATION_BY_ADS_MANAGER),this.HTML5Ads&&this.HTML5Ads.ActivateDetector(i.ACTIVATION_BY_ADS_MANAGER),this.VideoAds&&this.VideoAds.ActivateDetector(i.ACTIVATION_BY_ADS_MANAGER),this.FacebookAds&&this.FacebookAds.ActivateDetector(i.ACTIVATION_BY_ADS_MANAGER),this.TwitterAds&&this.TwitterAds.ActivateDetector(i.ACTIVATION_BY_ADS_MANAGER),this.RedditAds&&this.RedditAds.ActivateDetector(i.ACTIVATION_BY_ADS_MANAGER),this.PinterestAds&&this.PinterestAds.ActivateDetector(i.ACTIVATION_BY_ADS_MANAGER),this.InstagramAds&&this.InstagramAds.ActivateDetector(i.ACTIVATION_BY_ADS_MANAGER)}},{key:"PageRefreshed",value:function(e,t){this.SkinAds&&this.SkinAds.PageRefreshed(e,t),this.BannerAds&&this.BannerAds.PageRefreshed(e,t),this.HTML5Ads&&this.HTML5Ads.PageRefreshed(e,t),this.VideoAds&&this.VideoAds.PageRefreshed(e,t),this.FacebookAds&&this.FacebookAds.PageRefreshed(e,t),this.TwitterAds&&this.TwitterAds.PageRefreshed(e,t),this.RedditAds&&this.RedditAds.PageRefreshed(e,t),this.PinterestAds&&this.PinterestAds.PageRefreshed(e,t),this.InstagramAds&&this.InstagramAds.PageRefreshed(e,t)}},{key:"GetHtml5CandidatesPrebildInfo",value:function(){return this.HTML5Ads&&this.HTML5Ads.IsActive?this.HTML5Ads.GetPrebuildInfo():[]}}])&&r(t.prototype,n),A&&r(t,A),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=A},5152:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(1850),o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.onGotWindowMessageCallback=n,this.mesToFrameDeactivationIntervalId=null}var t,n,o;return t=e,(n=[{key:"SetId",value:function(e){this.id=e}},{key:"ActivateMesToFrameContentListener",value:function(e){this.mesToFrameDeactivationIntervalId||(this.mesToFrameDeactivationIntervalId=setInterval(this.CheckMesToFrameContent.bind(this),300),setTimeout(this.DeactivateMesToFrameContentListener.bind(this),3e3))}},{key:"CheckMesToFrameContent",value:function(){try{var e=document.body.getAttribute("bis_mes_to_fr");if(e&&e){var t=JSON.parse(e);document.body.setAttribute("bis_mes_to_fr",""),i.IsValid(t)&&this.onGotWindowMessageCallback&&this.onGotWindowMessageCallback(t),this.DeactivateMesToFrameContentListener()}}catch(e){}}},{key:"DeactivateMesToFrameContentListener",value:function(){this.mesToFrameDeactivationIntervalId&&(clearInterval(this.mesToFrameDeactivationIntervalId),this.mesToFrameDeactivationIntervalId=null)}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=o},2574:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var l=n(8962),d=n(1225),f=n(4019),h=n(9543),E=n(5212),A=n(3124),T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(u,e);var t,n,r,s=a(u);function u(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(i=s.call(this,e)).Config=t,i.bannerAdsConfig=i.Config.BannerAdsConfig,i.IOManager=n,i.IOManager.onGotBannerCandidatesExtractionStatusesCallback=i.onGoBannerCandidatesExtractionStatuses.bind(c(i)),i.AdBlockerAgent=r,i}return t=u,(n=[{key:"ActivateDetector",value:function(){var e=this;this.DetectCandidates(),setTimeout((function(){e.DetectCandidates()}),350),setInterval((function(){e.DetectCandidates()}),700)}},{key:"PushCandidate",value:function(e,t){var n={bisId:t,content:f.encode(e)};this.AddCandidate(n)}},{key:"IsValidCandidateSize",value:function(e){return!!(e&&e.width>70&&e.height>40&&e.height<1100)}},{key:"HideCandidate",value:function(e){e&&this.AdBlockerAgent.IsEnabled()&&(this.CandidateHidden(),this.HideElement(e))}},{key:"SetBorderToCandidate",value:function(e){e&&l.CONFIG_MARK_AD_CANDIDATES&&!this.AdBlockerAgent.IsEnabled()&&(l.CONFIG_MARK_PROCESSED_AD_CANDIDATES?e.style.cssText+=A.STYLES_BORDER_BANNER_URL_EXTRACTED:e.style.cssText+="border: 6px solid red !important;")}},{key:"SendCandidatesToBackground",value:function(){this.Candidates.length&&(this.AdBlockerAgent.IsEnabled()&&this.AdBlockerAgent.SetHiddenAmount(this.HiddenAmount),E.SendAdCandidates(this.id,this.Candidates,A.MESSAGE_TYPE_CANDIDATES_DATA_BANNERS,null))}},{key:"DetectCandidates",value:function(){this.AdBlockerAgent.IsEnabled()&&this.ClearHiddenCounter(),this.ClearCandidates();for(var e=d.QuerySelectorAll(document,this.bannerAdsConfig.QUERIES.FULL_IMG_COLLECTION),t=0;t<e.length;t++){var n=e[t];if(n){var r=n.src.toLowerCase(),i=this.getTagWithHref(n);if(i){var o=i.href.toLowerCase(),a=!1;if((!this.filterNonAdBanner(n)||this.isRedirectInHref(i))&&(d.IsInFilterList(this.Config.BlacklistBannerHref,o)||d.IsInFilterList(this.Config.BlacklistBannerImgSrc,r)||n.hasAttribute("bis_skin_element")||(d.isValidUrl(r)&&d.isValidUrl(o)||d.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,r)||d.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,o))&&(a=!0),a)){var s=n.getBoundingClientRect();if(this.IsValidCandidateSize(s)){this.SetBorderToCandidate(n),d.SetFullSizeToElement(n),d.SetFullSizeToElement(i);var c=d.GenerateAndSetBisIdToBanner(n);this.PushCandidate(i.outerHTML,c),this.HideCandidate(n)}}}}}for(var u=d.QuerySelectorAll(document,this.bannerAdsConfig.QUERIES.ON_EVENT_IMG_COLLECTION),l=0;l<u.length;l++){var f=u[l],h=f.src.toLowerCase();if(!d.IsInFilterList(this.Config.BlacklistBannerImgSrc,h)&&(d.isValidUrl(h)&&!d.IsUrlFromHost(document.location.host,h)||d.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,h))){var E=f.getBoundingClientRect();if(this.IsValidCandidateSize(E)){this.SetBorderToCandidate(f),d.SetFullSizeToElement(f);var A=d.GenerateAndSetBisIdToBanner(f);this.PushCandidate(f.outerHTML,A),this.HideCandidate(f)}}}this.SendCandidatesToBackground()}},{key:"filterNonAdBanner",value:function(e){var t=window.location.host||"__NULL__",n=e.src.toLowerCase(),r=n.match(/\/\/(www\.)?[A-Za-z0-9.]+/),i=this.getTagWithHref(e),o=i?i.href.match(/\/\/(www\.)?[A-Za-z0-9.]+/):"",a=document.querySelector("head").outerHTML,s=d.IsUrlFromHost(t,i.href);return o=o?o[0].replace("//",""):"",r=r?r[0].replace("//",""):"__NULL__",t=0===t.indexOf("www")?t.replace("www",""):t,s||a.includes(o)||n.includes(t)&&s||-1!==n.search(/^data/)}},{key:"isRedirectInHref",value:function(e){var t=e.href;return!!t&&t.search(/=https?/)>0}},{key:"onGoBannerCandidatesExtractionStatuses",value:function(e){if(l.CONFIG_MARK_AD_CANDIDATES&&l.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&e&&e.length&&!this.AdBlockerAgent.IsEnabled())for(var t=0;t<e.length;t++){var n=d.QuerySelector(document,'*[bis_id="'.concat(e[t].bannerId,'"]'));n&&d.UpdateCandidateStatusBorderColor(n,e[t].extractionStatus)}}},{key:"getTagWithHref",value:function(e){for(var t=e.parentElement,n=0;n<5&&"A"!==t.tagName;n++)t=t.parentElement;return"A"!==t.tagName&&(t=null),t}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);e.exports=T},3284:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(3124);var i=n(4019),o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.configEncoded=n,this.config=JSON.parse(i.decode(n)),this.SaveToStorageConfig(this.id,this.config)}var t,n,o;return t=e,o=[{key:"CheckBisDataExist",get:function(){try{return!!sessionStorage.getItem("bis_data")}catch(e){return null}}}],(n=[{key:"GetConfigEncoded",value:function(){return this.configEncoded}},{key:"BlacklistPublishers",get:function(){return this.config.filterLists.blacklistPublishers}},{key:"BlacklistBannerImgSrc",get:function(){return this.config.filterLists.blacklistBannerImgSrc}},{key:"BlacklistBannerHref",get:function(){return this.config.filterLists.blacklistBannerHref}},{key:"BlacklistIframeSrc",get:function(){return this.config.filterLists.blacklistIframeSrc}},{key:"BlacklistIframeId",get:function(){return this.config.filterLists.blacklistIframeId}},{key:"WhitelistCandidatesUrlKeyWords",get:function(){return this.config.filterLists.whitelistCandidatesUrlKeyWords}},{key:"WhitelistRedirectionCode",get:function(){return this.config.filterLists.whitelistRedirectionCode}},{key:"GetVideoValidatorsForHTML",value:function(){return this.config.videoValidatorsForHTML}},{key:"GetVideoValidatorsForJS",value:function(){return this.config.videoValidatorsForJS}},{key:"GetVideoValidatorsForXHR",value:function(){return this.config.videoValidatorsForXHR}},{key:"FacebookConfig",get:function(){return this.config.facebookConfig}},{key:"TwitterConfig",get:function(){return this.config.twitterConfig}},{key:"RedditConfig",get:function(){return this.config.redditConfig}},{key:"PinterestConfig",get:function(){return this.config.pinterestConfig}},{key:"GetInstagramConfig",get:function(){return this.config.instagramConfig}},{key:"GetAdBlockInspectorConfig",value:function(){return this.config.adBlockInspectorConfig}},{key:"BannerAdsConfig",get:function(){return this.config.bannerAdsConfig}},{key:"Html5AdsConfig",get:function(){return this.config.HTML5AdsConfig}},{key:"BlacklistTargetUrl",get:function(){return this.config.filterLists.blacklistTargetUrl}},{key:"GetHtml5TargetUrlDetectionConfig",value:function(){return this.config.html5TargetUrlDetectionConfig}},{key:"SaveToStorageConfig",value:function(t,n){var r=JSON.stringify({id:t,config:n}),i=e.CheckBisDataExist;i&&sessionStorage.removeItem("bis_data"),null!==i&&sessionStorage.setItem("bis_data",r)}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=o},5212:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(3124),o=n(1850),a=n(1225),s=(n(4019),function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.init=!1,this.onGotHTML5CandidatesExtractionStatusesCallback=null,this.onGotSkinAdCandidatesExtractionStatusesCallback=null,this.onGotBannerCandidatesExtractionStatusesCallback=null,this.onGotVideoXHRTrafficCallback=null,this.onAdBlockerStatusChanged=null,this.onTabUrlChanged=null,this.twitterVideoInfoCandidates=[],this.twitterAdCandidate=[]}var t,n,s;return t=e,s=[{key:"SendHiddenAdCandidatesAmount",value:function(e,t){var n=o.EmptyMessage;n.type=i.MESSAGE_TYPE_HIDDEN_AD_CANDIDATES_AMOUNT,n.from=e,n.to="bg",n.content=t,a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((function(e){}))}},{key:"SendInitMes",value:function(e,t){var n=o.EmptyMessage;n.type=i.MESSAGE_TYPE_TAB_INITIALIZATION,n.to="bg",n.content=e,a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).then((function(e){e&&e.config&&t&&t(e.config)})).catch((function(e){}))}},{key:"SendContentWindowPropMes",value:function(){window.addEventListener("load",(function e(){var t=o.EmptyMessage;t.type="CONTENT_WINDOW_PROP",t.to="bg";var n=document.createElement("iframe"),r=document.querySelector("body");n.style.display="none",r.appendChild(n),t.content=Object.getOwnPropertyNames(n.contentWindow),r.removeChild(n),a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(t).catch((function(e){})),window.removeEventListener("load",e)}))}},{key:"SendSinglePageReinitMes",value:function(e){var t=o.EmptyMessage;t.type=i.MESSAGE_TYPE_TAB_SINGLE_PAGE_REINITIALIZATION,t.to="bg",t.content=e,a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(t).catch((function(e){}))}},{key:"SendNewPageCreatedTicket",value:function(e){var t=o.EmptyMessage;t.type=i.MESSAGE_TYPE_NEW_PAGE_CREATED_TICKET,t.to="bg",t.content=e,a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(t).catch((function(e){}))}},{key:"SendPanelRegulatorResult",value:function(e){var t=o.EmptyMessage;t.type=i.MESSAGE_TYPE_PANEL_REGULATOR_RESULT,t.to="bg",t.content=e,a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(t).catch((function(e){}))}},{key:"SendMesToBackground",value:function(e,t,n,r){var i=o.EmptyMessage;i.type=t,i.from=e,i.to="bg",i.content=n,a.IsOnChromeRuntime()&&(r?chrome.runtime.sendMessage(i).then(r).catch((function(e){})):chrome.runtime.sendMessage(i).catch((function(e){})))}},{key:"SendAdCandidates",value:function(t,n,r,i){e.SendMesToBackground(t,r,n,i)}},{key:"SendCandidatePlacementsCount",value:function(t,n,r,i){e.SendMesToBackground(t,r,n,i)}},{key:"SendHtml5CandidatePlacements",value:function(t,n,r){e.SendMesToBackground(t,i.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_HTML5,n,r)}},{key:"SendTestMes",value:function(t,n,r){e.SendMesToBackground(t,i.MESSAGE_TYPE_TEST,n,r)}},{key:"SendAdBlockInspectorAgentReport",value:function(t,n){e.SendMesToBackground(t,i.MESSAGE_TYPE_ADBLOCK_INSPECTOR_AGENT_REPORT,n,null)}},{key:"SendTWVideoData",value:function(t,n){e.SendMesToBackground(t,i.MESSAGE_TYPE_TWITTER_VIDEO_DATA,n,null)}},{key:"SendRedditVideoData",value:function(t,n){e.SendMesToBackground(t,i.MESSAGE_TYPE_REDDIT_VIDEO_DATA,n,null)}},{key:"SendRedditRightColumnData",value:function(t,n){e.SendMesToBackground(t,i.MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA,n,null)}},{key:"SendVideoHar",value:function(e,t){var n=o.EmptyMessage;n.type=i.MESSAGE_TYPE_VIDEO_HAR,n.from=e,n.to="bg",n.content=t,a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((function(e){}))}},{key:"SendFBVideoData",value:function(e,t){var n=o.EmptyMessage;n.type=i.MESSAGE_TYPE_FACEBOOK_VIDEO_DATA,n.from=e,n.to="bg",n.content=t,a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n)}},{key:"SendPinterestVideoData",value:function(e,t){var n=o.EmptyMessage;n.type=i.MESSAGE_TYPE_PINTEREST_VIDEO_DATA,n.from=e,n.to="bg",n.content=t,a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((function(e){}))}},{key:"SendInstagramDataToBgStorage",value:function(e,t,n){var r=o.EmptyMessage;r.type=n,r.from=e,r.to="bg",r.content=t,a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(r)}},{key:"SendInstagramFullTextData",value:function(e,t,n){var r=o.EmptyMessage;r.type=n,r.from=e,r.to="bg",r.content=t,a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(r)}},{key:"SendFBInStreamData",value:function(e,t){var n=o.EmptyMessage;t.encodedText=t.content,t.alias=i.VIDEO_TRAFFIC_FACEBOOK_MEDIA_ALIAS_JSON,t.mediaType=i.VIDEO_TRAFFIC_FACEBOOK_MEDIA_TYPE_JSON,t.frameId=0,t.framesChain=[],t.contentType="json",delete t.content,n.type=i.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA,n.from=e,n.to="bg",n.content=t,a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((function(e){}))}},{key:"SendInitRequestListener",value:function(e,t){var n=o.EmptyMessage;n.type=i.MESSAGE_TYPE_INIT_REQUEST_LISTENER,n.from=e,n.to="bg",n.content=t,a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((function(e){}))}}],(n=[{key:"IsInit",value:function(){return this.init}},{key:"Init",value:function(){var t=this;this.init||(this.init=!0,window.addEventListener("message",(function(n){try{var r=n.data;if(o.IsValid(r)){var s=r.type;switch(s){case i.MESSAGE_TYPE_VIDEO_XHR_CANDIDATE:t.onGotVideoXHRTrafficCallback&&t.onGotVideoXHRTrafficCallback(r.content);break;case i.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA:e.SendFBInStreamData(t.id,r.content);break;case i.MESSAGE_TYPE_FACEBOOK_VIDEO_DATA:a.IsFBVideoDataValid(r.content)&&e.SendFBVideoData(t.id,r.content);break;case i.MESSAGE_TYPE_PINTEREST_VIDEO_DATA:e.SendPinterestVideoData(t.id,r.content);break;case i.MESSAGE_TYPE_INSTAGRAM_VIDEO_DATA:case i.MESSAGE_TYPE_INSTAGRAM_CAROUSEL_SLIDES_SOURCES:case i.MESSAGE_TYPE_INSTAGRAM_FULL_TEXT_DATA:case i.MESSAGE_TYPE_INSTAGRAM_STORY_DATA:e.SendInstagramDataToBgStorage(t.id,r.content,s);break;case i.MESSAGE_TYPE_TWITTER_VIDEO_DATA:e.SendTWVideoData(t.id,r.content);break;case i.MESSAGE_TYPE_REDDIT_VIDEO_DATA:e.SendRedditVideoData(t.id,r.content);break;case i.MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA:e.SendRedditRightColumnData(t.id,r.content)}}}catch(e){}}),!1),a.IsOnChromeRuntime()&&chrome.runtime.onMessage.addListener((function(e,n,r){var a=e;o.IsValid(a)&&a.to===t.id&&(a.type===i.MESSAGE_TYPE_HTML5_CANDIDATES_EXTRACTION_STATUSES?t.onGotHTML5CandidatesExtractionStatusesCallback&&t.onGotHTML5CandidatesExtractionStatusesCallback(a.content):a.type===i.MESSAGE_TYPE_BANNER_CANDIDATES_EXTRACTION_STATUSES?t.onGotBannerCandidatesExtractionStatusesCallback&&t.onGotBannerCandidatesExtractionStatusesCallback(a.content):a.type===i.MESSAGE_TYPE_SKIN_AD_CANDIDATES_EXTRACTION_STATUSES?t.onGotSkinAdCandidatesExtractionStatusesCallback&&t.onGotSkinAdCandidatesExtractionStatusesCallback(a.content):a.type===i.MESSAGE_TYPE_TAB_URL_CHANGED?t.onTabUrlChanged&&t.onTabUrlChanged(a.content):a.type===i.MESSAGE_TYPE_TAB_ADBLOCKER_STATUS_CHANGED&&t.onAdBlockerStatusChanged&&t.onAdBlockerStatusChanged(a.content))})))}},{key:"SendTicket",value:function(e){var t=o.EmptyMessage;t.type=i.MESSAGE_TYPE_OUT_TICKET,t.from=this.id,t.to="bg",t.content=e,a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(t).then(this.onTicketSend.bind(this)).catch((function(e){}))}},{key:"onTicketSend",value:function(e){e&&e.status}}])&&r(t.prototype,n),s&&r(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}());e.exports=s},960:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(1225),o=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=!1,this.Config=i,this.chainId=t,this.frameId=n,this.bisId=r,this.documentObj=null,this.onInputsDetectedCallback=null,this.onRedirectsDetectedCallback=null,this.detectedValidationInfo={inputs:!1,redirect:!1}}var t,n,o;return t=e,(n=[{key:"Init",value:function(e,t,n){return!this.init&&e&&(this.init=!0,this.fullIdStr=i.GetFullIdStr(this.chainId,this.frameId,this.bisId),this.documentObj=e,this.onInputsDetectedCallback=t,this.onRedirectsDetectedCallback=n,this.ValidateContent()),this.init}},{key:"ValidateContent",value:function(){this.detectedValidationInfo.inputs||this.GetInputsAmount()>0&&!this.IsIFrameWithInputsException()&&(this.detectedValidationInfo.inputs=!0,this.onInputsDetectedCallback&&this.onInputsDetectedCallback()),this.detectedValidationInfo.redirect||this.HasRedirect()&&(this.detectedValidationInfo.redirect=!0,this.onRedirectsDetectedCallback&&this.onRedirectsDetectedCallback())}},{key:"GetInputsAmount",value:function(){var e=0;try{var t=i.QuerySelectorAll(this.documentObj,"input");t&&t.length&&t.forEach((function(t){var n=t.getBoundingClientRect();n.width>0&&n.height>0&&(e+=1)}))}catch(e){}return e}},{key:"IsIFrameWithInputsException",value:function(){var e=!1,t=i.QuerySelector(this.documentObj,"html");return t&&-1!==t.innerHTML.search(/var clicktag/i)&&(e=!0),e}},{key:"IsWhiteListedRedirectionCode",value:function(e){var t=!1;try{if(e&&e.length&&this.Config)for(var n=this.Config.WhitelistRedirectionCode,r=0;r<n.length&&!t;r++)e.includes(n[r])&&(t=!0)}catch(e){}return t}},{key:"HasRedirect",value:function(){for(var e=!1,t=i.QuerySelectorAll(this.documentObj,"script"),n=0;n<t.length&&!e;n++){var r=t[n].innerHTML;r.length&&r.includes("location.replace")&&(e=!this.IsWhiteListedRedirectionCode(r))}return e}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=o},5106:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(4019),o=n(1225),a=n(1850),s=n(3124),c=n(8039),u=n(960),l=n(8185),d=n(3177),f=n(3284),h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.frameId=null,this.chainId=null,this.fullIdStr="",this.init=!1,this.chainActivated=!1,this.finalFrame=!1,this.activated=!1,this.contentSenderTimer=null,this.activationInfo=null,this.IframesIO=null,this.TargetUrlDetector=null,this.ContentValidator=null,this.VideoAds=null,this.Config=null,this.recheckerInterval=null,this.PageUrl=document.location.href,this.counter=10,this.timeoutHandlerForBlockedFrame=null,this.isBlockedFrameInfoGot=!1}var t,n,h;return t=e,n=[{key:"Init",value:function(){this.init||(this.init=!0,setTimeout(this.SendInitMessage.bind(this),700))}},{key:"SetBisStatus",value:function(){document&&document.body&&document.body.setAttribute&&document.body.setAttribute("bis_status","ok")}},{key:"RecheckBisStatus",value:function(){document&&document.body&&document.body.getAttribute&&"ok"!==document.body.getAttribute("bis_status")&&this.SetBisStatus()}},{key:"StopRechecker",value:function(){this.recheckerInterval&&(clearInterval(this.recheckerInterval),this.recheckerInterval=null)}},{key:"SendInitMessage",value:function(){var e=document.querySelector("html"),t=e?e.innerHTML:"",n=a.EmptyMessage;n.type=s.MESSAGE_TYPE_IFRAME_INITIALIZATION,n.from=this.id,n.to="bg",n.content={location:document.location.href,contentForSave:{depth:this.findDepthForClosedFrame(window,0),src:document.location.href,content:i.encode(t)}},o.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).then(this.onGotInitMesResponse.bind(this)).catch((function(e){}))}},{key:"findDepthForClosedFrame",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.parent;return n&&n!==top?(t++,this.findDepthForClosedFrame(n,t)):t}},{key:"onGotInitMesResponse",value:function(e){var t=this;if(e&&e.status&&"ok"===e.status&&a.IsValid(e.mes)&&e.mes.content.activeStatus&&(this.frameId=e.mes.content.frameId,this.fullIdStr=o.GetFullIdStr(this.chainId,this.frameId,this.id),e.mes.content.isMaster)){this.Config=new f(this.id,e.mes.content.configuration);var n=o.IsPublisherInBlacklist(this.PageUrl,this.Config.BlacklistPublishers),r=o.IsInFilterList(this.Config.BlacklistIframeSrc,this.PageUrl);if(n||r)return;this.SetBisStatus(),setTimeout(this.StopRechecker.bind(this),1e4),this.recheckerInterval=setInterval(this.RecheckBisStatus.bind(this),300),this.IframesIO=new c(this.id),this.IframesIO.Init(),this.IframesIO.onGotChainActivationCallback=this.onGotChainActivation.bind(this),this.IframesIO.onGotContentMesCallback=this.onGotContentMes.bind(this),this.VideoAds=new d(this.id,this.Config,this.IframesIO,!n),document&&document.body&&document.body.setAttribute&&document.body.setAttribute("bis_frame_id",this.frameId),"null"===self.origin&&(this.timeoutHandlerForBlockedFrame=setInterval((function(){t.counter--,t.isBlockedFrameInfoGot||t.counter<=0?clearInterval(t.timeoutHandlerForBlockedFrame):t.requestHeaderInfoFromBG()}),1e3))}}},{key:"requestHeaderInfoFromBG",value:function(){var e=a.EmptyMessage;e.type=s.MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME,e.from=this.id,e.to="bg",e.content={src:document.location.href},o.IsOnChromeRuntime()&&(this.setMessageListenerForThisIFrame(),chrome.runtime.sendMessage(e).catch((function(e){})))}},{key:"setMessageListenerForThisIFrame",value:function(){chrome.runtime.onMessage.addListener(this.callbackForHeaderInfoRequest.bind(this))}},{key:"callbackForHeaderInfoRequest",value:function(e){var t=arguments.callee;if(e&&e.type&&e.type===s.MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE){var n=e.parentInfo;if(chrome.runtime.onMessage.removeListener(t),n){this.isBlockedFrameInfoGot=!0;var r=l.DetectTargetUrlFromWindowObj(this.id,self,this.Config),i={depth:n.depth,headerInfo:n.headerInfo,chainId:n.chainId,configEncoded:this.Config.configEncoded,targetUrlCandidates:r.length?r:[]};this.onGotChainActivation(i)}}}},{key:"onGotChainActivation",value:function(t){var n=this;if(this.chainActivated)return null;if(this.chainActivated=!0,!(t&&t.headerInfo&&t.headerInfo.bisId))return null;this.id=t.headerInfo.bisId,this.IframesIO.SetId(this.id),this.chainId=t.chainId,this.fullIdStr=o.GetFullIdStr(this.chainId,this.frameId,this.id),this.StopRechecker(),this.activationInfo=t,this.Config||t.configEncoded&&t.configEncoded.length&&(this.Config=new f(this.id,t.configEncoded)),this.ContentValidator=new u(this.chainId,this.frameId,this.id,this.Config),this.ContentValidator.Init(document,this.onContentInputsDetected.bind(this),this.onContentRedirectsDetected.bind(this)),this.TargetUrlDetector=new l(this.chainId,this.frameId,this.id,this.activationInfo.targetUrlCandidates,this.Config),this.TargetUrlDetector.Init(this.IframesIO),e.SetBisId(document,window,this.id),o.SetBisDepth(document.body,t.depth),o.SetBisChainId(document.body,t.chainId),this.InjectJs();var r=setTimeout((function(){n.onGotActivationMes(),clearTimeout(r)}),50)}},{key:"onGotActivationMes",value:function(){if(!this.activated){this.activated=!0;var t=o.QuerySelectorAll(document,"iframe, frame");if(t.length)for(var n=0;n<t.length;n++){var r=t[n];if(o.SetFullSizeToElement(r,e.GetAbsoluteCoordinates(this.activationInfo)),o.GenerateAndSetBisIdToFrame(r),o.SetBisDepth(r,this.activationInfo.depth+1),o.SetBisChainId(r,this.activationInfo.chainId),o.IsIframeHasContentScript(t[n]))e.SendActivationMesToFrame(this.id,this.activationInfo.chainId,r,this.activationInfo.depth+1,this.Config);else{var i=e.GetInvalidChainSegmentContent(this.id,this.activationInfo.chainId,r,this.activationInfo.depth+1,this.Config);e.SendInvalidChainSegmentContent(this.id,i)}}this.TargetUrlDetector.DetectTargetUrl(1e3,this.onTargerUrlDetected.bind(this))}}},{key:"onTargerUrlDetected",value:function(){if(!this.contentSenderTimer){var e=o.GetRandomIntInRange(0,200);this.contentSenderTimer=setTimeout(this.SendContent.bind(this),e)}}},{key:"SendContent",value:function(){e.PrepareContent(this.fullIdStr,document,e.GetAbsoluteCoordinates(this.activationInfo)),e.RemoveInjectedJs(this.fullIdStr,document);var t=document.querySelector("html");if(t){var n=t.outerHTML;if(n.length){var r=a.EmptyMessage;r.type=s.MESSAGE_TYPE_IFRAME_CONTENT,r.from=this.id,r.to="bg",r.content={isValid:!0,headerInfo:this.activationInfo.headerInfo,contentFinal:i.encode(n),targetUrl:this.TargetUrlDetector.FrameTargetUrl},o.IsOnChromeRuntime()&&chrome.runtime.sendMessage(r).catch((function(e){}))}}}},{key:"onGotChainActivationResponse",value:function(){}},{key:"onGotContentMes",value:function(){}},{key:"onContentInputsDetected",value:function(){this.IframesIO.SendInputsDetected()}},{key:"onContentRedirectsDetected",value:function(){this.IframesIO.SendRedirectDetected()}},{key:"InjectJs",value:function(){if(!document.querySelector('script[bis_script="display"]')){var e=document.createElement("script"),t=document.querySelector("head");this.setAttributes(e),t&&t.appendChild(e)}}},{key:"setAttributes",value:function(e){var t=o.getURL("../executers/".concat(s.IFRAMES_TRAFFIC_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.setAttribute("bis_script","display"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("bis_id",this.id),e.src=t}}],h=[{key:"SetBisId",value:function(e,t,n){t&&(t.bis_id=n),e&&(e.bis_id=n),e.body&&e.body.setAttribute&&e.body.setAttribute("bis_body_id",n)}},{key:"RemoveInjectedJs",value:function(e,t){try{var n=t.head.querySelectorAll("script[bis_script]");if(n&&n.length)for(var r=0;r<n.length;r++)n[r].remove()}catch(e){}}},{key:"GetAbsoluteCoordinates",value:function(e){return{x:e.headerInfo.size.abs_x,y:e.headerInfo.size.abs_y}}},{key:"PrepareContent",value:function(e,t,n){for(var r=o.QuerySelectorAll(t,"*:not(html):not(script):not(head):not(meta):not(link):not(title):not(style):not(param)"),i=0;i<r.length;i++){var a=r[i];if(a)try{var s=!1,c=window.getComputedStyle(a).backgroundImage;if(c&&c.length&&"none"!=c&&c.includes("url")&&(c=c.replace(/"/g,"'"),s=!0),a.hasAttribute("style")){var u=a.getAttribute("style");u&&a.setAttribute&&(u=u.replace(/"/g,"'"),a.setAttribute("style",u),s&&(a.style.cssText+="background-image: "+c+";",a.setAttribute("bis_label","style")))}else s&&a.setAttribute&&(a.setAttribute("style","background-image: "+c+";"),a.setAttribute("bis_label","style"));try{if(a.attributes&&a.attributes.length)for(var l=0;l<a.attributes.length;l++)a.attributes[l]&&a.attributes[l].value&&a.attributes[l].value.length&&"src"!==a.attributes[l].name&&a.attributes[l].value.includes('"')&&(a.attributes[l].value=a.attributes[l].value.replace(/"/g,"'"))}catch(e){}o.SetFullSizeToElement(a,n)}catch(e){}}}},{key:"ExtractContent",value:function(e,t){return t.document.querySelector("html").outerHTML}},{key:"GetFrameHeaderInfo",value:function(e,t,n){var r={depth:n,chainId:e,frameId:t.id,src:t.src,size:JSON.parse(t.getAttribute("bis_size")),bisId:t.getAttribute("bis_id")};return 0===n&&(r.topHeaderContent=i.encode(t.outerHTML)),r}},{key:"SendActivationMesToFrame",value:function(t,n,r,c,u){var d=!1;try{var f=document.querySelector("body"),h=self===top?0:f?+f.getAttribute("bis_frame_id"):null,E="";if(u&&u.GetConfigEncoded&&(E=u.GetConfigEncoded()),r){var A,T=a.EmptyMessage;try{A=r.contentWindow&&Object.keys(r.contentWindow).includes("origin")?r.contentWindow.origin:r.src}catch(e){A=r.src}T.type=s.MESSAGE_TYPE_CHAIN_ACTIVATION,T.from=t,T.to="fr",T.content={chainId:n,depth:c,headerInfo:e.GetFrameHeaderInfo(n,r,c),configEncoded:E,targetUrlCandidates:[]};var y=a.EmptyMessage;if(y.type=s.MESSAGE_TYPE_HEADER_INFO_TO_STORAGE,y.from=t,y.to="bg",y.content={chainId:n,depth:c,frameId:h,headerInfo:e.GetFrameHeaderInfo(n,r,c)},o.IsOnChromeRuntime()&&chrome.runtime.sendMessage(y).then((function(){})).catch((function(e){})),o.IsIframeSecure(r)){if(r.contentWindow&&r.contentWindow.postMessage)try{r.contentWindow.postMessage(T,A)}catch(e){}}else{try{var _=l.DetectTargetUrlFromWindowObj(t,r.contentWindow,u);_.length&&(T.content.targetUrlCandidates=_)}catch(e){}r.contentWindow.document.body.setAttribute&&r.contentWindow.document.body.setAttribute("bis_activation",i.encode(JSON.stringify(T)))}d=!0}}catch(e){}return d}},{key:"GetInvalidChainSegmentContent",value:function(t,n,r,a,s){var c={},u=!1,d=e.GetFrameHeaderInfo(n,r,a),f={x:d.size.x,y:d.size.y};try{var h=o.QuerySelectorAll(r.contentWindow.document,"iframe, frame");if(0===h.length)u=!0;else{u=!1;for(var E=0;E<h.length;E++)o.SetFullSizeToElement(h[E],f),o.GenerateAndSetBisIdToFrame(h[E]),o.SetBisDepth(h[E],a+1),e.SendActivationMesToFrame(t,n,h[E],a+1,s)}e.PrepareContent(t,r.contentWindow.document,f),c.isValid=!1,c.isChainCompleted=u,c.headerInfo=d,c.contentFinal=i.encode(e.ExtractContent(t,r.contentWindow)),c.targetUrl=l.DetectTargetUrlFromWindowObj(t,r.contentWindow,s)}catch(e){}return c}},{key:"SendInvalidChainSegmentContent",value:function(e,t){if(t){var n=a.EmptyMessage;n.type=s.MESSAGE_TYPE_IFRAME_INVALID_CHAIN_SEGMENT_CONTENT,n.from=e,n.to="bg",n.content=t,o.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((function(e){}))}}}],n&&r(t.prototype,n),h&&r(t,h),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=h},1674:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var l=n(8962),d=n(1225),f=n(3124),h=n(9543),E=n(5106),A=n(5212),T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(u,e);var t,n,r,s=a(u);function u(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(i=s.call(this,e)).Config=t,i.HTML5AdsConfig=i.Config.Html5AdsConfig,i.IOManager=n,i.IOManager.onGotHTML5CandidatesExtractionStatusesCallback=i.onGotHTML5CandidatesExtractionStatuses.bind(c(i)),i.AdBlockerAgent=r,i.topFramesCandidates=[],i.onDetectedCallback=null,i.chainIdCounter=0,i}return t=u,(n=[{key:"ActivateDetector",value:function(){var e=this;this.Activated(),this.DetectHTML5AdsCandidates(),setTimeout((function(){e.DetectHTML5AdsCandidates()}),350),setInterval((function(){e.DetectHTML5AdsCandidates()}),700)}},{key:"DetectHTML5AdsCandidates",value:function(){var e=this;this.AdBlockerAgent.IsEnabled()&&this.ClearHiddenCounter();var t=d.QuerySelectorAll(document,this.HTML5AdsConfig.QUERIES.IFRAMES_COLLECTION),n=0;if(t.length)for(var r=0;r<t.length;r++){var i=t[r],o=i.src?i.src.toLowerCase():i.src;if(this.preCheckFrameContent(i))if(d.IsInFilterList(this.Config.BlacklistIframeSrc,o)||d.IsInFilterList(this.Config.BlacklistIframeId,i.id))d.SetFullSizeToElement(i);else if(!this.IsFrameFromSite(o)||d.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,o)){var a=i.getBoundingClientRect();if(a.width>70&&a.height>40&&a.height<1100){d.SetFullSizeToElement(i);var s=d.GenerateAndSetBisIdToFrame(i);this.chainIdCounter=this.chainIdCounter+1;var c={ticketId:this.TicketId,pageUrl:this.PageUrl,bisId:s,chainId:this.chainIdCounter,detectionTime:(new Date).getTime(),processingStartTime:null,frame:i,isSecure:d.IsIframeSecure(i),hasContentScript:d.IsIframeHasContentScript(i),status:f.CANDIDATE_PROCESS_STATUS_DETECED};this.topFramesCandidates.push(c),d.SetBisDepth(i,0),d.SetBisChainId(i,this.chainIdCounter),n+=1,this.AdBlockerAgent.IsEnabled()&&(this.CandidateHidden(),this.HideElement(i)),l.CONFIG_MARK_AD_CANDIDATES&&!this.AdBlockerAgent.IsEnabled()&&(i.style.cssText+="border: 6px solid red !important;")}}else d.SetFullSizeToElement(i)}if(n>0){A.SendHtml5CandidatePlacements(this.id,n,null);for(var u=function(t){e.topFramesCandidates[t].status===f.CANDIDATE_PROCESS_STATUS_DETECED&&(e.topFramesCandidates[t].status=f.CANDIDATE_PROCESS_STATUS_START_PROCESSING,setTimeout((function(){e.ActivateCandidateProcessing(e.topFramesCandidates[t])}),3e3+d.GetRandomIntInRange(0,500)))},h=0;h<this.topFramesCandidates.length;h++)u(h);this.AdBlockerAgent.IsEnabled()&&this.AdBlockerAgent.SetHiddenAmount(this.HiddenAmount)}return this.topFramesCandidates.length}},{key:"preCheckFrameContent",value:function(e){if(!e.contentDocument)return!0;var t=e.contentDocument.querySelectorAll(this.HTML5AdsConfig.QUERIES.ACCEPTABLE_NODES_IN_IFRAME),n=e.contentDocument.querySelectorAll(this.HTML5AdsConfig.QUERIES.UNACCEPTABLE_NODES_IN_IFRAME),r=!1;return t.length&&!n.length&&(r=!0),r}},{key:"onGotHTML5CandidatesExtractionStatuses",value:function(e){if(e&&e.length)for(var t=0;t<e.length;t++)if(this.AdBlockerAgent.IsEnabled()&&e[t].extractionStatus.filteredOut)this.UnhideElement(d.QuerySelector(document,'iframe[bis_chainid="'.concat(e[t].chainId,'"]')));else if(l.CONFIG_MARK_AD_CANDIDATES&&l.CONFIG_MARK_PROCESSED_AD_CANDIDATES){var n=d.QuerySelector(document,'iframe[bis_chainid="'.concat(e[t].chainId,'"]'));n&&d.UpdateCandidateStatusBorderColor(n,e[t].extractionStatus)}}},{key:"ActivateCandidateProcessing",value:function(e){if(e&&e.status&&e.status===f.CANDIDATE_PROCESS_STATUS_START_PROCESSING){e.processingStartTime=(new Date).getTime(),e.status=f.CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED;var t=d.IsIframeSecure(e.frame);e.isSecure!==t&&(e.isSecure=t);var n=d.IsIframeHasContentScript(e.frame);if(e.hasContentScript!==n&&(e.hasContentScript=n),e.hasContentScript)E.SendActivationMesToFrame(this.id,e.chainId,e.frame,0,this.Config);else{var r=E.GetInvalidChainSegmentContent(this.id,e.chainId,e.frame,0,this.Config);if(l.CONFIG_MARK_AD_CANDIDATES&&l.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&r.isChainCompleted){var i={fullContentExtracted:!1,targetUrlExtracted:!1,sentToBackend:!1};r.contentFinal&&r.contentFinal.length&&(i.fullContentExtracted=!0),r.targetUrl&&r.targetUrl.length&&(i.targetUrlExtracted=!0),d.UpdateCandidateStatusBorderColor(e.frame,i)}E.SendInvalidChainSegmentContent(this.id,r)}}}},{key:"GetPrebuildInfo",value:function(){for(var e=[],t=(new Date).getTime(),n=0;n<this.topFramesCandidates.length;n++)this.topFramesCandidates[n].status===f.CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED&&(this.topFramesCandidates[n].status=f.CANDIDATE_PROCESS_STATUS_PREBUILD_INFO_SENT,e.push({ticketId:this.topFramesCandidates[n].ticketId,pageUrl:this.topFramesCandidates[n].pageUrl,bisId:this.topFramesCandidates[n].bisId,chainId:this.topFramesCandidates[n].chainId,timeAfterDetection:t-this.topFramesCandidates[n].detectionTime,timeAfterProcessingStart:t-this.topFramesCandidates[n].processingStartTime}));return e}},{key:"IsFrameFromSite",value:function(e){var t=!1,n=e;if(n.length){var r=n.indexOf("?");(r>0||(r=n.indexOf("#"))>0)&&(n=e.substring(0,r)),-1!=n.indexOf(window.location.host)?t=!0:d.isValidUrl(n)||"about:blank"==n||(t=!0)}return t}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);e.exports=T},8039:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(1850),o=n(3124),a=n(1225),s=n(4019),c=n(5152),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.init=!1,this.AtrMessageListeners=[],this.webNavigationIframes=[],this.chainActivationListernerIntervalId=null,this.onWindowEmbeddedTargetUrlDetectionCallback=null,this.onGotContentMesCallback=null,this.onGotChainActivationCallback=null,this.onGotVideoXHRTrafficCallback=null,this.chainActivationEventProcessed=!1,this.processedMessages=[]}var t,n,u;return t=e,(n=[{key:"IsInit",value:function(){return this.init}},{key:"Context",get:function(){return this}},{key:"SetId",value:function(e){this.id=e,this.AtrMessageListener&&this.AtrMessageListener.SetId(e)}},{key:"Init",value:function(){var e=this;this.init||(this.init=!0,window.addEventListener("message",(function(t){try{var n=t.data;e.ProcessWindowMessage(n)}catch(e){}}),!1),a.IsOnChromeRuntime()&&chrome.runtime.onMessage.addListener((function(t,n,r){var a=t;i.IsValid(a)&&(a.type===o.MESSAGE_TYPE_GET_FRAME_CONTENT?a.multiTo.includes(e.id)&&(e.webNavigationIframes=a.content,e.onGotContentMesCallback&&e.onGotContentMesCallback()):a.type===o.MESSAGE_TYPE_TARGET_URL_DETECTION_BY_CLICK&&a.multiTo.includes(e.id)&&e.ActivateWindowClickTargetUrlDetection(a.content))})),this.chainActivationListernerIntervalId=setInterval((function(){try{if(!e.chainActivationEventProcessed&&document&&document.body){var t=document.body.getAttribute("bis_activation");if(t&&t.length){var n=s.decode(t);if("{"===n[0]&&"}"===n[n.length-1]){var r=JSON.parse(n);i.IsValid(r)&&r.type===o.MESSAGE_TYPE_CHAIN_ACTIVATION&&(e.chainActivationEventProcessed=!0,clearInterval(e.chainActivationListernerIntervalId),e.chainActivationListernerIntervalId=null,document.body.setAttribute("bis_activation","done"),e.onGotChainActivationCallback&&e.onGotChainActivationCallback(r.content))}}}}catch(e){}}),500))}},{key:"ProcessWindowMessage",value:function(e){i.IsValid(e)&&e.posdHash&&!this.processedMessages.includes(e.posdHash)&&(e.posdHash&&e.posdHash.length&&this.processedMessages.push(e.posdHash),e.type===o.MESSAGE_TYPE_CHAIN_ACTIVATION?(this.chainActivationListernerIntervalId&&(clearInterval(this.chainActivationListernerIntervalId),this.chainActivationListernerIntervalId=null),this.onGotChainActivationCallback&&this.onGotChainActivationCallback(e.content)):e.type===o.MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND?this.onWindowEmbeddedTargetUrlDetectionCallback&&this.onWindowEmbeddedTargetUrlDetectionCallback(e.content.targetUrlList):e.type===o.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND?(e.to="bg",a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((function(e){}))):e.type===o.MESSAGE_TYPE_VIDEO_XHR_CANDIDATE&&this.onGotVideoXHRTrafficCallback&&this.onGotVideoXHRTrafficCallback(e.content))}},{key:"ActivateWindowEmbeddedTargetUrlDetection",value:function(e){try{this.onWindowEmbeddedTargetUrlDetectionCallback=e;var t=i.EmptyMessage;t.type=o.MESSAGE_TYPE_GET_WINDOW_TARGET_URL,t.from=this.id,t.to=this.id+"_w",window.postMessage&&window.postMessage(t,"*");var n=new c(this.id,this.ProcessWindowMessage.bind(this));n.ActivateMesToFrameContentListener(o.MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND),this.AtrMessageListeners.push(n)}catch(e){}}},{key:"ActivateWindowClickTargetUrlDetection",value:function(e){try{var t=i.EmptyMessage;t.type=o.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL,t.from=this.id,t.to=this.id+"_w",t.content=e,window.postMessage&&window.postMessage(t,"*");var n=new c(this.id,this.ProcessWindowMessage.bind(this));n.ActivateMesToFrameContentListener(o.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL),this.AtrMessageListeners.push(n)}catch(e){}}},{key:"SendInputsDetected",value:function(){var e=i.EmptyMessage;e.type=o.MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_INPUTS,e.from=this.id,e.to="bg",a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((function(e){}))}},{key:"SendRedirectDetected",value:function(){var e=i.EmptyMessage;e.type=o.MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_REDIRECTS,e.from=this.id,e.to="bg",a.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((function(e){}))}}])&&r(t.prototype,n),u&&r(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=u},4269:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(1225),o=n(3124),a=n(3255),s=n(1828),c=n(5212),u=n(5733),l=n(661),d=n(3284),f=n(353),h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.tabId=null,this.init=!1,this.panalyticsId="",this.adsCandidatesDetectionInterval=null,this.ticket=null,this.RefreshTicket(),c.SendNewPageCreatedTicket(i.ToJSON(this.ticket))}var t,n,h;return t=e,(n=[{key:"RefreshTicket",value:function(){this.pageUrl=document.location.href,this.ticketId=i.GenerateTicketId(),this.cycleNumber=0,this.ticket=a.GetSingleOutTicket(this.panalyticsId,this.ticketId,this.tabId),this.init&&this.AdsManager&&this.AdsManager.PageRefreshed(this.pageUrl,this.ticketId)}},{key:"Init",value:function(){this.init||c.SendInitMes({ticketId:this.ticketId,url:this.pageUrl},this.onGetInitConfig.bind(this))}},{key:"onGetInitConfig",value:function(e){return e.activeStatus?this.init?null:(this.init=!0,this.tabId=e.tabId,this.id="mp_"+e.tabId,this.panalyticsId=e.panalyticsId,this.ticket.tabId=this.tabId,this.ticket[o.TICKET_ALIAS_PANALYTICSID]=this.panalyticsId,this.Config=new d(this.id,e.configuration),this.IOManager=new c(this.id),this.IOManager.onTabUrlChanged=this.onTabUrlChanged.bind(this),this.IOManager.Init(),this.AdBlockerAgent=new u(this.id,this.IOManager),this.AdBlockerAgent.Init(e.adBlockerStatus,e.excludeList,e.tabId),this.AdsManager=new s(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.PanelsRegulator=new f(this.id),this.PanelsRegulator.Init(this.AdBlockerAgent,this.onGotRegulatorRespond.bind(this)),void(e.activeAdBlockInspectorAgent&&(this.AdBlockInspectorAgent=new l(this.id),this.AdBlockInspectorAgent.Init(this.Config.GetAdBlockInspectorConfig())))):null}},{key:"onGotRegulatorRespond",value:function(e){if(!this.init)return null;e&&(this.adsCandidatesDetectionInterval=setInterval(this.onAdsCandidatesDetected.bind(this),1e4),this.AdsManager.ActivateAdsdetectors(),c.SendNewPageCreatedTicket(i.ToJSON(this.ticket))),c.SendPanelRegulatorResult(e)}},{key:"onTabUrlChanged",value:function(e){e&&e.newUrl&&e.initedTicketId&&e.newUrl!==this.pageUrl&&e.initedTicketId===this.ticketId&&(this.RefreshTicket(),c.SendSinglePageReinitMes({ticketId:this.ticketId,url:this.pageUrl}),c.SendNewPageCreatedTicket(i.ToJSON(this.ticket)))}},{key:"onAdsCandidatesDetected",value:function(){this.init&&(i.IsOnChromeRuntime()?this.panalyticsId.length&&(this.cycleNumber=this.cycleNumber+1,this.ticket[o.TICKET_ALIAS_PANALYTICSID]=this.panalyticsId,this.ticket.windowSize=i.GetWindowSize(),this.cycleNumber>1&&(this.ticket.firstVisit=!1),this.ticket.adCandidatesHtml5=this.AdsManager.GetHtml5CandidatesPrebildInfo(),this.IOManager.SendTicket(i.ToJSON(this.ticket))):this.adsCandidatesDetectionInterval&&clearInterval(this.adsCandidatesDetectionInterval))}}])&&r(t.prototype,n),h&&r(t,h),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=h},353:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(8962),o=n(3124),a=n(1225),s=n(4019),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.init=!1,this.extensionId=""+chrome.runtime.id,this.AdBlockerAgent=null,this.onInitCallback=null}var t,n,c;return t=e,(n=[{key:"Init",value:function(e,t){!this.init&&e&&(this.onInitCallback=t,this.init=!0,this.AdBlockerAgent=e,document.readyState===o.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.ActivateRegulator.bind(this)):document.readyState!==o.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==o.DOCUMENT_READYSTATE_COMPLETE||this.ActivateRegulator())}},{key:"ActivateRegulator",value:function(){this.RegisterPanel(),setTimeout(this.Regulate.bind(this),500)}},{key:"Regulate",value:function(){var e=!0,t="",n=[];try{var r=document.body.getAttribute("bis_register");if(r&&r.length){n=JSON.parse(s.decode(r));for(var i=0;i<n.length&&0===t.length;i++)n[i].master&&(t=n[i].extensionId);t.length&&this.extensionId!==t&&(e=!1)}}catch(e){}this.onInitCallback&&this.onInitCallback(e)}},{key:"GetPanelScore",value:function(){var e=i.CONFIG_PANELOS_VERSION.split("."),t=1e4*parseInt(e[0])+100*parseInt(e[1])+parseInt(e[2]),n=this.AdBlockerAgent.GetStatus();return a.IsFacebookUrl(document.location.href)?n[o.ADBLOCKER_FOR_FACEBOOK]===o.ADBLOCKER_STATUS_ENABLED&&(t*=10):a.IsTwitterUrl(document.location.href)?n[o.ADBLOCKER_FOR_TWITTER]===o.ADBLOCKER_STATUS_ENABLED&&(t*=10):a.IsRedditUrl(document.location.href)?n[o.ADBLOCKER_FOR_REDDIT]===o.ADBLOCKER_STATUS_ENABLED&&(t*=10):n[o.ADBLOCKER_FOR_DISPLAY]===o.ADBLOCKER_STATUS_ENABLED&&(t*=10),t}},{key:"UpdateRegister",value:function(e){for(var t={master:!0,extensionId:this.extensionId,adblockerStatus:this.AdBlockerAgent.GetStatus(),version:i.CONFIG_PANELOS_VERSION,score:this.GetPanelScore()},n=!0,r=0;r<e.length&&n;r++)e[r].extensionId===this.extensionId&&(n=!1,e[r]=t);n&&e.push(t)}},{key:"ChooseWinner",value:function(e){if(e&&e.length)if(1===e.length);else{for(var t=0,n=e[t].score,r=0;r<e.length;r++)e[r].master=!1,e[r].score>n&&(n=e[r].score,t=r);e[t].master=!0}}},{key:"RegisterPanel",value:function(){try{var e=[],t=document.body.getAttribute("bis_register");t&&t.length&&(e=JSON.parse(s.decode(t))),this.UpdateRegister(e),this.ChooseWinner(e),document.body.setAttribute("bis_register",s.encode(JSON.stringify(e)))}catch(e){}}}])&&r(t.prototype,n),c&&r(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=c},8794:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var l=n(1225),d=n(8962),f=n(9543),h=n(5212),E=n(3124),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(u,e);var t,n,r,s=a(u);function u(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(i=s.call(this,e)).Config=t,i.skinAdsConfig=t.config.skinAdsConfig,i.IOManager=n,i.IOManager.onGotSkinAdCandidatesExtractionStatusesCallback=i.onGotSkinAdCandidatesExtractionStatuses.bind(c(i)),i.AdBlockerAgent=r,i}return t=u,(n=[{key:"ActivateDetector",value:function(){var e=this;this.DetectCandidates(),setTimeout((function(){e.DetectCandidates()}),500),setInterval((function(){e.DetectCandidates()}),1e3)}},{key:"SendCandidatesToBackground",value:function(){this.Candidates.length&&(this.AdBlockerAgent.IsEnabled()&&this.AdBlockerAgent.SetHiddenAmount(this.HiddenAmount),h.SendAdCandidates(this.id,this.Candidates,E.MESSAGE_TYPE_CANDIDATES_DATA_SKINADS,null))}},{key:"DetectCandidates",value:function(){this.AdBlockerAgent.IsEnabled()&&this.ClearHiddenCounter(),this.ClearCandidates(),this.GetSkinAdFromBodyBackground(),0==this.CandidatesCount&&this.GetSkinAdFromDivBackground(),this.SendCandidatesToBackground()}},{key:"GetSkinAdFromBodyBackground",value:function(){var e,t={source:[],targetUrl:[]},n=document.body;if(n&&!n.hasAttribute("bis_skin_checked")&&(e=l.GetUrlFromStyleStr(window.getComputedStyle(n).backgroundImage)),e&&l.isValidUrl(e)){n.setAttribute("bis_skin_checked","1");var r={type:"single",src:e,size:l.GetFullElementSize(n)};t.source.push(r);for(var i=l.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_HREF_COLLECTION),o=0;o<i.length;o++){var a=i[o];a.setAttribute&&a.setAttribute("bis_skin_checked","1");var s=a.getBoundingClientRect(),c=a.firstElementChild?a.firstElementChild.getBoundingClientRect():null;a.href&&(s.width>50&&s.height>=100&&0==s.left||c&&c.width>50&&c.height>=100&&0==c.left)&&l.isValidUrl(a.href)&&!t.targetUrl.includes(a.href)&&t.targetUrl.push(a.href),this.findElementsByHref(t.targetUrl,a)}}t.source.length&&t.targetUrl.length&&(this.hideSkinAdElement(document),this.AddCandidate(t))}},{key:"GetSkinAdFromDivBackground",value:function(){for(var e={source:[],targetUrl:[]},t=!1,n=l.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_DIV_COLLECTION),r=0;r<n.length&&!t;r++)if((c=n[r]).setAttribute&&c.setAttribute("bis_skin_checked","1"),(u=c.getBoundingClientRect()).width>50&&u.height>500&&0==u.left){var i=l.GetUrlFromStyleStr(window.getComputedStyle(c).backgroundImage);if(i&&l.isValidUrl(i)){var o={type:"single",src:i,size:l.GetFullElementSize(c)};e.source.push(o),t=!0,this.AdBlockerAgent.IsEnabled()&&c.style&&(c.style.backgroundImage="none",this.CandidateHidden())}}if(t)for(var a=l.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_HREF_COLLECTION),s=0;s<a.length;s++){var c;(c=a[s]).setAttribute&&c.setAttribute("bis_skin_checked","1");var u=c.getBoundingClientRect();c.href&&0==u.left&&(u.width>50&&u.height>500||u.width>500&&u.height>50)&&l.isValidUrl(c.href)&&!e.targetUrl.includes(c.href)&&e.targetUrl.push(c.href)}e.source.length&&e.targetUrl.length&&this.AddCandidate(e)}},{key:"findElementsByHref",value:function(e,t){var n=t.href;e.includes(n)&&(this.SetBorderToCandidate(t),this.hideSkinAdElement(t),t.setAttribute("bis_skin_element","1"))}},{key:"hideSkinAdElement",value:function(e){this.AdBlockerAgent.IsEnabled()&&(e&&e.style&&(e.style.visibility="hidden",e.style.backgroundImage="none",this.CandidateHidden()),e.body&&e.body.style&&(e.body.style.backgroundImage="none",this.CandidateHidden()))}},{key:"SetBorderToCandidate",value:function(e){var t=e.getBoundingClientRect();!this.AdBlockerAgent.IsEnabled()&&e&&(t.width>1&&t.height>1?e.style.cssText+="border: 6px solid red !important; display: block;":e.firstElementChild.style.cssText+="border: 6px solid red !important; display: block;")}},{key:"onGotSkinAdCandidatesExtractionStatuses",value:function(e){if(d.CONFIG_MARK_AD_CANDIDATES&&d.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&e&&e.length&&!this.AdBlockerAgent.IsEnabled())for(var t=function(t){var n=l.QuerySelectorAll(document,e[t].query);n&&n.forEach((function(n){n&&l.UpdateCandidateStatusBorderColor(n,e[t].extractionStatus)}))},n=0;n<e.length;n++)t(n)}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(f);e.exports=A},3255:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(8962),o=n(1225),a=n(3124),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"GetSingleOutTicket",value:function(e,t,n){var r={tabId:n,ticketFormatVersion:3,partnerId:i.CONFIG_PARTNER_ID,distributorId:i.CONFIG_DISTRIBUTOR_ID,ticketId:t,firstVisit:!0,url:document.location.href,userAgent:navigator.userAgent,creationTime:o.GetCurrentDataTimeStr(),windowSize:o.GetWindowSize(),timeOnPage:0,adCandidatesSkinAd:[],adCandidatesBanner:[],adCandidatesHtml5:[],adsFacebook:[],adsTwitter:[],adsReddit:[],adsPinterest:[],adsInstagram:[],adCandidatePlacements:{skinAd:0,banner:0,html5:0,facebook:0,twitter:0,reddit:0,pinterest:0,tiktok:0,instagram:0},videoTraffics:[],activeAdBlocker:!1};r[a.TICKET_ALIAS_PANALYTICSID]=e,r[a.TICKET_ALIAS_PINSTANCEID]=i.CONFIG_PINSTANCE_ID;var s=o.GetBaseHref();""!==s&&(r.base=s);var c=chrome.runtime.getManifest();return r.extensionVersion=c.version,r.panelosVersion=i.CONFIG_PANELOS_VERSION,r}}],(n=null)&&r(t.prototype,n),s&&r(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=s},3177:(e,t,n)=>{function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(3124),c=n(4019),u=n(1225),l=n(3206),d=n(2714),f=n(8245),h=n(5212),E=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.Config=n,this.IOManager=r,this.onDetectVideoHarCallback=null,this.VideoTrafficValidator=new f(this.id,this.Config),this.VideoTrafficDetector=new d(this.id),this.VideoTrafficDetector.InjectXhrDetector(this.Config),this.IOManager.onGotVideoXHRTrafficCallback=this.ProcessVideoXHRTraffic.bind(this)}var t,n,i;return t=e,(n=[{key:"ActivateDetector",value:function(){this.CheckVideoTrafficInHTML(),this.CheckVideoTrafficInJS()}},{key:"PageRefreshed",value:function(e,t){u.IsYouTubeUrl(e)||(this.CheckVideoTrafficInHTML(),this.CheckVideoTrafficInJS())}},{key:"CheckVideoTrafficInHTML",value:function(){var e=new l(s.VIDEO_TRAFFIC_SOURCE_HTML,"GET",window.location.href,"text/html",document.documentElement.outerHTML),t=this.VideoTrafficValidator.Validate(e);t&&this.SendVideoTraffic(e,t)}},{key:"CheckVideoTrafficInJS",value:function(){for(var e=u.QuerySelectorAll(document,"script"),t=0;t<e.length;t++){var n=new l(s.VIDEO_TRAFFIC_SOURCE_JS,"GET",e[t].src,"text/javascript",e[t].innerHTML),r=this.VideoTrafficValidator.Validate(n);if(r){if("JSON_TIKTOK_FEED"===r.alias){this.filterDataForTiktokJS(n);var i=JSON.parse(n.GetContent());if(!i.itemList.length)return;h.SendCandidatePlacementsCount(this.id,i.itemList.length,s.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TIKTOK,null)}this.SendVideoTraffic(n,r)}}}},{key:"ProcessVideoXHRTraffic",value:function(e){if(l.IsXHRvalid(e)){var t=new l(s.VIDEO_TRAFFIC_SOURCE_XHR,e.requestMethod,e.url,e.type,e.content,e.encodedPostBody),n=this.VideoTrafficValidator.Validate(t);if(n){if("JSON_TIKTOK_FEED"===n.alias){this.filterDataForTiktokXHR(t);var r=JSON.parse(t.GetContent());if(!r.itemList.length)return;h.SendCandidatePlacementsCount(this.id,r.itemList.length,s.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TIKTOK,null)}this.SendVideoTraffic(t,n)}}}},{key:"filterDataForTiktokJS",value:function(e){var t=JSON.parse(e.GetContent());if(e.SetUrl("https://www.tiktok.com/api/recommend/item_list/?this=data&from=script&in&dom"),t.ItemModule&&"object"===o(t.ItemModule)){for(var n={itemList:[]},r=0,i=Object.keys(t.ItemModule);r<i.length;r++){var a=i[r],s=t.ItemModule[a];s.adLabelVersion&&2===parseInt(s.adLabelVersion)&&n.itemList.push(s)}e.SetContent(JSON.stringify(n))}}},{key:"filterDataForTiktokXHR",value:function(e){var t=JSON.parse(e.GetContent());if(t.itemList){var n={itemList:t.itemList.filter((function(e){if(e.adLabelVersion&&2===parseInt(e.adLabelVersion))return e}))};n.itemList.length||(n.itemList=[]),e.SetContent(JSON.stringify(n))}}},{key:"SendVideoTraffic",value:function(e,t){if(e&&t){var n,i={requestMethod:e.GetRequestMethod(),url:e.GetUrl(),contentType:e.GetType(),mediaType:t.name,alias:t.alias};if(e.IsEncodedPostBodyExist()&&"YT_MIDROLL_INFO"===t.alias&&(i.encodedPostBody=c.encode(e.GetEncodedPostBody())),t.reduceSizeFilter&&t.reduceSizeFilter.active){if(null!==(n=f.CreateRegExp(t.reduceSizeFilter.reducePattern).exec(e.GetContent()))&&n.length>0&&Math.max.apply(Math,r(t.reduceSizeFilter.regResIndexes))<n.length){var o=n.filter((function(e,n){return t.reduceSizeFilter.regResIndexes.includes(n)}));i.encodedText=c.encode(o.join(" "))}}else i.encodedText=c.encode(e.GetContent());h.SendVideoHar(this.id,i)}}}])&&a(t.prototype,n),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=E},3206:e=>{function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(n,r,i,o,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;t(this,e),this.trafficSource=n,this.requestMethod=r,this.url=i,this.type=o,this.content=a,this.setEncodedPostBody(s)}var r,i,o;return r=e,o=[{key:"IsXHRvalid",value:function(e){return e&&e.hasOwnProperty("requestMethod")&&e.hasOwnProperty("url")&&""!==e.url}}],(i=[{key:"setEncodedPostBody",value:function(e){e&&"string"==typeof e&&e.length>0&&(this.encodedPostBody=e)}},{key:"GetEncodedPostBody",value:function(){return this.encodedPostBody?this.encodedPostBody:null}},{key:"IsEncodedPostBodyExist",value:function(){return!!this.encodedPostBody}},{key:"GetTrafficSource",value:function(){return this.trafficSource}},{key:"GetRequestMethod",value:function(){return this.requestMethod}},{key:"GetUrl",value:function(){return this.url}},{key:"GetType",value:function(){return this.type}},{key:"GetContent",value:function(){return this.content}},{key:"SetContent",value:function(e){this.content=e}},{key:"SetUrl",value:function(e){this.url=e}}])&&n(r.prototype,i),o&&n(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.exports=r},2714:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(1225),o=n(3124),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t}var t,n,a;return t=e,(n=[{key:"InjectXhrDetector",value:function(e){if(document.head){var t=document.createElement("script");this.setAttributes(t,e),document.head.appendChild(t)}}},{key:"setAttributes",value:function(e,t){var n=i.getURL("../executers/".concat(o.VIDEO_TRAFFIC_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("data-bis-config",JSON.stringify(t.config.filterLists.blacklistIframeSrc)),e.src=n}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=a},8245:(e,t,n)=>{function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(3124),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.Config=n}var t,n,i;return t=e,i=[{key:"CreateRegExp",value:function(e){var t=e.replace(/.*\/([gimy]*)$/,"$1"),n=e.replace(new RegExp("^/(.*?)/"+t+"$"),"$1");return new RegExp(n,t)}}],(n=[{key:"Validate",value:function(e){var t=[],n=!1;if(e&&(e.GetTrafficSource()===a.VIDEO_TRAFFIC_SOURCE_HTML?(t=this.Config.GetVideoValidatorsForHTML(),n=!0):e.GetTrafficSource()===a.VIDEO_TRAFFIC_SOURCE_XHR?(t=this.Config.GetVideoValidatorsForXHR(),n=!0):e.GetTrafficSource()===a.VIDEO_TRAFFIC_SOURCE_JS&&(t=this.Config.GetVideoValidatorsForJS(),n=!0),n)){var i,o=r(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(this.ValidateUseConfiguration(e,s))return s}}catch(e){o.e(e)}finally{o.f()}}return!1}},{key:"ValidateUseConfiguration",value:function(t,n){for(var r=[],i=0,o=Object.keys(n);i<o.length;i++){var a=o[i];-1!==a.indexOf("Pattern")&&r.push(a)}for(var s=0,c={domainPattern:"GetUrl",mimePattern:"GetType",contentPattern:"GetContent"},u=0,l=r;u<l.length;u++){var d=l[u],f=e.CreateRegExp(n[d]),h=c[d];s+=f.test(t[h]())?1:0}return s===r.length}}])&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=s},1029:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(1225),o=n(3124),a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.options=n,this.AdBlockerAgent=r,this.active=!1,this.lastDetectTime=i.GetCurrentTimestampMs()-1e3,this.activateDetectorTime=i.GetCurrentTimestampMs(),this.detectorInterval=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0}var t,n,a;return t=e,(n=[{key:"ActualizeDetector",value:function(){}},{key:"ActivateMutationObserver",value:function(){}},{key:"DeactivateMutationObserver",value:function(){}},{key:"Detector",value:function(){}},{key:"HideAd",value:function(e,t,n){}},{key:"CheckIfAd",value:function(e){}},{key:"CheckIfAdRendered",value:function(e){}},{key:"ExtractAd",value:function(e){}},{key:"ActivateDetector",value:function(){var e=this;this.active||(this.activateDetectorTime=i.GetCurrentTimestampMs(),this.active=!0,this.options.firstDetectionAfterActivationTimeoutMs&&this.options.firstDetectionAfterActivationTimeoutMs>0&&setTimeout((function(){e.DetectCandidates(o.AD_DETECTOR_INITIATOR_ACTIVATION)}),this.options.firstDetectionAfterActivationTimeoutMs),this.options.secondDetectionAfterActivationTimeoutMs&&this.options.secondDetectionAfterActivationTimeoutMs>0&&setTimeout((function(){e.DetectCandidates(o.AD_DETECTOR_INITIATOR_ACTIVATION)}),this.options.secondDetectionAfterActivationTimeoutMs),this.detectorInterval=setInterval((function(){e.DetectCandidates(o.AD_DETECTOR_INITIATOR_TIMER)}),this.options.detectionIntervalMs),this.options.useObserver&&this.IsActualByKeyWordInUrl&&(this.observerNodesListenerInterval=setInterval((function(){e.observerNodesChecksAmount=e.observerNodesChecksAmount+1,(e.ActivateMutationObserver()||e.observerNodesChecksAmount>e.options.observerNodesChecksMaxAmount)&&(clearInterval(e.observerNodesListenerInterval),e.observerNodesListenerInterval=null,e.observerNodesChecksAmount=0)}),this.options.observerNodesCheckIntervalMs)))}},{key:"DeactivateDetector",value:function(e){e===o.AD_DETECTOR_INITIATOR_URL&&this.DeactivateMutationObserver(),this.detectorInterval&&(clearInterval(this.detectorInterval),this.detectorInterval=null),this.observerNodesListenerInterval&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0),this.active=!1}},{key:"DetectCandidates",value:function(e){var t=i.GetCurrentTimestampMs();this.IsActualByKeyWordInUrl&&this.ActualizeDetector()?t-this.lastDetectTime>this.options.minTimeAfterLastDetectionMs&&(this.lastDetectTime=t,this.Detector()):this.options.maxActualizeDetectorWaitTimeMs&&i.GetCurrentTimestampMs()-this.activateDetectorTime>this.options.maxActualizeDetectorWaitTimeMs&&this.DeactivateDetector()}},{key:"IsActualByKeyWordInUrl",get:function(){return!this.options.urlValidationByKeyWord||!this.options.urlValidationByKeyWord.length||window.location.href.includes(this.options.urlValidationByKeyWord)}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=a},9780:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=n(8962),f=n(1225),h=n(4019),E=n(3124),A=n(9543),T=n(5212),y=n(3153),_=n(8945),v=n(555),g=n(9317),S=n(2757),p=n(7207),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=o.call(this,e)).available=!1,r.onPageRefreshed=r.onPageUrlChanged,r.fbConfig=t.FacebookConfig,r.AdBlockerAgent=n,r}return t=u,(n=[{key:"onPageUrlChanged",value:function(e,t){var n=this;this.available&&setTimeout((function(){n.DeactivateDetectors(E.AD_DETECTOR_INITIATOR_URL),n.ActivateDetectors()}),50)}},{key:"ActivateDetector",value:function(e){e===E.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.fbContent=document.querySelector(this.fbConfig.FB_CONTENT),this.fbContent&&(this.VideoTrafficDetector=new p(this.id),this.VideoTrafficDetector.InjectDetector(this.id+"_w",JSON.stringify(this.fbConfig.videoDetectorConfigNew)),this.DetectorRightColumn=new g(this.id,this.fbConfig.optionsForDetectorRightColumn,this.AdBlockerAgent,this.fbConfig),this.DetectorRightColumn.HideAd=this.HideAd.bind(this),this.DetectorRightColumn.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorRightColumn.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorFeed=new _(this.id,this.fbConfig.optionsForDetectorFeed,this.AdBlockerAgent,this.fbConfig),this.DetectorFeed.HideAd=this.HideAd.bind(this),this.DetectorFeed.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorFeed.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorWatch=new v(this.id,this.fbConfig.optionsForDetectorWatch,this.AdBlockerAgent,this.fbConfig),this.DetectorWatch.HideAd=this.HideAd.bind(this),this.DetectorWatch.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorWatch.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorMarketplace=new S(this.id,this.fbConfig.optionsForDetectorMarketplace,this.AdBlockerAgent,this.fbConfig),this.DetectorMarketplace.HideAd=this.HideAd.bind(this),this.DetectorMarketplace.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorMarketplace.ExtractAd=this.ProcessFbCreative.bind(this),this.ActivateDetectors())}},{key:"ActivateDetectors",value:function(){this.DetectorRightColumn.ActivateDetector(),this.DetectorFeed.ActivateDetector(),this.DetectorWatch.ActivateDetector(),this.DetectorMarketplace.ActivateDetector()}},{key:"DeactivateDetectors",value:function(e){this.DetectorRightColumn.DeactivateDetector(e),this.DetectorFeed.DeactivateDetector(e),this.DetectorWatch.DeactivateDetector(e),this.DetectorMarketplace.DeactivateDetector(e)}},{key:"ProcessFbCreative",value:function(e,t,n){try{var r=!1;if(e){var i=document.querySelector("[".concat(E.ATTRIBUTE_BIS_ID,"=").concat(e,"]"));if(i)if(this.IsAdContentRendered(i,y.GetMinImgsSpacePercentag(this.fbConfig,n))){r=this.IsVideoCreative(i),T.SendCandidatePlacementsCount(this.id,1,E.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_FACEBOOK,null);var o={x:0,y:0};if(y.IsPostHidden(i)){i.setAttribute(E.ATTRIBUTE_BIS_SIZE,f.ToJSON(y.GetPostContainerSize(i)));var a=i.getAttribute(E.ATTRIBUTE_BIS_HIDE_LEFT_OFFSET);a&&(o.x=parseInt(a))}else f.SetFullSizeToElement(i);for(var s=i.querySelectorAll("*"),c=0;c<s.length;c++)f.SetFullSizeToElement(s[c],null,o);var u=[];u.push(this.BuildCreative(i,r,t,n)),this.fbConfig.ABOUT_SECTION_CONFIG&&this.fbConfig.ABOUT_SECTION_CONFIG.LOAD_ABOUT_PAGE?this.LoadAboutPageAndSendCandidates(u):this.SendFacebookCandidates(u),d.CONFIG_MARK_AD_CANDIDATES&&d.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&(this.IsVideoCreative(i)?i.style.cssText+=E.STYLES_OUTLINE_VIDEO_AD:i.style.cssText+=E.STYLES_OUTLINE_SUCCESS_DETECT)}else i.removeAttribute&&i.removeAttribute(E.ATTRIBUTE_BIS_ID)}}catch(e){}}},{key:"BuildCreative",value:function(e,t,n,r){var o,a=y.GetPostContainerSize(e),s=Array.from(document.querySelectorAll("link")),c=Array.from(document.querySelector("head").querySelectorAll("style[nonce]")),u='<html><head><meta charset="utf-8">',l=i(s.concat(c));try{for(l.s();!(o=l.n()).done;)u+=o.value.outerHTML}catch(e){l.e(e)}finally{l.f()}u+="</head><body style='position:absolute; top:0px; left:0px; width:".concat(a.w,"px; height:").concat(a.h,"px;'>").concat(e.outerHTML,"</body></html>"),this.AdBlockerAgent.IsEnabledForFacebook()&&n&&n.length&&u.includes(n)&&(u=u.replace(n,""));var d="",f=!1;this.fbConfig.ABOUT_SECTION_CONFIG&&this.fbConfig.ABOUT_SECTION_CONFIG.LOAD_ABOUT_PAGE&&(f=!0),this.fbConfig&&f&&(this.DetectorFeed&&r===E.FACEBOOK_AD_PLACEMENT_TYPE_FEED?d=this.DetectorFeed.GetAboutPageLink(e):this.DetectorMarketplace&&r===E.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE?d=this.DetectorMarketplace.GetAboutPageLink(e):this.DetectorWatch&&r===E.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH&&(d=this.DetectorWatch.GetAboutPageLink(e)));var A={content:h.encode(u),adPlacementType:r,designVersion:E.FACEBOOK_DESIGN_VERSION_NEW,aboutPageLink:d,aboutSectionContent:"",size:a};return t&&(A.videoData={videoId:"",videoUrl:"",audioUrl:""}),e.setAttribute(E.ATTRIBUTE_BIS_STATUS,"extracted"),A}},{key:"HideAd",value:function(e,t,n){var r="";return e&&t&&e&&e.style&&(r="position: absolute !important; width: ".concat(t.w,"px; overflow: hidden; height: 0px;"),y.IsPostHidden(e)||(e.style.cssText+=r,e.setAttribute(E.ATTRIBUTE_BIS_HIDE_HEIGHT,t.h),e.setAttribute(E.ATTRIBUTE_BIS_HIDE_WIDTH,t.w),e.setAttribute(E.ATTRIBUTE_BIS_HIDE_STATUS,"hidden"))),e.style.cssText}},{key:"IsAdContentRendered",value:function(e,t){var n=y.GetPostContainerSize(e);if(f.GetImagesSpacePercentage(this.fbConfig.TAGS_FOR_LOADING_CHECK,e,n)>=t)return!0;var r=e.querySelector("a[".concat(E.ATTRIBUTE_BIS_LABEL,"]"));return r&&r.removeAttribute(E.ATTRIBUTE_BIS_LABEL),!1}},{key:"IsVideoCreative",value:function(e){return 0!==e.querySelectorAll("video").length}},{key:"AddNeededStylesForElement",value:function(e,t){try{if(t.w<=3&&t.h<=3&&("SPAN"===e.nodeName||"DIV"===e.nodeName)){var n=e.getAttribute("class");if(n&&n.includes("accessible_elem")){var r=getComputedStyle(e);e.setAttribute(E.ATTRIBUTE_BIS_STYLE,"clip:".concat(r.getPropertyValue("clip"),"; height:").concat(r.getPropertyValue("height"),"; overflow:").concat(r.getPropertyValue("overflow"),"; position:").concat(r.getPropertyValue("position"),"; white-space:").concat(r.getPropertyValue("white-space"),"; width:").concat(r.getPropertyValue("width"),";"))}}}catch(e){}}},{key:"LoadAboutPageAndSendCandidates",value:function(e){var t=this;if(e&&e.length){var n=e[0].aboutPageLink;n&&n.length?fetch(n,{headers:this.fbConfig.ABOUT_SECTION_CONFIG.HEADERS,method:"GET"}).then((function(n){try{if(200===n.status)return n.text();t.SendFacebookCandidates(e)}catch(e){}})).then((function(n){var r="",i=n.split(/\r?\n/);if(i.length)for(var o=0;o<i.length&&!r.length;o++)new RegExp(t.fbConfig.ABOUT_SECTION_CONFIG.CONTENT_CHECK_STRING).test(i[o])&&(r=i[o]);e[0].aboutSectionContent=h.encode(r),t.SendFacebookCandidates(e)})).catch((function(n){t.SendFacebookCandidates(e)})):this.SendFacebookCandidates(e)}}},{key:"SendFacebookCandidates",value:function(e){T.SendAdCandidates(this.id,e,E.MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK,null),this.AdBlockerAgent.IsEnabledForFacebook()&&this.AdBlockerAgent.SetHiddenAmount(e.length)}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(A);e.exports=m},3153:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(3124),o=n(1225),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"GetVisibleText",value:function(t){var n=t.querySelectorAll(":scope > *");if(0!==n.length)return Array.prototype.slice.call(n).map(e.GetVisibleText).flat();if("none"!==getComputedStyle(t).display){var r=t.innerText;try{if(0===r.length&&t.getAttribute){var i=t.getAttribute("data-content");i&&i.length&&(r=i)}}catch(t){}return r}return""}},{key:"GetVisibleSpansText",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=3;if(e.hasAttribute&&e.hasAttribute("bis_sponsor_checked")&&e.getAttribute("bis_sponsor_checked")==r)return"";var i=e.querySelectorAll(t),o="",a=parseInt(e.getAttribute("bis_sponsor_checked"))||0;return i.forEach((function(e){var t=getComputedStyle(e);if("none"!==t.display&&"absolute"!==t.position)try{var n=Array.from(e.childNodes).filter((function(e){return 3===e.nodeType})).map((function(e){return e.nodeValue.trim()})).reduce((function(e,t){return e+t}),"");if(0===n.length&&e.getAttribute){var r=e.getAttribute("data-content");r&&r.length&&(n=r)}o+=n}catch(e){}})),e.setAttribute("bis_sponsor_checked",parseInt(a)+1),o&&n.length&&!n.includes(o)&&(o=this.checkLettersOfAlly(o,n)),o}},{key:"checkLettersOfAlly",value:function(e,t){for(var n=e.split(""),r=n.length-1,i=t.length,o=1,a=!1,s=0,c="";!a&&o<=i;){var u=t[o-1],l=n[s];-1!==u.indexOf(l)&&u.length===n.length?r!==s?s+=1:r===s&&e.length===u.length?(a=!0,c=u):(o+=1,s=0):(o+=1,s=0)}return c}},{key:"HideSateliteSponsoredString",value:function(e,t){try{t&&t.forEach((function(t){if(t.innerText){var n=t.innerText;e.SPONSORED_TEXTS.some((function(e){return-1!==n.indexOf(e)}))&&(t.style="display:none")}}))}catch(e){}}},{key:"GetMinImgsSpacePercentag",value:function(e,t){return t===i.FACEBOOK_AD_PLACEMENT_TYPE_FEED?e.FEED_PAGE.MIN_IMGS_SPACE_PERCENTAGE:t===i.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE?e.MARKETPLACE_ADS_CONFIG.MIN_IMGS_SPACE_PERCENTAGE:t===i.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN?e.RIGHT_COLUMN_ADS_CONFIG.MIN_IMGS_SPACE_PERCENTAGE:t===i.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH?e.FEED_WATCH_PAGE.MIN_IMGS_SPACE_PERCENTAGE:0}},{key:"IsInitiallyRendered",value:function(t,n){return!!e.IsPostHidden(t)||n.w>0&&n.h>10}},{key:"IsPostHidden",value:function(e){return"hidden"===e.getAttribute(i.ATTRIBUTE_BIS_HIDE_STATUS)}},{key:"GetPostContainerSize",value:function(t){var n=o.GetFullElementSize(t);if(e.IsPostHidden(t)){var r=t.getAttribute(i.ATTRIBUTE_BIS_HIDE_HEIGHT);r&&(n.h=parseInt(r));var a=t.getAttribute(i.ATTRIBUTE_BIS_HIDE_WIDTH);a&&(n.w=parseInt(a));var s=t.getAttribute(i.ATTRIBUTE_BIS_HIDE_LEFT_OFFSET);s&&(n.x=n.x+parseInt(s),n.abs_x=n.abs_x+parseInt(s))}return n}}],(n=null)&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=a},8945:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=n(1029),f=n(3153),h=n(1225),E=n(3124),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(i=o.call(this,e,t,n)).fbConfig=r,i.fbFeed=null,i.fbFeedObserver=null,i}return t=u,(n=[{key:"ActualizeDetector",value:function(){if(!this.isValidUrl)return!1;var e=!1;return this.FeedContainer&&this.isValidUrl&&(e=!0),e}},{key:"ActivateMutationObserver",value:function(){var e=this;if(this.isValidUrl)return this.fbFeed=this.FeedContainer,this.fbFeed&&(this.fbFeedObserver||(this.fbFeedObserver=new MutationObserver(this.DetectCandidates.bind(this,E.AD_DETECTOR_INITIATOR_MUTATION)),this.fbFeedObserver.observe(this.fbFeed,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.fbFeedObserver&&(e.fbFeedObserver.disconnect(),e.fbFeedObserver=null)})))),this.fbFeedObserver}},{key:"FeedContainer",get:function(){for(var e=this.fbConfig.FEED_PAGE.MIN_HEIGHT,t=this.fbConfig.FEED_PAGE.FEED_QUERIES,n=t.length,r=!1,i=null,o=0;o<n&&!r;o++){var a=t[o],s=document.querySelector(a);if(s){var c=s.offsetHeight;if(s.children.length>2&&c>e)i=s,r=!0;else if(s.nodeName.search(/span/i)>-1){var u=s.nextElementSibling;if(u&&u.children){var l=u.offsetHeight;1===u.children.length&&u.querySelector("h3")?(i=u.querySelector("h3").parentElement,r=!0):2===u.children.length?(s=u.querySelector("div:not([class])"))&&s.offsetHeight>e&&(i=s,r=!0):u.children.length>1&&l>e&&(i=u,r=!0)}}}}return i}},{key:"DeactivateMutationObserver",value:function(){this.fbFeedObserver&&(this.fbFeedObserver.disconnect(),this.fbFeedObserver=null)}},{key:"Detector",value:function(){if(this.isValidUrl){var e=this.FeedContainer;if(e){var t=Array.from(e.children);if(t.length&&1!==t.length||(t=document.querySelectorAll(this.fbConfig.FEED_PAGE.POSTS_QUERY)),!t)return;for(var n=0;n<t.length;n++){var r=t[n],i=h.GetElementSize(r);if(!r.hasAttribute(E.ATTRIBUTE_BIS_ID)&&f.IsInitiallyRendered(r,i)&&this.CheckIfAdRendered(r,f.GetMinImgsSpacePercentag(this.fbConfig,E.FACEBOOK_AD_PLACEMENT_TYPE_FEED))&&this.CheckIfAd(r)){if(this.AdBlockerAgent.IsEnabledForFacebook())var o=this.HideAd(t[n],i,E.FACEBOOK_AD_PLACEMENT_TYPE_FEED);this.addCoverImageSrcAttribute(r);var a=h.GenerateAndSetBisIdToFBAds(r),s=this.options.extractAdStaticPartTimeoutMs+h.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.AddHiddenTextTags(r),setTimeout(this.ReadyToExtractAd.bind(this,a,o),s)}}}}}},{key:"ReadyToExtractAd",value:function(e,t){try{if(e){var n=document.querySelector("[".concat(E.ATTRIBUTE_BIS_ID,"=").concat(e,"]")),r=n.querySelector("[".concat(E.ATTRIBUTE_BIS_LABEL,'="fb_feed_ad"]'));n&&r?this.ExtractAd(e,t,E.FACEBOOK_AD_PLACEMENT_TYPE_FEED):null!==r&&(r.removeAttribute(E.ATTRIBUTE_BIS_ID),n.removeAttribute(E.ATTRIBUTE_BIS_ID))}}catch(e){}}},{key:"CheckIfAd",value:function(e){for(var t=this.fbConfig.POSSIBLE_SPONSORED_TEXT_QUERIES,n=!1,r=0;r<t.length&&!n;r++){var i=t[r],o=e.querySelectorAll(i);if((n=this.GetTextFromXlink(o))||(n=this.GetTextIfUseCanvas(o)),n||(n=this.GetTextCustom(o)),n)break}return!!n}},{key:"GetTextCustom",value:function(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n],i=r.innerText,o=r.getAttribute(this.options.attributeWithSponsorAlly),a=o?[i,o]:i;if("string"==typeof i&&i.length&&this.isTagSponsored(a))r.setAttribute(E.ATTRIBUTE_BIS_LABEL,"fb_feed_ad"),t=!0;else if(i&&i.length>=2&&!r.hasAttribute(E.ATTRIBUTE_BIS_LABEL)){var s=f.GetVisibleSpansText(r,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);s!==i&&s!==o&&"string"==typeof s&&s.length&&this.isTagSponsored(s)&&(r.setAttribute(E.ATTRIBUTE_BIS_LABEL,"fb_feed_ad"),t=!0)}}}},{key:"GetTextFromXlink",value:function(e){var t,n=this,r="",o=i(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.hasAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG)){var s=a.parentElement,c="";if(s&&!s.hasAttribute("bis_proccessed")&&!s.hasAttribute(E.ATTRIBUTE_BIS_LABEL)){var u=Array.from(s.children);if(u&&u.forEach((function(e){var t=e.getAttribute(n.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG),r=document.querySelector(t);r&&("text"===r.nodeName.toLowerCase()?c+=r.textContent:"svg"===r.nodeName.toLowerCase()&&(c=n.GetTextFromXlink([r.firstElementChild])))})),s.setAttribute("bis_proccessed",""),this.isTagSponsored(c))return r=c,s.setAttribute(E.ATTRIBUTE_BIS_LABEL,"fb_feed_ad"),s.removeAttribute("bis_proccessed"),r;r=""}}}}catch(e){o.e(e)}finally{o.f()}return r}},{key:"GetTextIfUseCanvas",value:function(e){var t,n="",r=i(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if("canvas"===o.nodeName.toLowerCase()&&!o.hasAttribute(E.ATTRIBUTE_BIS_LABEL)){var a=this.CheckAndGetFieldName(o);if("string"==typeof a&&this.isTagSponsored(a)){n=a,o.setAttribute(E.ATTRIBUTE_BIS_LABEL,"fb_feed_ad");break}}}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"CheckAndGetFieldName",value:function(e){if(e.hasAttribute("bis-text"))return e.getAttribute("bis-text");window.postMessage({attribute:"bis-text"},window.location.origin)}},{key:"AddHiddenTextTags",value:function(e){var t=e.querySelectorAll("svg>use");if(t)for(var n=0;n<t.length;n++){var r=t[n],i=r.parentElement,o=r.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG),a=document.querySelector(o).cloneNode(!0);a.style.display="none",a.id=a.id+"_bis",i&&i.appendChild(a)}}},{key:"isTagSponsored",value:function(e){var t=this,n=!1;if(!e)return n;if("string"==typeof e)n=this.fbConfig.SPONSORED_TEXTS.some((function(t){return e===t}));else{var r,o=i(e);try{var a=function(){var e=r.value;if(n=t.fbConfig.SPONSORED_TEXTS.some((function(t){return e===t})))return"break"};for(o.s();!(r=o.n()).done&&"break"!==a(););}catch(e){o.e(e)}finally{o.f()}}return n}},{key:"GetAboutPageLink",value:function(e){var t="",n=this.fbConfig.ABOUT_SECTION_CONFIG,r=e.querySelector("*[".concat(E.ATTRIBUTE_BIS_LABEL,"='fb_feed_ad']")),i=e.querySelectorAll(n.QUERY_ABOUT_PAGE_HREF);if(r&&i&&i.length){for(var o="",a=r.getBoundingClientRect().top,s=a-e.getBoundingClientRect().top,c=function(e){if(n.ABOUT_PAGE_BAD_WORDS_MATCHES.some((function(t){return i[e].href.indexOf(t)>-1})))return"continue";var t=i[e].getBoundingClientRect();i[e].href&&t.top<=a&&a-t.top<s&&(s=a-t.top,o=i[e].href)},u=0;u<i.length;u++)c(u);if(o.length){var l=o.substring(n.HREF_PREFIX.length,o.length),d=l.substring(0,l.search(/(\/|\?)/));if("profile.php"===d&&l.includes("id=")){var f=new RegExp(n.QUERY_GET_USER_ID_FROM_HREF);(d=l.match(f))&&d.length&&d[1]&&(d=d[1])}t=n.ABOUT_PAGE_TEMPLATE.replace("%1",d)}}return t}},{key:"isValidUrl",get:function(){return!this.fbConfig.FEED_PAGE.INVALID_URL_PATHS.some((function(e){return window.location.href.includes(e)}))}},{key:"addCoverImageSrcAttribute",value:function(e){var t=e.querySelector(this.fbConfig.FEED_PAGE.COVER_IMAGE_QUERY);if(t&&t.hasAttribute("src")){var n=t.getAttribute("src");e.setAttribute("data-cover-image-src",n)}}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(d);e.exports=A},2757:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=n(1029),f=n(1225),h=n(3153),E=n(3124),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(i=o.call(this,e,t,n)).fbConfig=r,i.fbMarketplace=null,i.fbMarketplaceObserver=null,i}return t=u,(n=[{key:"ActualizeDetector",value:function(){var e=!1;return this.MainContainer&&(e=!0),e}},{key:"MainContainer",get:function(){return document.querySelector(this.fbConfig.MARKETPLACE_ADS_CONFIG.CONTAINER)}},{key:"ActivateMutationObserver",value:function(){var e=this;return this.fbMarketplace=this.MainContainer,this.fbMarketplace&&(this.fbMarketplaceObserver||(this.fbMarketplaceObserver=new MutationObserver(this.DetectCandidates.bind(this,E.AD_DETECTOR_INITIATOR_MUTATION)),this.fbMarketplaceObserver.observe(this.fbMarketplace,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.fbMarketplaceObserver&&(e.fbMarketplaceObserver.disconnect(),e.fbMarketplaceObserver=null)})))),this.fbMarketplaceObserver}},{key:"DeactivateMutationObserver",value:function(){this.fbMarketplaceObserver&&(this.fbMarketplaceObserver.disconnect(),this.fbMarketplaceObserver=null)}},{key:"Detector",value:function(){var e=this.MainContainer.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.CARDS);if(e&&e.length)for(var t=0;t<e.length;t++){var n=e[t],r=f.GetElementSize(n);if(this.addCoverImageSrcAttribute(n),!n.hasAttribute(E.ATTRIBUTE_BIS_ID)&&h.IsInitiallyRendered(n,r)&&(this.addCoverImageSrcAttribute(n),this.CheckIfAd(n))){if(this.AdBlockerAgent.IsEnabledForFacebook()){h.HideSateliteSponsoredString(this.fbConfig,document.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.SATELITE_SPONSORED_STRING));var i=this.HideAd(n,r,E.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE)}if(this.CheckIfAdRendered(n,h.GetMinImgsSpacePercentag(this.fbConfig,E.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE))){var o=f.GenerateAndSetBisIdToFBAds(n),a=this.options.extractAdStaticPartTimeoutMs+f.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.addCoverImageSrcAttribute(n),setTimeout(this.ExtractAd.bind(this,o,i,E.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE),a)}}}}},{key:"addCoverImageSrcAttribute",value:function(e){var t=e.querySelector(this.fbConfig.MARKETPLACE_ADS_CONFIG.COVER_IMAGE_QUERY);if(t&&t.hasAttribute("src")&&!e.hasAttribute("data-cover-image-src")){var n=t.getAttribute("src");e.setAttribute("data-cover-image-src",n)}}},{key:"ReadyToExtractAd",value:function(e,t){try{if(e){var n=document.querySelector("[".concat(E.ATTRIBUTE_BIS_ID,"=").concat(e,"]"));n&&(h.IsPostHidden(n)&&n.setAttribute(E.ATTRIBUTE_BIS_LABEL,"style"),this.ExtractAd(e,t,E.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE))}}catch(e){}}},{key:"CheckIfAd",value:function(e){var t=this,n=!1;if(e&&this.MainContainer){var r=e.getBoundingClientRect(),o=Array.from(this.MainContainer.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.SPONSOR_BLOCKS));if(o&&o.length){var a,s=i(o);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(c.getBoundingClientRect().x===r.x){if("break"===function(){var r=h.GetVisibleSpansText(c,t.fbConfig.VISIBLE_SPANS_TEXT,t.fbConfig.SPONSORED_TEXTS);if(t.fbConfig.SPONSORED_TEXTS.some((function(e){return-1!==r.indexOf(e)})))return e.setAttribute(E.ATTRIBUTE_BIS_LABEL,"fb_marketplace_ad"),n=!0,"break"}())break}else if(this.fbConfig.MARKETPLACE_ADS_CONFIG.PREV_SIBLING_SPONSOR_BLOCK_QUERY_PATH){var u,l=e,d=i(this.fbConfig.MARKETPLACE_ADS_CONFIG.PREV_SIBLING_SPONSOR_BLOCK_QUERY_PATH);try{for(d.s();!(u=d.n()).done;){var f=u.value;if(l[f])l=l[f];else if(f.includes(",")){var A=f.split(",");l=l[A[0]](A[1])}}}catch(e){d.e(e)}finally{d.f()}if(l&&"break"===function(){var r=h.GetVisibleSpansText(l,t.fbConfig.VISIBLE_SPANS_TEXT,t.fbConfig.SPONSORED_TEXTS);if(t.fbConfig.SPONSORED_TEXTS.some((function(e){return-1!==r.indexOf(e)})))return e.setAttribute(E.ATTRIBUTE_BIS_LABEL,"fb_marketplace_ad"),n=!0,"break"}())break}}}catch(e){s.e(e)}finally{s.f()}}}return n}},{key:"GetAboutPageLink",value:function(e){var t="",n=this.fbConfig.ABOUT_SECTION_CONFIG,r=e.querySelector("*[".concat(E.ATTRIBUTE_BIS_LABEL,"='fb_marketplace_ad']")),i=e.querySelectorAll("a[href^='".concat(n.HREF_PREFIX,"'"));if(r&&i&&i.length){for(var o="",a=r.getBoundingClientRect().top,s=a-e.getBoundingClientRect().top,c=0;c<i.length;c++){var u=i[c].getBoundingClientRect();i[c].href&&u.top<a&&a-u.top<s&&(s=a-u.top,o=i[c].href)}if(o.length){var l=o.substring(n.HREF_PREFIX.length,o.length),d=l.substring(0,l.search(/(\/|\?)/));if("profile.php"===d&&l.includes("id=")){var f=new RegExp(n.QUERY_GET_USER_ID_FROM_HREF);(d=l.match(f))&&d.length&&d[1]&&(d=d[1])}t=n.ABOUT_PAGE_TEMPLATE.replace("%1",d)}}return t}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(d);e.exports=A},9317:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var u=n(1029),l=n(1225),d=n(3153),f=n(3124),h=n(8962),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(c,e);var t,n,r,s=a(c);function c(e,t,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=s.call(this,e,t,n)).fbConfig=r,o.designVersion=i,o.fbRightColumn=null,o.fbRightColumnObserver=null,o}return t=c,(n=[{key:"ActualizeDetector",value:function(){var e=!1;return document.querySelector(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.CONTAINER)&&(e=!0),e}},{key:"ActivateMutationObserver",value:function(){var e=this;return this.fbRightColumn=document.querySelector(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.CONTAINER),this.fbRightColumn&&(this.fbRightColumnObserver||(this.fbRightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,f.AD_DETECTOR_INITIATOR_MUTATION)),this.fbRightColumnObserver.observe(this.fbRightColumn,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.fbRightColumnObserver&&(e.fbRightColumnObserver.disconnect(),e.fbRightColumnObserver=null)})))),this.fbRightColumnObserver}},{key:"DeactivateMutationObserver",value:function(){this.fbRightColumnObserver&&(this.fbRightColumnObserver.disconnect(),this.fbRightColumnObserver=null)}},{key:"Detector",value:function(){var e=document.querySelectorAll(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.CARDS);if(e&&e.length)for(var t=0;t<e.length;t++){var n=l.GetElementSize(e[t]);if(d.IsInitiallyRendered(e[t],n))if(e[t].hasAttribute(f.ATTRIBUTE_BIS_ID))this.CheckIfAdRotated(e[t])&&e[t].removeAttribute&&(e[t].removeAttribute(f.ATTRIBUTE_BIS_ID),e[t].removeAttribute(f.ATTRIBUTE_BIS_SIZE),e[t].removeAttribute(f.ATTRIBUTE_BIS_STATUS),h.CONFIG_MARK_AD_CANDIDATES&&h.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&"border: 6px solid green !important;"===e[t].style.cssText&&(e[t].style.cssText=""));else if(this.CheckIfAd(e[t])){if(this.AdBlockerAgent.IsEnabledForFacebook()){d.HideSateliteSponsoredString(this.fbConfig,document.querySelectorAll(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.SATELITE_SPONSORED_STRING));var r=this.HideAd(e[t],n,f.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN)}if(this.CheckIfAdRendered(e[t],d.GetMinImgsSpacePercentag(this.fbConfig,f.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN,this.designVersion))){var i=l.GenerateAndSetBisIdToFBAds(e[t]),o=this.options.extractAdStaticPartTimeoutMs+l.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);setTimeout(this.ExtractAd.bind(this,i,r,f.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN),o)}}}}},{key:"CheckIfAd",value:function(e){var t=this,n=!1,r=Array.from(e.querySelectorAll(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.IF_AD)).filter((function(e){var n=e.href,r=t.fbConfig.RIGHT_COLUMN_ADS_CONFIG.IMPOSSIBLE_HREF_REG_FOR_AD;if(-1===n.indexOf(r))return!0}));return e&&r.length&&(n=!0),n}},{key:"CheckIfAdRotated",value:function(e){var t=!1;if(e&&"extracted"===e.getAttribute(f.ATTRIBUTE_BIS_STATUS)){var n=0,r=0,i=e.querySelectorAll("*");i&&i.length&&(i.forEach((function(e){e.getAttribute(f.ATTRIBUTE_BIS_SIZE)?n+=1:r+=1})),(0===n&&r>0||n>0&&r>0&&(r/i.length*100|0)>50)&&(t=!0))}return t}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(u);e.exports=E},7207:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(3124),o=n(1225),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t}var t,n,a;return t=e,(n=[{key:"InjectDetector",value:function(){if(document.head){var e=document.createElement("script");this.setAttributes(e),document.head.appendChild(e)}}},{key:"setAttributes",value:function(e){var t=o.getURL("../executers/".concat(i.FACEBOOK_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("nonce",""),e.src=t}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=a},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=n(1029),f=n(3153),h=n(1225),E=n(3124),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(i=o.call(this,e,t,n)).fbConfig=r,i.fbWatch=null,i.fbWatchObserver=null,i}return t=u,(n=[{key:"ActualizeDetector",value:function(){var e=!1;return this.FeedWatchContainer&&(e=!0),e}},{key:"ActivateMutationObserver",value:function(){var e=this;return this.fbWatch=this.FeedWatchContainer,this.fbWatch&&(this.fbWatchObserver||(this.fbWatchObserver=new MutationObserver(this.DetectCandidates.bind(this,E.AD_DETECTOR_INITIATOR_MUTATION)),this.fbWatchObserver.observe(this.fbWatch,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.fbWatchObserver&&(e.fbWatchObserver.disconnect(),e.fbWatchObserver=null)})))),this.fbWatchObserver}},{key:"FeedWatchContainer",get:function(){for(var e=this.fbConfig.FEED_WATCH_PAGE.FEED_WATCH_QUERIES,t=e.length,n=!1,r=null,i=0;i<t&&!n;i++){var o=e[i],a=document.querySelector(o);a&&a.children.length>2&&(r=a,n=!0)}return r}},{key:"DeactivateMutationObserver",value:function(){this.fbWatchObserver&&(this.fbWatchObserver.disconnect(),this.fbWatchObserver=null)}},{key:"Detector",value:function(){var e=this.FeedWatchContainer;if(e)for(var t=Array.from(e.children),n=0;n<t.length;n++){var r=t[n],i=h.GetElementSize(r);if(!r.hasAttribute(E.ATTRIBUTE_BIS_ID)&&f.IsInitiallyRendered(r,i)&&this.CheckIfAd(r)){if(this.AdBlockerAgent.IsEnabledForFacebook())var o=this.HideAd(r,i,E.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH);if(this.CheckIfAdRendered(r,f.GetMinImgsSpacePercentag(this.fbConfig,E.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH))){var a=h.GenerateAndSetBisIdToFBAds(r),s=this.options.extractAdStaticPartTimeoutMs+h.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.AddHiddenTextTags(r),setTimeout(this.ReadyToExtractAd.bind(this,a,o),s)}}}}},{key:"ReadyToExtractAd",value:function(e,t){try{if(e){var n=document.querySelector("[".concat(E.ATTRIBUTE_BIS_ID,"=").concat(e,"]")),r=n.querySelector("[".concat(E.ATTRIBUTE_BIS_LABEL,'="fb_watch_ad"]'));n&&r?this.ExtractAd(e,t,E.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH):(r.removeAttribute(E.ATTRIBUTE_BIS_ID),n.removeAttribute(E.ATTRIBUTE_BIS_ID))}}catch(e){}}},{key:"CheckIfAd",value:function(e){for(var t=this.fbConfig.POSSIBLE_SPONSORED_TEXT_QUERIES,n=!1,r=0;r<t.length&&!n;r++){for(var i=t[r],o=e.querySelectorAll(i),a=0;a<o.length&&!n;a++){var s=o[a],c=s.innerText,u=s.getAttribute(this.options.attributeWithSponsorAlly),l=u?[c,u]:c;if("string"==typeof c&&c.length&&this.isTagSponsored(l))s.setAttribute(E.ATTRIBUTE_BIS_LABEL,"fb_watch_ad"),n=!0;else if(c&&c.length>=2&&!s.hasAttribute(E.ATTRIBUTE_BIS_LABEL)){var d=f.GetVisibleSpansText(s,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);d!==c&&d!==u&&"string"==typeof d&&d.length&&this.isTagSponsored(d)&&(s.setAttribute(E.ATTRIBUTE_BIS_LABEL,"fb_watch_ad"),n=!0)}}n||(n=this.GetTextFromXlink(o))}return!!n}},{key:"GetTextFromXlink",value:function(e){var t,n=this,r="",o=i(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.hasAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG)){var s=a.parentElement,c="";if(s&&!s.hasAttribute("bis_proccessed")&&!s.hasAttribute("fb_watch_ad")){var u=Array.from(s.children);if(u&&u.forEach((function(e){var t=e.getAttribute(n.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG),r=document.querySelector(t);r&&("text"===r.nodeName.toLowerCase()?c+=r.textContent:"svg"===r.nodeName.toLowerCase()&&(c=n.GetTextFromXlink([r.firstElementChild])))})),s.setAttribute("bis_proccessed",""),this.isTagSponsored(c))return r=c,s.setAttribute(E.ATTRIBUTE_BIS_LABEL,"fb_watch_ad"),s.removeAttribute("bis_proccessed"),r;r=""}}}}catch(e){o.e(e)}finally{o.f()}return r}},{key:"AddHiddenTextTags",value:function(e){var t=e.querySelectorAll("svg>use");if(t)for(var n=0;n<t.length;n++){var r=t[n],i=r.parentElement,o=r.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG),a=document.querySelector(o).cloneNode(!0);a.style.display="none",i&&i.appendChild(a)}}},{key:"isTagSponsored",value:function(e){var t=this,n=!1;if(!e)return n;if("string"==typeof e)n=this.fbConfig.SPONSORED_TEXTS.some((function(t){return e===t}));else{var r,o=i(e);try{var a=function(){var e=r.value;if(n=t.fbConfig.SPONSORED_TEXTS.some((function(t){return e===t})))return"break"};for(o.s();!(r=o.n()).done&&"break"!==a(););}catch(e){o.e(e)}finally{o.f()}}return n}},{key:"GetAboutPageLink",value:function(e){var t="",n=this.fbConfig.ABOUT_SECTION_CONFIG,r=e.querySelector("*[".concat(E.ATTRIBUTE_BIS_LABEL,"='fb_watch_ad'")),i=e.querySelectorAll(n.HREF_PREFIX_WATCH);if(r&&i&&i.length){for(var o="",a=r.getBoundingClientRect().top,s=a-e.getBoundingClientRect().top,c=0;c<i.length;c++){var u=i[c].getBoundingClientRect();i[c].href&&u.top<a&&a-u.top<s&&(s=a-u.top,o=i[c].href)}if(o.length){var l=o.substring(n.HREF_TEMPLATE_WATCH.length,o.length),d=l.substring(0,l.search(/(\/|\?)/));if("profile.php"===d&&l.includes("id=")){var f=new RegExp(n.QUERY_GET_USER_ID_FROM_HREF);(d=l.match(f))&&d.length&&d[1]&&(d=d[1])}t=n.ABOUT_PAGE_TEMPLATE.replace("%1",d)}}return t}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(d);e.exports=A},3718:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(1225),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"GetHyperlinkEmbeddedTargetUrlDataList",value:function(e,t,n){for(var r,i,o,a=s.QuerySelectorAll(t,"A[href]"),c=[],u=0;u<a.length;u++)if(r=a[u],!s.IsInFilterList(n,r.href)){o=(i=s.GetElementSize(r)).w*i.h;var l=r.querySelectorAll("img, canvas");if(l.length)for(var d=void 0,f=void 0,h=0;h<l.length;h++)(f=(d=s.GetElementSize(l[h])).w*d.h)>o&&(o=f,i.w=d.w,i.h=d.h);o>=100&&s.isValidUrl(r.href)&&c.push({href:r.href,square:o})}return c&&c.length,c}},{key:"GetDocumentEmbeddedTargetUrlDataList",value:function(e,t,n){var r=[this.strategyStrictFinalUrl,this.strategyScriptClickTag,this.strategyAppnexus,this.strategyNoscriptAnchors,this.strategyScriptAndMetaContentJsonKeyWords,this.strategyLookingForPropertyInsideWindow],i=this.processStrategyList(t,r,n);return i&&i.length,i}},{key:"processStrategyList",value:function(e,t,n){var r,o=[],a=i(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;try{var c=s(e,n);c&&c.href&&o.push(c)}catch(e){}}}catch(e){a.e(e)}finally{a.f()}return o}},{key:"strategyStrictFinalUrl",value:function(e,t){for(var n=s.QuerySelectorAll(e,'script[type="application/json"]'),r=0;r<n.length;r++){var i=n[r].outerText;if(i.length>1&&"{"===i[0]&&"}"===i[i.length-1]&&-1!=i.indexOf("targets")&&-1!=i.indexOf("redirectUrl")&&-1!=i.indexOf("finalUrl")){var o=JSON.parse(i);if(void 0!==o.targets&&void 0!==o.targets.redirectUrl&&void 0!==o.targets.redirectUrl.finalUrl){var a=o.targets.redirectUrl.finalUrl;if(s.isValidUrl(a))return{href:a,square:1e6}}}}}},{key:"strategyScriptClickTag",value:function(e,t){for(var n=s.QuerySelectorAll(e,"script"),r=0;r<n.length;r++){var i=n[r].outerText;if(i.length>1&&-1!==i.indexOf("clickTag")&&(i=i.replace(/\s/g,"")).startsWith('varclickTag="')&&i.endsWith('";')){var o=i.indexOf('"'),a=i.lastIndexOf('"'),c=i.substring(o+1,a);if(s.isValidUrl(c))return{href:c,square:1e6}}}}},{key:"strategyAppnexus",value:function(e,t){for(var n=s.QuerySelectorAll(e,".GoogleActiveViewElement script"),r=Array.from(n).map((function(e){return e.innerHTML})).filter((function(e){return e.indexOf("APPNEXUS.placement")>=0})),i=0;i<r.length;i++){var o=a(r[i]);if(s.isValidUrl(o))return{href:o,square:1e6}}function a(e){var t=(e=e.replace(/(\r\n|\n|\r|\s)/gm,"")).match(/APPNEXUS.placement\(".+","(.+)",.+/);return t&&t.length>1?t[1]:null}}},{key:"strategyNoscriptAnchors",value:function(e,t){for(var n=s.QuerySelectorAll(e,"noscript"),r=0;r<n.length;r++){var i=e.createElement("div");i.innerHTML=n[r].innerText;var o=i.querySelector("a[href]");if(o){var a=o.getAttribute("href");if(s.isValidUrl(a))return{href:a,square:1}}}}},{key:"strategyScriptAndMetaContentJsonKeyWords",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n){var o=E(n,t);return DCLibCommon.isValidUrl(o)?{href:o,square:999999}:void 0}var a,c=s.QuerySelectorAll(e,"script, meta[content]"),u=i(c);try{for(u.s();!(a=u.n()).done;){var l=a.value,d="script"===l.nodeName.toLowerCase()?l.outerText:l.getAttribute("content");if(d.length>1&&"{"===d[0]&&"}"===d[d.length-1]){var f=JSON.parse(d),h=E(f,t);if(s.isValidUrl(h))return{href:h,square:999999}}}}catch(e){u.e(e)}finally{u.f()}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=t.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(n.length>o)return null;var a,c=Object.getOwnPropertyNames(e),u=i(c);try{for(u.s();!(a=u.n()).done;){var l=a.value;try{var d=e[l];if(!d)return null;var f=n.concat(l);if("string"==typeof d&&d.length>1&&"{"===d[0]&&"}"===d[d.length-1]){var h=E(JSON.parse(d),t,f);if(h)return h}if("object"===r(d)){var T=E(d,t,f);if(T)return T}else if("string"==typeof d&&A(l,t)&&s.isValidUrl(d))return d}catch(e){}}}catch(e){u.e(e)}finally{u.f()}return null}function A(e,t){var n,r=T(e),o=i(t.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS);try{for(o.s();!(n=o.n()).done;)if(r===n.value)return!0}catch(e){o.e(e)}finally{o.f()}return!1}function T(e){return e.toLowerCase().replace(/[^a-zA-Z]+/g,"")}}},{key:"strategyLookingForPropertyInsideWindow",value:function(t,n){var o,a=t.defaultView,s=i(n.WINDOW_PROPERTY_NAMES);try{for(s.s();!(o=s.n()).done;){var c=a[o.value];if(c){if("string"==typeof c)return!c.search(/^http/)>-1&&(c=u(c)),{href:c,square:1e6};if("object"===r(c))return e.strategyScriptAndMetaContentJsonKeyWords(t,n,c)}}}catch(e){s.e(e)}finally{s.f()}function u(r){try{var i=PosdBase64.decode(r);if(i){if("string"==typeof i&&"{"===i[0]){var o=JSON.parse(i);return e.strategyScriptAndMetaContentJsonKeyWords(t,n,o).href}return""}}catch(e){}}}}],(n=null)&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=c},8185:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(1225),o=n(7983),a=n(3718),s=function(){function e(t,n,r,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=r,this.fullIdStr=i.GetFullIdStr(t,n,r),this.init=!1,this.targetUrlDataList=[],this.targetUrlDetected=!1,this.IframesIO=null,this.activationTargetUrlCandidates=o,this.html5TargetUrlDetectionConfig=a.GetHtml5TargetUrlDetectionConfig(),this.blacklistedTargetUrls=a.BlacklistTargetUrl,this.detectionTimerId=null,this.onDetectTargetUrlCallBack=null}var t,n,s;return t=e,s=[{key:"filterTargetUrlDataList",value:function(e,t){return e&&0!==e.length?e.filter((function(e){if(e.href&&0===e.href.search(/^http/)&&!i.IsInFilterList(t,e.href))return!0})):[]}},{key:"DetectTargetUrlFromWindowObj",value:function(e,t,n){var r=[],i=n.GetHtml5TargetUrlDetectionConfig(),s=n.BlacklistTargetUrl;try{var c=a.GetHyperlinkEmbeddedTargetUrlDataList(e,t.document,i);r=r.concat(c)}catch(e){}try{var u=a.GetDocumentEmbeddedTargetUrlDataList(e,t.document,i);u=this.filterTargetUrlDataList(u,s),r=r.concat(u)}catch(e){}try{var l=o.GetWindowEmbeddedTargetUrlDataList(e,t,i,this.defaultWindowProps);l=this.filterTargetUrlDataList(l,s),r=r.concat(l)}catch(e){}return r&&r.length,r}}],(n=[{key:"FrameTargetUrl",get:function(){return this.targetUrlDataList}},{key:"Init",value:function(e){return e&&(this.IframesIO=e,this.init=!0),this.init}},{key:"DetectTargetUrl",value:function(t,n){if(this.init&&!this.targetUrlDetected&&this.html5TargetUrlDetectionConfig)if(this.onDetectTargetUrlCallBack=n,this.detectionTimerId=setTimeout(this.onTargetUrlDetectionTimout.bind(this),t),this.activationTargetUrlCandidates&&this.activationTargetUrlCandidates.length)this.targetUrlDataList=this.activationTargetUrlCandidates,this.TargetUrlDetected();else{var r=a.GetHyperlinkEmbeddedTargetUrlDataList(this.id,document,this.blacklistedTargetUrls);this.targetUrlDataList=this.targetUrlDataList.concat(r);var i=a.GetDocumentEmbeddedTargetUrlDataList(this.id,document,this.html5TargetUrlDetectionConfig);i=e.filterTargetUrlDataList(i,this.blacklistedTargetUrls),this.targetUrlDataList=this.targetUrlDataList.concat(i),this.targetUrlDataList&&this.targetUrlDataList.length?this.TargetUrlDetected():this.IframesIO.ActivateWindowEmbeddedTargetUrlDetection(this.onGetWindowEmbeddedTargetUrlData.bind(this))}}},{key:"onGetWindowEmbeddedTargetUrlData",value:function(t){var n=e.filterTargetUrlDataList(t,this.blacklistedTargetUrls);this.targetUrlDataList.push(n),this.concatTargetUrlsDataIfNeed(),!n||n.length,this.TargetUrlDetected()}},{key:"concatTargetUrlsDataIfNeed",value:function(){this.targetUrlDataList[0].length&&(this.targetUrlDataList=this.targetUrlDataList.flat(1))}},{key:"onTargetUrlDetectionTimout",value:function(){this.targetUrlDetected||this.TargetUrlDetected()}},{key:"TargetUrlDetected",value:function(){this.targetUrlDetected=!0,this.detectionTimerId&&(clearTimeout(this.detectionTimerId),this.detectionTimerId=null),this.onDetectTargetUrlCallBack&&this.onDetectTargetUrlCallBack()}}])&&r(t.prototype,n),s&&r(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=s},7983:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,o,a;return r=e,a=[{key:"GetWindowEmbeddedTargetUrlDataList",value:function(e,r,i){var o=[function(e,t){if(void 0!==e.clickTag&&s(e.clickTag))return{href:e.clickTag,square:1000001}},function(e,t){if(void 0!==e.adData){if(void 0!==e.adData.destination_url&&s(e.adData.destination_url))return{href:e.adData.destination_url,square:1000001};if(void 0!==e.adData.redirect_url&&s(e.adData.redirect_url))return{href:e.adData.redirect_url,square:1000001}}},function(e,t){if(void 0!==e.BF&&void 0!==e.BF.Parameters&&void 0!==e.BF.Parameters.targeturl&&s(e.BF.Parameters.targeturl))return{href:e.BF.Parameters.targeturl,square:1000001}},function(e,t){if(void 0!==e.ADAPT&&void 0!==e.ADAPT.symbols&&void 0!==e.ADAPT.symbols.stage&&void 0!==e.ADAPT.symbols.stage.clickUrl&&s(e.ADAPT.symbols.stage.clickUrl))return{href:e.ADAPT.symbols.stage.clickUrl,square:1000001}},function(e,t){if(void 0!==e.admixAPI&&void 0!==e.admixAPI.ownerBanner&&void 0!==e.admixAPI.ownerBanner.clickUrl&&s(e.admixAPI.ownerBanner.clickUrl))return{href:e.admixAPI.ownerBanner.clickUrl,square:1000001}},function(e,t){var n=function(e,t,n){var r=function(e,t){return Object.getOwnPropertyNames(e).filter((function(e){return t.LOCAL_DEFAULT_WINDOWS_OBJECT_PROPERTIES.indexOf(e)<0}))}(t,n);return r&&0!==r.length?c(t,r,n):null}(0,e,t);if(s(n))return{href:n,square:999999}}],a=function(e,t,r){var i,o=[],a=n(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;try{var c=s(e,r);c&&c.href&&o.push(c)}catch(e){}}}catch(e){a.e(e)}finally{a.f()}return o}(r,o,i);return a&&a.length,a;function s(e){return"string"==typeof e&&e.length>0&&(-1!==e.indexOf("http")||-1!==e.indexOf("//"))}function c(e,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=i.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(o.length>a)return null;var l,d=n(r);try{for(d.s();!(l=d.n()).done;){var f=l.value;try{var h=e[f];if(!h)return null;var E=o.concat(f);if("object"===t(h)){var A=Object.getOwnPropertyNames(h),T=c(h,A,i,E);if(T)return T}else if("string"==typeof h&&u(f,i)&&s(h))return h}catch(e){}}}catch(e){d.e(e)}finally{d.f()}return null}function u(e,t){var r,i=function(e){return e.toLowerCase().replace(/[^a-zA-Z]+/g,"")}(e),o=n(t.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS);try{for(o.s();!(r=o.n()).done;)if(i===r.value)return!0}catch(e){o.e(e)}finally{o.f()}return!1}}}],(o=null)&&i(r.prototype,o),a&&i(r,a),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.exports=o},5092:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(8962),c=n(3124),u=n(5212),l=n(8318),d=n(356),f=n(9809),h=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.available=!1,this.onPageRefreshed=this.onPageUrlChanged,this.instaConfig=n.GetInstagramConfig,this.AdBlockerAgent=r,this.DetectorFeed=null,this.DetectorStories=null,this.headersEntries=[],this.ActivateVideoTrafficDetector()}var t,n,o;return t=e,(n=[{key:"onPageUrlChanged",value:function(e,t){var n=this;this.available&&setTimeout((function(){n.DeactivateDetectors(),n.ActivateDetectors()}),0)}},{key:"PageRefreshed",value:function(e,t){this.pageUrl=e,this.ticketId=t,this.onPageUrlChanged&&this.onPageUrlChanged(e,t)}},{key:"ActivateDetector",value:function(e){e===c.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.DetectorFeed=new l(this.id,this.AdBlockerAgent,this.instaConfig),this.DetectorFeed.onPageUrlChanged=this.onPageUrlChanged.bind(this),this.DetectorFeed.sendAdCandidatesToBackground=this.sendInstagramAd.bind(this),this.DetectorStories=new f(this.id,this.AdBlockerAgent,this.instaConfig),this.DetectorStories.onPageUrlChanged=this.onPageUrlChanged.bind(this),this.DetectorStories.sendAdCandidatesToBackground=this.sendInstagramAd.bind(this),this.ActivateDetectors()}},{key:"ActivateVideoTrafficDetector",value:function(){this.VideoTrafficDetector=new d(this.id,this.AdBlockerAgent),this.VideoTrafficDetector.InjectDetector(this.id+"_w",JSON.stringify(this.instaConfig.TRAFFIC_LISTENER_CONFIG))}},{key:"ActivateDetectors",value:function(){this.GetHeadersDataForLoader(),this.isFeedPage()&&this.DetectorFeed.ActivateDetector(),this.isStoriesPage()&&this.DetectorStories.ActivateDetector()}},{key:"DeactivateDetectors",value:function(){this.DetectorFeed.DeactivateDetector(),this.DetectorStories.DeactivateDetector()}},{key:"sendInstagramAd",value:function(e,t){var n=document.querySelector("[".concat(c.ATTRIBUTE_BIS_ID,"=").concat(e,"]"));n&&(this.addFieldsToCandidateAboutHeaders(t),u.SendCandidatePlacementsCount(this.id,1,c.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_INSTAGRAM,null),u.SendAdCandidates(this.id,[t],c.MESSAGE_TYPE_CANDIDATES_DATA_INSTAGRAM,null),s.CONFIG_MARK_AD_CANDIDATES&&s.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&(t.videoData?n.style.cssText+=c.STYLES_OUTLINE_VIDEO_AD:n.style.cssText+=c.STYLES_OUTLINE_SUCCESS_DETECT))}},{key:"GetHeadersDataForLoader",value:function(){var e,t=this,n=i(this.instaConfig.LOAD_USER_DATA.HEADERS_VALUES_QUERIES);try{var o=function(){var n=e.value,r=new RegExp(n[1]),i=n[0],o=new RegExp(i,"i"),a=Array.from(document.querySelectorAll("script")).filter((function(e){return e.innerHTML.search(o)>-1}));if(!a.length)return{v:void 0};var s=a[0].innerHTML.match(r)[1];t.headersEntries.push([i,s])};for(n.s();!(e=n.n()).done;){var a=o();if("object"===r(a))return a.v}}catch(e){n.e(e)}finally{n.f()}}},{key:"addFieldsToCandidateAboutHeaders",value:function(e){this.headersEntries.length&&e.aboutPageUrl&&(e.headers=Object.fromEntries(this.headersEntries))}},{key:"isFeedPage",value:function(){return document.location.href.search(/instagram\.com\/($|\?variant|\?epik)/)>-1}},{key:"isStoriesPage",value:function(){return document.location.href.search(/instagram\.com\/stories\//)>-1}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=h},8318:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=n(1225),f=n(3124),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=o.call(this,e)).instaConfig=n,r.timeOptions=r.instaConfig.FEED.TIMEOUT_OPTIONS,r.id=e,r.adBlockerAgent=t,r.feedContainer=null,r.lastFeedAdsCheckTime=d.GetCurrentTimestampMs()-1e3,r.activateDetectorTime=d.GetCurrentTimestampMs(),r.feedObserver=null,r.observerNodesListenerInterval=null,r.observerNodesChecksAmount=0,r.onPageRefreshed=r.onPageUrlChanged,r.processInstagramAdsInterval=null,r}return t=u,(n=[{key:"onPageUrlChanged",value:function(){}},{key:"DeactivateDetector",value:function(){this.PauseDetector(),this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null),this.observerNodesChecksAmount=0,this.setActive=!1}},{key:"PauseDetector",value:function(){this.processInstagramAdsInterval&&(clearInterval(this.processInstagramAdsInterval),this.processInstagramAdsInterval=null),this.observerNodesListenerInterval&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null),this.isActive=!1}},{key:"ActivateDetector",value:function(e){if(this.activateDetectorTime=d.GetCurrentTimestampMs(),!this.isActive){this.setActive=!0;var t=this.DetectCandidates.bind(this);this.processInstagramAdsInterval=setInterval(t,this.timeOptions.STANDART_INTERVAL_DETECTS),this.adBlockerAgent.IsEnabledForInstagram()&&(this.DetectCandidates(),setTimeout(this.DetectCandidates.bind(this),350),setTimeout(this.DetectCandidates.bind(this),700)),this.observerNodesListenerInterval||(this.observerNodesListenerInterval=setInterval(this.CallbackMutationObserve.bind(this),this.timeOptions.INSTERVAL_MUTATION_CALLBACK))}}},{key:"CallbackMutationObserve",value:function(){if(this.observerNodesChecksAmount=this.observerNodesChecksAmount+1,this.feedContainer=this.FeedContainer,!this.feedObserver&&this.feedContainer){var e,t,n=this.ActivateDetector.bind(this);this.feedObserver=new MutationObserver(n),this.feedObserver.observe(null===(e=this.feedContainer)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.parentElement,{childList:!0,subtree:!0})}d.GetCurrentTimestampMs()-this.activateDetectorTime>this.timeOptions.MAX_TIME_FOR_DETECT_TRIES&&this.PauseDetector()}},{key:"DetectCandidates",value:function(){var e=d.GetCurrentTimestampMs();e-this.lastFeedAdsCheckTime>this.timeOptions.MIN_TIME_BETWEEN_DETECTS_START&&(this.lastFeedAdsCheckTime=e,this.processFeedAds())}},{key:"FeedContainer",get:function(){var e,t=this.instaConfig.FEED.CONTAINER_QUERIES,n=this.instaConfig.FEED.CONTAINER_MIN_HEIGHT,r=i(t);try{for(r.s();!(e=r.n()).done;){var o=e.value,a=document.querySelector(o);if(a&&a.offsetHeight>=n)return a}}catch(e){r.e(e)}finally{r.f()}}},{key:"processFeedAds",value:function(){var e=this,t=this.detectPromotedPosts();if(t&&t.length){var n,r=i(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;d.GetElementSize(o),o.hasAttribute(f.ATTRIBUTE_BIS_ID)||function(){var t=d.GenerateAndSetBisIdToInstagramAds(o);e.setSizesAndIdForAllElements(o),e.adBlockerAgent.IsEnabledForInstagram()&&(e.HideElementForInstagramFeedOnly(o.firstElementChild),e.adBlockerAgent.SetHiddenAmount(1));var n=e.createHTML(o),r=e.getAdvertiserName(o),i=e.getTargetUrl(o),a=e.getAboutPageUrl(o);e.AddHiddenTextTags(n);var s=e.getAdInstagramObject(o,n,r,i,a,f.INSTAGRAM_AD_PLACEMENT_TYPE_FEED);e.isVideo(o,e.instaConfig.TAGS_FOR_VIDEO_CHECK)&&!e.isCarousel(o)&&(s.videoData={}),e.removeCloneElement(n);var c=setTimeout((function(){e.sendAdCandidatesToBackground.call(e,t,s),clearTimeout(c)}),100)}()}}catch(e){r.e(e)}finally{r.f()}}}},{key:"AddHiddenTextTags",value:function(e){var t=e.querySelectorAll("svg>use");if(t)for(var n=0;n<t.length;n++){var r=t[n],i=r.parentElement,o=r.getAttribute("xlink:href"),a=document.querySelector(o).cloneNode(!0);a.style.display="none",a.id=a.id+"_bis",i&&i.appendChild(a)}}},{key:"detectPromotedPosts",value:function(){var e=this;if(!this.feedContainer)return[];for(var t=this.instaConfig.FEED.IMG_SPACE_PERCENTAGE,n=this.instaConfig.PROMOTED_ALIASES,r=Array.from(this.feedContainer.children),o=[],a=0,s=r;a<s.length;a++){var c=s[a];if(this.IsPostContentRendered(c,t)){var u,l=i(c.querySelectorAll(this.instaConfig.FEED.PROMOTED_QUERY));try{var d=function(){var t=u.value;if(!t)return"continue";var r=t.hasAttribute("xlink:href")?e.GetTextFromXlink(t):t.innerText;return n.some((function(e){return r.search(e)>=0}))?(o.push(c),"break"):void 0};for(l.s();!(u=l.n()).done;){var f=d();if("continue"!==f&&"break"===f)break}}catch(e){l.e(e)}finally{l.f()}}}return o}},{key:"GetTextFromXlink",value:function(e){var t=e.getAttribute("xlink:href");return t?document.querySelector(t).textContent:""}},{key:"IsPostContentRendered",value:function(e,t){var n=!1;if(e){var r=d.GetFullElementSize(e);r.w>0&&d.GetImagesSpacePercentage(this.instaConfig.TAGS_FOR_LOADING_CHECK,e,r)>=t&&(n=!0)}return n}},{key:"createHTML",value:function(e){var t=document.createElement("html"),n=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,i=e.cloneNode(!0),o=this.feedContainer,a=o.cloneNode();return this.styleFixes(a),this.setWrapperStyles(o,a),a.appendChild(i),n.appendChild(a),t.appendChild(r),t.appendChild(n),t}},{key:"setWrapperStyles",value:function(e,t){t.style.cssText=t.style.cssText+" max-width: ".concat(this.maxWidthContainer(e))}},{key:"maxWidthContainer",value:function(e){return e?e.offsetWidth+"px":"auto"}},{key:"styleFixes",value:function(e){e.style.paddingBottom=0}},{key:"cloneBodyWithStyles",get:function(){var e=document.createElement("body"),t=document.querySelectorAll('body style, body link[rel="stylesheet"]');return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"cloneHeadWithStyles",get:function(){var e=document.createElement("head"),t=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style');return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"getAboutPageUrl",value:function(e){var t=this.instaConfig.FEED.ABOUT_PAGE_URL_QUERY,n=e.querySelector(t);return n&&n.href?n.href:""}},{key:"getAdvertiserName",value:function(e){var t=this.instaConfig.FEED.ADVERTISER_NAME_QUERY,n=e.querySelector(t),r="";if(n){if(r=n.innerText)return r;if(-1===(r=n.innerHTML).search(/\<\//))return r}return""}},{key:"getTargetUrl",value:function(e){var t=this.instaConfig.FEED.TARGET_URL_QUERY,n=e.querySelector(t),r="";return n&&n.href&&(r=n.href),r}},{key:"isVideo",value:function(e){return!(!e||!e.querySelectorAll(this.instaConfig.TAGS_FOR_VIDEO_CHECK).length)}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(n(9543));e.exports=h},9809:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=n(9543),f=n(1225),h=n(3124),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(l,e);var t,n,o,u=c(l);function l(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=u.call(this,e)).instaConfig=n,r.timeOptions=r.instaConfig.STORIES.TIMEOUT_OPTIONS,r.id=e,r.adBlockerAgent=t,r.onPageRefreshed=r.onPageUrlChanged,r.storyContainer=null,r.lastStoriesAdsCheckTime=f.GetCurrentTimestampMs()-1e3,r.activateDetectorTime=f.GetCurrentTimestampMs(),r.storiesObserver=null,r.processInstagramAdsInterval=null,r.observerNodesListenerInterval=null,r.observerNodesChecksAmount=0,r}return t=l,(n=[{key:"onPageUrlChanged",value:function(){}},{key:"DeactivateDetector",value:function(){this.PauseDetector(),this.storiesObserver&&(this.storiesObserver.disconnect(),this.storiesObserver=null,this.storyContainer=null),this.observerNodesChecksAmount=0,this.setActive=!1}},{key:"PauseDetector",value:function(){this.processInstagramAdsInterval&&(clearInterval(this.processInstagramAdsInterval),this.processInstagramAdsInterval=null),this.observerNodesListenerInterval&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null),this.setActive=!1}},{key:"CallbackMutationObserve",value:function(){if(this.observerNodesChecksAmount=this.observerNodesChecksAmount+1,this.storyContainer=this.StoryContainer,!this.storiesObserver&&this.storyContainer){var e=this.ActivateDetector.bind(this);this.storiesObserver=new MutationObserver(e),this.storiesObserver.observe(this.storyContainer,{childList:!0,subtree:!0})}f.GetCurrentTimestampMs()-this.activateDetectorTime>this.timeOptions.MAX_TIME_FOR_DETECT_TRIES&&this.PauseDetector()}},{key:"DetectCandidates",value:function(){var e=f.GetCurrentTimestampMs();e-this.lastStoriesAdsCheckTime>this.timeOptions.MIN_TIME_BETWEEN_DETECTS_START&&(this.lastStoriesAdsCheckTime=e,this.processStoriesAds())}},{key:"ActivateDetector",value:function(){if(this.activateDetectorTime=f.GetCurrentTimestampMs(),!this.isActive){this.setActive=!0;var e=this.DetectCandidates.bind(this);this.processInstagramAdsInterval=setInterval(e,this.timeOptions.STANDART_INTERVAL_DETECTS),this.adBlockerAgent.IsEnabledForInstagram()&&(this.DetectCandidates(),setTimeout(this.DetectCandidates.bind(this),350),setTimeout(this.DetectCandidates.bind(this),700)),this.observerNodesListenerInterval||(this.observerNodesListenerInterval=setInterval(this.CallbackMutationObserve.bind(this),this.timeOptions.INSTERVAL_MUTATION_CALLBACK))}}},{key:"processStoriesAds",value:function(){var e=this,t=this.detectPromotedMarkedStory();if(t&&(f.GetElementSize(t),!t.hasAttribute(h.ATTRIBUTE_BIS_ID))){var n=f.GenerateAndSetBisIdToInstagramAds(t);this.setSizesAndIdForAllElements(t);var r=this.createHTML(t),i=this.getAdvertiserName(t),o=this.getTargetUrl(t),a=this.getAboutPageUrl(t);this.AddHiddenTextTags(r);var s=this.getAdInstagramObject(t,r,i,o,a,h.INSTAGRAM_AD_PLACEMENT_TYPE_STORY);this.adBlockerAgent.IsEnabledForInstagram(),this.removeCloneElement(r);var c=setTimeout((function(){e.sendAdCandidatesToBackground.call(e,n,s),clearTimeout(c)}),100)}}},{key:"AddHiddenTextTags",value:function(e){var t=e.querySelectorAll("svg>use");if(t)for(var n=0;n<t.length;n++){var r=t[n],i=r.parentElement,o=r.getAttribute("xlink:href"),a=document.querySelector(o).cloneNode(!0);a.style.display="none",a.id=a.id+"_bis",i&&i.appendChild(a)}}},{key:"createHTML",value:function(e){var t=document.createElement("html"),n=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,i=e.cloneNode(!0),o=document.createElement("div");return this.styleFixes(i),this.setWrapperStyles(e,o),o.appendChild(i),n.appendChild(o),t.appendChild(r),t.appendChild(n),t}},{key:"cloneBodyWithStyles",get:function(){var e=document.createElement("body"),t=document.querySelectorAll('body style, body link[rel="stylesheet"]');return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"cloneHeadWithStyles",get:function(){var e=document.createElement("head"),t=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style');return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"detectPromotedMarkedStory",value:function(){var e=this;if(!this.storyContainer)return null;var t=this.instaConfig.STORIES.IMG_SPACE_PERCENTAGE,n=this.instaConfig.PROMOTED_ALIASES,o=this.storyContainer;if(this.IsStoryContentRendered(o,t)){var a,s=i(o.querySelectorAll(this.instaConfig.STORIES.PROMOTED_QUERY));try{var c=function(){var t=a.value;if(!t)return"continue";var r=t.hasAttribute("xlink:href")?e.GetTextFromXlink(t):t.innerText;return n.some((function(e){return r.search(e)>=0}))?{v:o}:void 0};for(s.s();!(a=s.n()).done;){var u=c();if("continue"!==u&&"object"===r(u))return u.v}}catch(e){s.e(e)}finally{s.f()}}return null}},{key:"GetTextFromXlink",value:function(e){var t=e.getAttribute("xlink:href");return t?document.querySelector(t).textContent:""}},{key:"getAdvertiserName",value:function(e){var t=this.instaConfig.STORIES.ADVERTISER_NAME_QUERY,n=e.querySelector(t);return n?n.innerText:""}},{key:"getTargetUrl",value:function(e){var t=this.instaConfig.STORIES.TARGET_URL_QUERY,n=e.querySelector(t),r="";return n&&n.href&&(r=n.href),r}},{key:"getAboutPageUrl",value:function(e){var t=this.instaConfig.STORIES.ABOUT_PAGE_URL_QUERY,n=e.querySelector(t);return n&&n.href?n.href:""}},{key:"IsStoryContentRendered",value:function(e,t){var n=!1;if(e){var r=f.GetFullElementSize(e);r.w>0&&f.GetImagesSpacePercentage(this.instaConfig.TAGS_FOR_LOADING_CHECK,e,r)>=t&&(n=!0)}return n}},{key:"setWrapperStyles",value:function(e,t){t.style.cssText=t.style.cssText+" max-width: ".concat(this.maxWidthContainer(e))}},{key:"maxWidthContainer",value:function(e){return e?e.offsetWidth+"px":"auto"}},{key:"styleFixes",value:function(e){e.style.transform=""}},{key:"StoryContainer",get:function(){return document.querySelector(this.instaConfig.STORIES.STORY_QUERY)}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(d);e.exports=E},356:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(1225),o=n(3124),a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.AdBlockerAgent=n}var t,n,a;return t=e,(n=[{key:"InjectDetector",value:function(e,t){if(document.head){var n=document.createElement("script");this.setAttributes(n),document.head.appendChild(n)}}},{key:"setAttributes",value:function(e){var t=i.getURL("../executers/".concat(o.INSTAGRAM_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("nonce",""),this.AdBlockerAgent.IsEnabledForInstagram()&&e.setAttribute("ad-opt-on",""),e.src=t}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=a},9751:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(3858),o=n(893),a=n(1290),s=n(3124),c=n(5212),u=n(8962),l=n(5427),d=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.IOManager=r,this.AdBlockerAgent=i,this.pinterestConfig=n.PinterestConfig,this.available=!1,this.pinterestContent=null,this.pinterestFeedDetector=null,this.pinterestPinDetector=null,this.pinterestSearchDetector=null,this.VideoTrafficDetector=null}var t,n,d;return t=e,(n=[{key:"onPageUrlChanged",value:function(e,t){var n=this;this.available&&setTimeout((function(){n.DeactivateDetectors(),n.ActivateDetectors()}),100)}},{key:"PageRefreshed",value:function(e,t){this.pageUrl=e,this.ticketId=t,this.onPageUrlChanged&&this.onPageUrlChanged(e,t)}},{key:"ActivateDetector",value:function(e){this.GetGlobalContainer(),this.pinterestContent&&(e===s.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.pinterestFeedDetector=new i(this.id,this.pinterestConfig,this.AdBlockerAgent),this.pinterestFeedDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestFeedDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestFeedDetector.onPageUrlChanged=this.onPageUrlChanged.bind(this),this.pinterestFeedDetector.getUniqueContentId=this.getUniqueContentId.bind(this),this.pinterestSearchDetector=new a(this.id,this.pinterestConfig,this.AdBlockerAgent),this.pinterestSearchDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestSearchDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestSearchDetector.onPageUrlChanged=this.onPageUrlChanged.bind(this),this.pinterestSearchDetector.getUniqueContentId=this.getUniqueContentId.bind(this),this.pinterestPinDetector=new o(this.id,this.pinterestConfig,this.AdBlockerAgent),this.pinterestPinDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestPinDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestPinDetector.onPageUrlChanged=this.onPageUrlChanged.bind(this),this.pinterestPinDetector.getUniqueContentId=this.getUniqueContentId.bind(this),this.ActivateDetectors())}},{key:"ActivateDetectors",value:function(){this.pinterestFeedDetector.ActivateDetector(),this.pinterestSearchDetector.ActivateDetector(),this.pinterestPinDetector.ActivateDetector()}},{key:"DeactivateDetectors",value:function(){this.pinterestFeedDetector.DeactivateDetector(),this.pinterestSearchDetector.DeactivateDetector(),this.pinterestPinDetector.DeactivateDetector()}},{key:"ActivateVideoTrafficDetector",value:function(e){this.VideoTrafficDetector||(this.VideoTrafficDetector=new l(this.id),this.VideoTrafficDetector.InjectDetector(this.id+"_p",JSON.stringify(this.pinterestConfig)))}},{key:"GetGlobalContainer",value:function(){return this.pinterestContent=document.querySelector(this.pinterestConfig.MAIN_CONTAINER_QUERY),this.pinterestContent}},{key:"getUniqueContentId",value:function(e){var t=e.querySelector("div[".concat(this.pinterestConfig.FEED_PAGE.UNIQUE_ATTRIBUTE,"]"));return t?t.getAttribute(this.pinterestConfig.FEED_PAGE.UNIQUE_ATTRIBUTE):""}},{key:"sendPinterestAd",value:function(e,t){var n=document.querySelector("[".concat(s.ATTRIBUTE_BIS_ID,"=").concat(e,"]"));n&&(c.SendAdCandidates(this.id,[t],s.MESSAGE_TYPE_CANDIDATES_DATA_PINTEREST,null),u.CONFIG_MARK_AD_CANDIDATES&&u.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&(t.videoData?n.style.cssText+=s.STYLES_OUTLINE_VIDEO_AD:n.style.cssText+=s.STYLES_OUTLINE_SUCCESS_DETECT))}}])&&r(t.prototype,n),d&&r(t,d),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=d},3858:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=n(9543),f=n(3124),h=n(1225),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=o.call(this,e)).id=e,r.pinterestConfig=t,r.adBlockerAgent=n,r.feedContainer=null,r.lastFeedAdsCheckTime=0,r.feedObserver=null,r.observerNodesListenerInterval=null,r.observerNodesChecksAmount=0,r.onPageRefreshed=r.onPageUrlChanged,r}return t=u,(n=[{key:"onPageUrlChanged",value:function(){}},{key:"ActivateDetector",value:function(){var e=this;if(!this.isActive&&this.isFeedPageURL()){this.setActive=!0,this.lastFeedAdsCheckTime=h.GetCurrentTimestampMs()-3e3;var t=this.processFeedAds.bind(this);this.processPinterestAdsInterval=setInterval(t,1e3),this.adBlockerAgent.IsEnabledForPinterest()&&(this.processFeedAds(),setTimeout(this.processFeedAds.bind(this),350),setTimeout(this.processFeedAds.bind(this),700));var n=function(){if(e.observerNodesChecksAmount=e.observerNodesChecksAmount+1,e.feedContainer=e.getFeedContainer(),!e.feedObserver&&e.feedContainer){var t=e.processFeedAds.bind(e);e.feedObserver=new MutationObserver(t),e.feedObserver.observe(e.feedContainer,{childList:!0,subtree:!0})}}.bind(this);this.observerNodesListenerInterval=setInterval(n,300)}}},{key:"DeactivateDetector",value:function(){this.processPinterestAdsInterval&&(clearInterval(this.processPinterestAdsInterval),this.processPinterestAdsInterval=null),this.observerNodesListenerInterval&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null),this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null),this.observerNodesChecksAmount=0,this.setActive=!1}},{key:"processFeedAds",value:function(){var e=this,t=this.detectPromotedPins();if(t&&t.length){var n,r=i(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;h.GetElementSize(o),o.hasAttribute(f.ATTRIBUTE_BIS_ID)||function(){var t=h.GenerateAndSetBisIdToPinterestAds(o);e.setSizesAndIdForAllElements(o);var n=e.createHTML(o),r=e.getAdvertiserName(o),i=e.getTargetUrl(o),a=e.getTitleText(o),s=e.getAdvertiserUrl(o),c=e.getAdPinterestObject(o,n,r,i,a,s,f.PINTEREST_AD_PLACEMENT_TYPE_FEED);e.isVideo(o,e.pinterestConfig.FEED_PAGE.TAGS_FOR_VIDEO_CHECK)&&(c.videoData={}),e.adBlockerAgent.IsEnabledForPinterest()&&(e.HideElement(o),e.adBlockerAgent.SetHiddenAmount(1)),e.removeCloneElement(n);var u=setTimeout((function(){e.sendAdCandidatesToBackground.call(e,t,c),clearTimeout(u)}),100)}()}}catch(e){r.e(e)}finally{r.f()}}}},{key:"detectPromotedPins",value:function(){var e=this;if(!this.feedContainer)return[];for(var t=[],n=this.pinterestConfig.FEED_PAGE.IMG_SPACE_PERCENTAGE,r=this.pinterestConfig.FEED_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,o=Array.from(this.feedContainer.childNodes),a=this.pinterestConfig.PROMOTED_ALIASES,s=0,c=o;s<c.length;s++){var u=c[s];!this.IsPostContentRendered(u,n)||function(){var n=u.querySelector(e.pinterestConfig.FEED_PAGE.PROMOTED_PINS_QUERY);if(!n)return"continue";var o=n.innerText;if(!o||"style"===n.nodeName.toLowerCase()){var s=window.getComputedStyle(n,":before");o=n.textContent,s&&s.content&&!o&&(o=s.content);var c,l=i(r);try{for(l.s();!(c=l.n()).done;){var d=c.value;if(!o){o="";break}var f=d[0],h=d[1],E="join"!==f?new RegExp(h,"g"):"";o="join"!==f||1!==o.length?"replace"===f?o[f](E,""):o[f](E):o[0]}}catch(e){l.e(e)}finally{l.f()}}a.some((function(e){return o.search(e)>=0}))&&t.push(u)}()}return t}},{key:"getFeedContainer",value:function(){var e=this.getGlobalContainer(),t=null;return e?t=e.querySelector(this.pinterestConfig.FEED_PAGE.CONTAINER_QUERY):t}},{key:"cloneBodyWithStyles",get:function(){var e=document.createElement("body"),t=document.querySelectorAll("body style");return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"cloneHeadWithStyles",get:function(){var e=document.createElement("head"),t=document.querySelectorAll('head link[rel="stylesheet"], head script');return t&&t.forEach((function(t){var n=t.cloneNode();e.appendChild(n)})),e}},{key:"createHTML",value:function(e){var t=document.createElement("html"),n=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,i=e.cloneNode(!0);return this.styleFixes(i),n.appendChild(i),t.appendChild(r),t.appendChild(n),t}},{key:"IsPostContentRendered",value:function(e,t){var n=!1;if(e){var r=h.GetFullElementSize(e);r.w>0&&h.GetImagesSpacePercentage(this.pinterestConfig.FEED_PAGE.TAGS_FOR_LOADING_CHECK,e,r)>=t&&(n=!0)}return n}},{key:"getAdvertiserName",value:function(e){var t=this.pinterestConfig.FEED_PAGE.ADVERTISER_NAME_QUERY,n=e.querySelector(t);return n?n.innerText:""}},{key:"getAdvertiserUrl",value:function(e){var t=this.pinterestConfig.FEED_PAGE.ADVERTISER_PINTEREST_URL_QUERY,n=e.querySelector(t);return n?n.href:""}},{key:"styleFixes",value:function(e){e.style.cssText=e.style.cssText.replace(/transform.[^;]*;/,"");var t,n=i(this.pinterestConfig.FEED_PAGE.STYLE_FIXES);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=e.querySelector(r.ELEMENT_QUERY),a=r.NEW_RULES;if(o){if(r.NEW_RULES.includes("${")){var s=JSON.parse(o.getAttribute(f.ATTRIBUTE_BIS_SIZE)).h;a=r.NEW_RULES.replace(/\$\{.[^}]*\}/,s)}o.style.cssText+=a}}}catch(e){n.e(e)}finally{n.f()}}},{key:"getTargetUrl",value:function(e){var t=this.pinterestConfig.FEED_PAGE.TARGET_URL_QUERY,n=e.querySelector(t),r="";return n&&n.href&&(r=n.href),r}},{key:"getTitleText",value:function(e){var t=this.pinterestConfig.FEED_PAGE.TITLE_TEXT_QUERY,n=e.querySelector(t),r="";return n&&n.textContent.length&&(r=n.textContent),r}},{key:"isFeedPageURL",value:function(){return-1===document.location.href.search(/\.pinterest\..{1,6}\/(pin|search)\//)}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(d);e.exports=E},893:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=n(9543),f=n(3124),h=n(1225),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=o.call(this,e)).id=e,r.pinterestConfig=t,r.adBlockerAgent=n,r.pinContainer=null,r.lastPinAdsCheckTime=0,r.pinObserver=null,r.observerNodesListenerInterval=null,r.observerNodesChecksAmount=0,r}return t=u,(n=[{key:"onPageUrlChanged",value:function(){}},{key:"ActivateDetector",value:function(){var e=this;if(!this.isActive&&this.isPinPageURL()){this.setActive=!0,this.lastPinAdsCheckTime=h.GetCurrentTimestampMs()-3e3;var t=this.processPinAds.bind(this);this.processPinterestAdsInterval=setInterval(t,1e3),this.adBlockerAgent.IsEnabledForPinterest()&&(this.processPinAds(),setTimeout(this.processPinAds.bind(this),350),setTimeout(this.processPinAds.bind(this),700));var n=function(){if(e.observerNodesChecksAmount=e.observerNodesChecksAmount+1,e.pinContainer=e.getPinContainer(),!e.pinObserver&&e.pinContainer){var t=e.processPinAds.bind(e);e.pinObserver=new MutationObserver(t),e.pinObserver.observe(e.pinContainer,{childList:!0,subtree:!0})}}.bind(this);this.observerNodesListenerInterval=setInterval(n,300)}}},{key:"DeactivateDetector",value:function(){this.processPinterestAdsInterval&&(clearInterval(this.processPinterestAdsInterval),this.processPinterestAdsInterval=null),this.observerNodesListenerInterval&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null),this.pinObserver&&(this.pinObserver.disconnect(),this.pinObserver=null,this.pinContainer=null),this.observerNodesChecksAmount=0,this.setActive=!1}},{key:"processPinAds",value:function(){var e=this,t=this.detectPromotedPins();if(t&&t.length){var n,r=i(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;h.GetElementSize(o),o.hasAttribute(f.ATTRIBUTE_BIS_ID)||function(){var t=h.GenerateAndSetBisIdToPinterestAds(o);e.setSizesAndIdForAllElements(o);var n=e.createHTML(o),r=e.getAdvertiserName(o),i=e.getTargetUrl(o),a=e.getTitleText(o),s=e.getAdvertiserUrl(o),c=e.getAdPinterestObject(o,n,r,i,a,s,f.PINTEREST_AD_PLACEMENT_TYPE_PIN);e.isVideo(o,e.pinterestConfig.PIN_PAGE.TAGS_FOR_VIDEO_CHECK)&&(c.videoData={}),e.adBlockerAgent.IsEnabledForPinterest()&&(e.HideElement(o),e.adBlockerAgent.SetHiddenAmount(1)),e.removeCloneElement(n);var u=setTimeout((function(){e.sendAdCandidatesToBackground.call(e,t,c),clearTimeout(u)}),100)}()}}catch(e){r.e(e)}finally{r.f()}}}},{key:"detectPromotedPins",value:function(){var e=this;if(!this.pinContainer)return[];for(var t=[],n=this.pinterestConfig.PIN_PAGE.IMG_SPACE_PERCENTAGE,r=this.pinterestConfig.PIN_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,o=Array.from(this.pinContainer.childNodes),a=this.pinterestConfig.PROMOTED_ALIASES,s=0,c=o;s<c.length;s++){var u=c[s];!this.IsPostContentRendered(u,n)||function(){var n=u.querySelector(e.pinterestConfig.PIN_PAGE.PROMOTED_PINS_QUERY);if(!n)return"continue";var o=n.innerText;if(!o||"style"===n.nodeName.toLowerCase()){var s=window.getComputedStyle(n,":before");o=n.textContent,s&&s.content&&!o&&(o=s.content);var c,l=i(r);try{for(l.s();!(c=l.n()).done;){var d=c.value;if(!o){o="";break}var f=d[0],h=d[1],E="join"!==f?new RegExp(h,"g"):"";o="join"!==f||1!==o.length?"replace"===f?o[f](E,""):o[f](E):o[0]}}catch(e){l.e(e)}finally{l.f()}}a.some((function(e){return o.search(e)>=0}))&&t.push(u)}()}return t}},{key:"getPinContainer",value:function(){var e=this.getGlobalContainer(),t=null;return e?t=e.querySelector(this.pinterestConfig.PIN_PAGE.CONTAINER_QUERY):t}},{key:"cloneBodyWithStyles",get:function(){var e=document.createElement("body"),t=document.querySelectorAll("body style");return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"cloneHeadWithStyles",get:function(){var e=document.createElement("head"),t=document.querySelectorAll('head link[rel="stylesheet"], head script');return t&&t.forEach((function(t){var n=t.cloneNode();e.appendChild(n)})),e}},{key:"createHTML",value:function(e){var t=document.createElement("html"),n=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,i=e.cloneNode(!0);return this.styleFixes(i),n.appendChild(i),t.appendChild(r),t.appendChild(n),t}},{key:"IsPostContentRendered",value:function(e,t){var n=!1;if(e){var r=h.GetFullElementSize(e);r.w>0&&h.GetImagesSpacePercentage(this.pinterestConfig.PIN_PAGE.TAGS_FOR_LOADING_CHECK,e,r)>=t&&(n=!0)}return n}},{key:"getAdvertiserName",value:function(e){var t=this.pinterestConfig.PIN_PAGE.ADVERTISER_NAME_QUERY,n=e.querySelector(t);return n?n.innerText:""}},{key:"getAdvertiserUrl",value:function(e){var t=this.pinterestConfig.PIN_PAGE.ADVERTISER_PINTEREST_URL_QUERY,n=e.querySelector(t);return n?n.href:""}},{key:"getTitleText",value:function(e){var t=this.pinterestConfig.PIN_PAGE.TITLE_TEXT_QUERY,n=e.querySelector(t),r="";return n&&n.textContent.length&&(r=n.textContent),r}},{key:"styleFixes",value:function(e){e.style.cssText=e.style.cssText.replace(/transform.[^;]*;/,"");var t,n=i(this.pinterestConfig.PIN_PAGE.STYLE_FIXES);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=e.querySelector(r.ELEMENT_QUERY),a=r.NEW_RULES;if(o){if(r.NEW_RULES.includes("${")){var s=JSON.parse(o.getAttribute(f.ATTRIBUTE_BIS_SIZE)).h;a=r.NEW_RULES.replace(/\$\{.[^}]*\}/,s)}o.style.cssText+=a}}}catch(e){n.e(e)}finally{n.f()}}},{key:"getTargetUrl",value:function(e){var t=this.pinterestConfig.PIN_PAGE.TARGET_URL_QUERY,n=e.querySelector(t),r="";return n&&n.href&&(r=n.href),r}},{key:"isPinPageURL",value:function(){return!(-1===document.location.href.search(/\.pinterest\..{1,6}\/(pin)\//))}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(d);e.exports=E},1290:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=n(9543),f=n(3124),h=n(1225),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=o.call(this,e)).id=e,r.pinterestConfig=t,r.adBlockerAgent=n,r.searchContainer=null,r.lastSearchPageAdsCheckTime=0,r.searchPageObserver=null,r.observerNodesListenerInterval=null,r.observerNodesChecksAmount=0,r.onPageRefreshed=r.onPageUrlChanged,r}return t=u,(n=[{key:"onPageUrlChanged",value:function(){}},{key:"ActivateDetector",value:function(){var e=this;if(!this.isActive&&this.isSearchPageURL()){this.setActive=!0,this.lastSearchPageAdsCheckTime=h.GetCurrentTimestampMs()-3e3;var t=this.processSearchPageAds.bind(this);this.processPinterestAdsInterval=setInterval(t,1e3),this.adBlockerAgent.IsEnabledForPinterest()&&(this.processSearchPageAds(),setTimeout(this.processSearchPageAds.bind(this),350),setTimeout(this.processSearchPageAds.bind(this),700));var n=function(){if(e.observerNodesChecksAmount=e.observerNodesChecksAmount+1,e.searchContainer=e.getSearchContainer(),!e.searchPageObserver&&e.searchContainer){var t=e.processSearchPageAds.bind(e);e.searchPageObserver=new MutationObserver(t),e.searchPageObserver.observe(e.searchContainer,{childList:!0,subtree:!0})}}.bind(this);this.observerNodesListenerInterval=setInterval(n,300)}}},{key:"DeactivateDetector",value:function(){this.processPinterestAdsInterval&&(clearInterval(this.processPinterestAdsInterval),this.processPinterestAdsInterval=null),this.observerNodesListenerInterval&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null),this.searchPageObserver&&(this.searchPageObserver.disconnect(),this.searchPageObserver=null,this.searchContainer=null),this.observerNodesChecksAmount=0,this.setActive=!1}},{key:"processSearchPageAds",value:function(){var e=this,t=this.detectPromotedPins();if(t&&t.length){var n,r=i(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;h.GetElementSize(o),o.hasAttribute(f.ATTRIBUTE_BIS_ID)||function(){var t=h.GenerateAndSetBisIdToPinterestAds(o);e.setSizesAndIdForAllElements(o);var n=e.createHTML(o),r=e.getAdvertiserName(o),i=e.getTargetUrl(o),a=e.getTitleText(o),s=e.getAdvertiserUrl(o),c=e.getAdPinterestObject(o,n,r,i,a,s,f.PINTEREST_AD_PLACEMENT_TYPE_SEARCH);e.isVideo(o,e.pinterestConfig.SEARCH_PAGE.TAGS_FOR_VIDEO_CHECK)&&(c.videoData={}),e.adBlockerAgent.IsEnabledForPinterest()&&(e.HideElement(o),e.adBlockerAgent.SetHiddenAmount(1)),e.removeCloneElement(n);var u=setTimeout((function(){e.sendAdCandidatesToBackground.call(e,t,c),clearTimeout(u)}),100)}()}}catch(e){r.e(e)}finally{r.f()}}}},{key:"detectPromotedPins",value:function(){var e=this;if(!this.searchContainer)return[];for(var t=[],n=this.pinterestConfig.SEARCH_PAGE.IMG_SPACE_PERCENTAGE,r=this.pinterestConfig.SEARCH_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,o=Array.from(this.searchContainer.childNodes),a=this.pinterestConfig.PROMOTED_ALIASES,s=0,c=o;s<c.length;s++){var u=c[s];!this.IsPostContentRendered(u,n)||function(){var n=u.querySelector(e.pinterestConfig.SEARCH_PAGE.PROMOTED_PINS_QUERY);if(!n)return"continue";var o=n.innerText;if(!o||"style"===n.nodeName.toLowerCase()){var s=window.getComputedStyle(n,":before");o=n.textContent,s&&s.content&&!o&&(o=s.content);var c,l=i(r);try{for(l.s();!(c=l.n()).done;){var d=c.value;if(!o){o="";break}var f=d[0],h=d[1],E="join"!==f?new RegExp(h,"g"):"";o="join"!==f||1!==o.length?"replace"===f?o[f](E,""):o[f](E):o[0]}}catch(e){l.e(e)}finally{l.f()}}a.some((function(e){return o.search(e)>=0}))&&t.push(u)}()}return t}},{key:"getSearchContainer",value:function(){var e=this.getGlobalContainer(),t=null;return e?t=e.querySelector(this.pinterestConfig.SEARCH_PAGE.CONTAINER_QUERY):t}},{key:"cloneBodyWithStyles",get:function(){var e=document.createElement("body"),t=document.querySelectorAll("body style");return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"cloneHeadWithStyles",get:function(){var e=document.createElement("head"),t=document.querySelectorAll('head link[rel="stylesheet"], head script');return t&&t.forEach((function(t){var n=t.cloneNode();e.appendChild(n)})),e}},{key:"createHTML",value:function(e){var t=document.createElement("html"),n=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,i=e.cloneNode(!0);return this.styleFixes(i),n.appendChild(i),t.appendChild(r),t.appendChild(n),t}},{key:"IsPostContentRendered",value:function(e,t){var n=!1;if(e){var r=h.GetFullElementSize(e);r.w>0&&h.GetImagesSpacePercentage(this.pinterestConfig.SEARCH_PAGE.TAGS_FOR_LOADING_CHECK,e,r)>=t&&(n=!0)}return n}},{key:"getAdvertiserName",value:function(e){var t=this.pinterestConfig.SEARCH_PAGE.ADVERTISER_NAME_QUERY,n=e.querySelector(t);return n?n.innerText:""}},{key:"getAdvertiserUrl",value:function(e){var t=this.pinterestConfig.SEARCH_PAGE.ADVERTISER_PINTEREST_URL_QUERY,n=e.querySelector(t);return n?n.href:""}},{key:"styleFixes",value:function(e){e.style.cssText=e.style.cssText.replace(/transform.[^;]*;/,"");var t,n=i(this.pinterestConfig.SEARCH_PAGE.STYLE_FIXES);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=e.querySelector(r.ELEMENT_QUERY),a=r.NEW_RULES;if(o){if(r.NEW_RULES.includes("${")){var s=JSON.parse(o.getAttribute(f.ATTRIBUTE_BIS_SIZE)).h;a=r.NEW_RULES.replace(/\$\{.[^}]*\}/,s)}o.style.cssText+=a}}}catch(e){n.e(e)}finally{n.f()}}},{key:"getTargetUrl",value:function(e){var t=this.pinterestConfig.SEARCH_PAGE.TARGET_URL_QUERY,n=e.querySelector(t),r="";return n&&n.href&&(r=n.href),r}},{key:"getTitleText",value:function(e){var t=this.pinterestConfig.SEARCH_PAGE.TITLE_TEXT_QUERY,n=e.querySelector(t),r="";return n&&n.textContent.length&&(r=n.textContent),r}},{key:"isSearchPageURL",value:function(){return!(-1===document.location.href.search(/\.pinterest\..{1,6}\/(search)\//))}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(d);e.exports=E},5427:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(1225),o=n(3124),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t}var t,n,a;return t=e,(n=[{key:"InjectDetector",value:function(e,t){if(document.head){var n=document.createElement("script");this.setAttributes(n),document.head.appendChild(n)}}},{key:"setAttributes",value:function(e){var t=i.getURL("../executers/".concat(o.PINTEREST_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("nonce",""),e.src=t}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=a},5216:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var u=n(9543),l=n(4387),d=n(3124),f=n(8962),h=n(5212),E=n(6027),A=n(8337),T=n(5552),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(c,e);var t,n,r,s=a(c);function c(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(i=s.call(this,e)).id=e,i.VideoTrafficDetector=null,i.onPageRefreshed=i.onPageUrlChanged,i.AdBlockerAgent=r,i.IOManager=n,i.feedContainer=null,i.commentPageContainer=null,i.rightColumnContainer=null,i.feedObserver=null,i.commentPageObserver=null,i.rightColumnObserver=null,i.processRedditAdsInterval=null,i.observerNodesListenerInterval=null,i.redditConfig=t.RedditConfig,i.reactivateDetectorTimeout=null,i.lastTopPosition=null,i.observerNodesChecksAmount=0,i.DetectorFeed=null,i.DetectorComments=null,i.DetectorRightColumn=null,i.ActivateTrafficDetector(),i}return t=c,n=[{key:"onPageUrlChanged",value:function(e,t){var n=this;this.available&&setTimeout((function(){n.DeactivateDetectors(d.AD_DETECTOR_INITIATOR_URL),n.ActivateDetectors()}),50)}},{key:"ActivateDetectors",value:function(){this.DetectorFeed.ActivateDetector(),this.DetectorComments.ActivateDetector(),this.DetectorRightColumn.ActivateDetector()}},{key:"DeactivateDetectors",value:function(e){this.DetectorFeed.DeactivateDetector(e),this.DetectorComments.DeactivateDetector(e),this.DetectorRightColumn.DeactivateDetector(e)}},{key:"ActivateDetector",value:function(e){e===d.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.DetectorFeed=new E(this.id,this.redditConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.DetectorComments=new A(this.id,this.redditConfig.COMMENT_PAGE.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.DetectorRightColumn=new T(this.id,this.redditConfig.RIGHT_COLUMN.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}},{key:"AddNecessaryMethods",value:function(){this.DetectorFeed.isCarousel=this.isCarousel.bind(this),this.DetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.DetectorFeed.getAdRedditObject=this.getAdRedditObject.bind(this),this.DetectorFeed.ExtractAd=this.processAndSendRedditAd.bind(this),this.DetectorFeed.HideElement=this.HideElement.bind(this),this.DetectorComments.HideElement=this.HideElement.bind(this),this.DetectorComments.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.DetectorComments.getAdRedditObject=this.getAdRedditObject.bind(this),this.DetectorComments.ExtractAd=this.processAndSendRedditAd.bind(this),this.DetectorRightColumn.HideElement=this.HideElement.bind(this),this.DetectorRightColumn.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.DetectorRightColumn.getAdRedditObject=this.getAdRedditObject.bind(this),this.DetectorRightColumn.ExtractAd=this.processAndSendRedditAd.bind(this)}},{key:"ActivateTrafficDetector",value:function(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new l(this.id),this.VideoTrafficDetector.InjectDetector(this.id+"_r",JSON.stringify(this.redditConfig)))}},{key:"processAndSendRedditAd",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.querySelector("[".concat(d.ATTRIBUTE_BIS_ID,"=").concat(e,"]"));if(r){var i=!!r.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK);h.SendCandidatePlacementsCount(this.id,1,d.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_REDDIT,null),h.SendAdCandidates(this.id,[t],d.MESSAGE_TYPE_CANDIDATES_DATA_REDDIT,null),f.CONFIG_MARK_AD_CANDIDATES&&f.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&(r.style.cssText+=n?d.STYLES_OUTLINE_VIDEO_AD:i?d.STYLES_OUTLINE_TEXT_AD:d.STYLES_OUTLINE_SUCCESS_DETECT)}}}],n&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(u);e.exports=y},8337:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=n(1029),f=n(3124),h=n(1225),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(i=o.call(this,e,t,n)).id=e,i.redditConfig=r,i.commentPageContainer=null,i.AdBlockerAgent=n,i.commentPageObserver=null,i.adPlacementType=f.REDDIT_AD_PLACEMENT_TYPE_COMMENT_PAGE,i}return t=u,(n=[{key:"HideElement",value:function(){}},{key:"getAdRedditObject",value:function(){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"ActualizeDetector",value:function(){var e=!1;return this.getCommentPageContainer&&(e=!0),e}},{key:"ActivateMutationObserver",value:function(){var e=this;return this.commentPageContainer=this.getFeedContainer,this.commentPageContainer&&(this.commentPageObserver||(this.commentPageObserver=new MutationObserver(this.DetectCandidates.bind(this,f.AD_DETECTOR_INITIATOR_MUTATION)),this.commentPageObserver.observe(this.commentPageContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.commentPageObserver&&(e.commentPageObserver.disconnect(),e.commentPageObserver=null)})))),this.commentPageObserver}},{key:"getCommentPageContainer",get:function(){var e,t=this.redditConfig.COMMENT_PAGE.QUERIES,n=this.redditConfig.COMMENT_PAGE.MIN_HEIGHT,r=window.innerWidth,o=this.redditConfig.COMMENT_PAGE.TOP_DISTANCE,a=i(t);try{for(a.s();!(e=a.n()).done;)for(var s=e.value,c=Array.from(document.querySelectorAll(s)),u=0,l=c;u<l.length;u++){var d=l[u],f=d.getBoundingClientRect(),h=(r-parseInt(d.offsetWidth))/r*100,E=Array.from(d.children);if(parseInt(d.offsetHeight)>n&&h>2&&(parseInt(f.top)>o||parseInt(f.top)<0)&&E.length>=3)return d}}catch(e){a.e(e)}finally{a.f()}return null}},{key:"Detector",value:function(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processCommentPageAds(!0),this.isCommentPage&&(this.commentPageContainer=this.doesElementExists(this.commentPageContainer)?this.commentPageContainer:this.getCommentPageContainer,this.commentPageContainer&&this.processCommentPageAds())}},{key:"processCommentPageAds",value:function(e){this.extractOccurrences(f.REDDIT_AD_PLACEMENT_TYPE_COMMENT_PAGE)}},{key:"allCellsAndMinImgSpace",value:function(){var e=this,t=[],n=0;return this.commentPageContainer&&(t=Array.from(this.commentPageContainer.children),n=this.redditConfig.COMMENT_PAGE.IMG_SPACE_PERCENTAGE),{allCells:t=t.filter((function(t){return e.isPromoted(t)})),minImgSquerePercentage:n}}},{key:"extractOccurrences",value:function(){var e=this.allCellsAndMinImgSpace(),t=e.allCells,n=e.minImgSquerePercentage;if(t.length){var r,o=i(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!a.hasAttribute(f.ATTRIBUTE_BIS_ID)&&!a.hasAttribute(f.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(a,n)&&this.isAvatarImgReady(a)){var s=h.GenerateAndSetBisIdToRedditAds(a);if(this.isShadowRootExist(a)){var c=this.deepClone(a),u=this.buildBannerHtml(c,this.adPlacementType),l=this.lookingTargetUrl(u),d=this.getAdRedditObject(a,u,l,this.adPlacementType);this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(a),this.AdBlockerAgent.SetHiddenAmount(1)),c.remove(),setTimeout(this.ExtractAd.bind(this,s,d),100)}else{this.setSizesAndIdForAllElements(a);var E=a.cloneNode(!0),A=this.buildBannerHtml(E,this.adPlacementType),T=this.lookingTargetUrl(A),y=this.getAdRedditObject(a,A,T,this.adPlacementType);this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(a),this.AdBlockerAgent.SetHiddenAmount(1)),E.remove(),setTimeout(this.ExtractAd.bind(this,s,y),100)}}}}catch(e){o.e(e)}finally{o.f()}}}},{key:"isShadowRootExist",value:function(e){return!!e.shadowRoot||Array.from(e.querySelectorAll("*")).some((function(e){return e.shadowRoot}))}},{key:"deepClone",value:function(e){var t=this,n=1,r=document.createElement("div");return function e(r,i){var o=function(t,n){for(;t;)e(t,n),t=t.nextSibling};if(r){var a=r.cloneNode(!1);"SLOT"===r.nodeName&&(r.setAttribute("data-assigning-slot-id",n),a.setAttribute("data-assigning-slot-id",n)),r.assignedSlot&&r instanceof Element&&r.assignedSlot.hasAttribute("data-assigning-slot-id")&&a.setAttribute("data-assigned-to",r.assignedSlot.getAttribute("data-assigning-slot-id")),n+=1,i.appendChild(a),r.shadowRoot&&(t.setSizesAndIdForAllElements(r.shadowRoot),r.shadowRoot&&r.shadowRoot.firstChild.setAttribute&&h.SetFullSizeToElement(r.shadowRoot.firstChild),o(r.shadowRoot.firstChild,a)),t.setSizesAndIdForAllElements(r),r&&r.setAttribute&&h.SetFullSizeToElement(r),o(r.firstChild,a)}}(e,r),this.replaceElementsToRightSlots(r.firstElementChild),r.firstElementChild}},{key:"replaceElementsToRightSlots",value:function(e){var t,n=e.querySelectorAll("*[data-assigned-to]"),r=e.querySelectorAll("*[data-assigning-slot-id]"),o=i(n);try{for(o.s();!(t=o.n()).done;){var a,s=t.value,c=s.getAttribute("data-assigned-to"),u=i(r);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(c===l.getAttribute("data-assigning-slot-id")){l.appendChild(s);break}}}catch(e){u.e(e)}finally{u.f()}}}catch(e){o.e(e)}finally{o.f()}}},{key:"buildBannerHtml",value:function(e,t){var n=this.commentPageContainer;this.setWrapperClass(n);var r=this.headCopyWithStyles,i=document.createElement("html"),o=this.bodyCopyWithStyles,a=document.createElement("div"),s=n.cloneNode();return a.appendChild(s),this.setWrapperStyles(n,a),r.appendChild(this.getClassNameForStyles(e)),i.appendChild(r),s.appendChild(e),o.appendChild(a),i.appendChild(o),i}},{key:"setWrapperClass",value:function(e){var t=e.parentElement,n=!1;if(t)for(var r=0;r<50&&!n&&t;r++)if(t.nextSibling&&-1!==t.nextSibling.nodeName.search(/style/i)&&t.previousSibling&&-1!==t.previousSibling.nodeName.search(/style/i)){var i=t.getAttribute("class");e.className+=e.className.length?" "+i:i,n=!0}else t=t.parentElement}},{key:"headCopyWithStyles",get:function(){var e=this,t=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((function(n){for(var r=n.KEY,i=n.ALL_STYLES_FROM,o=n.COMMENT_PAGE,a=function(){var t=c[s];if(-1===t.nodeName.search(/^(style|link)$/gi))return t.remove(),"continue";if(t.dataset[r]){var n=i.some((function(e){return t.dataset[r].includes(e)}));!n&&e.isCommentPage&&(n=o.some((function(e){return t.dataset[r].includes(e)}))),n||t.remove()}},s=0,c=Array.from(t.children);s<c.length;s++)a()})),this.neccesaryStyleRules){var n=document.createElement("style");n.innerHTML=this.neccesaryStyleRules,t.appendChild(n)}return this.getStylesByTagName(t),t}},{key:"neccesaryStyleRules",get:function(){var e=null,t=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((function(e){var t,n=new RegExp(e,"gi"),r=document.querySelector("head").outerHTML.match(n);return r&&r.length&&(t=r.join("")),t})).filter((function(e){return e}));return t&&t.length&&(e=t.join("")),e}},{key:"getClassNameForStyles",value:function(e){var t=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((function(n){for(var r=e.querySelector(n.CLASS_NAME_CHILD),i=r&&r.parentElement?r.parentElement:null,o="",a=1;a<n.DEEP_LEVEL;a++)i&&(i=i.parentElement);i&&(o=i.classList[0],t.innerHTML+="."+o+n.STYLES)})),t}},{key:"getStylesByTagName",value:function(e){var t=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((function(t){var n=new RegExp(t.ATTRIBUTE_REGEX_VALUE);return Array.from(e.querySelectorAll(t.TAG_NAME)).filter((function(e){if(e&&e[t.ATTRIBUTE_NAME]&&-1!==e[t.ATTRIBUTE_NAME].search(n))return e;e.remove()}))})).filter((function(e){return e})).forEach((function(e){t=t.concat(e)})),t.forEach((function(t){e.appendChild(t)}))}},{key:"bodyCopyWithStyles",get:function(){var e,t=document.createElement("body"),n=null===(e=document.querySelector("body style"))||void 0===e?void 0:e.cloneNode(!0);return n&&t.appendChild(n),t}},{key:"isPromoted",value:function(e){var t=this;if(e){var n=e;if(1===n.childElementCount&&n.firstElementChild.shadowRoot&&n.firstElementChild.shadowRoot.firstElementChild?n=n.firstElementChild.shadowRoot.firstElementChild:n.shadowRoot&&(n=n.shadowRoot.firstElementChild),!n)return!1;var r=Array.from(n.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR));if(r.length)return r.some((function(e){var n=e.textContent.trim().toLowerCase();return n?t.redditConfig.PROMOTED_ALIASES.some((function(e){return n.indexOf(e)>=0})):e.dataset.beforeContent?(n=e.dataset.beforeContent,t.redditConfig.PROMOTED_ALIASES.some((function(e){return n.indexOf(e)>=0}))):void 0}))}return!1}},{key:"IsPostContentRendered",value:function(e,t){var n=!1;if(e){var r=e.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(r&&0===r.length){var i=h.GetFullElementSize(e);i.w>0&&h.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,e,i)>=t&&(n=!0)}e.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(n=!0)}return n}},{key:"lookingTargetUrl",value:function(e){var t="",n=Array.from(e.querySelectorAll('a[target="_blank"]')).filter((function(e){return!(!e||!e.href||e.href.includes("reddit.com/user/"))}));return n.length&&(t=n[0].href),t}},{key:"isAvatarImgReady",value:function(e){if(e){var t=e;1===t.childElementCount&&t.firstElementChild.shadowRoot?t=t.firstElementChild.shadowRoot.firstElementChild:t.shadowRoot&&(t=t.shadowRoot.firstElementChild);var n=t.querySelector(this.redditConfig.QUERY_CHECK_READY_AD_CELLS);return!(!n||n.shadowRoot&&(!n.shadowRoot||!n.shadowRoot.querySelector("img")))}}},{key:"maxWidthContainer",value:function(e){return e?e.offsetWidth+"px":"auto"}},{key:"setWrapperStyles",value:function(e,t){t.style.cssText=t.style.cssText+"max-width: ".concat(this.maxWidthContainer(e))}},{key:"doesElementExists",value:function(e){if(!e)return!1;var t=e.outerHTML;return document.querySelector("html").outerHTML.includes(t)}},{key:"isCommentPage",get:function(){return-1!==window.location.href.indexOf(this.redditConfig.COMMENT_PAGE.TEXT_FROM_HREF)}},{key:"isCommentPopup",get:function(){return!!document.querySelector(this.redditConfig.COMMENT_PAGE.QUERY_IS_POPUP)}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(d);e.exports=E},6027:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=n(1029),f=n(3124),h=n(1225),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(i=o.call(this,e,t,n)).id=e,i.feedObserver=null,i.redditConfig=r,i.feedContainer=null,i.AdBlockerAgent=n,i.lastTopPosition=null,i.adPlacementType=f.REDDIT_AD_PLACEMENT_TYPE_FEED,i}return t=u,(n=[{key:"isCarousel",value:function(){}},{key:"HideElement",value:function(){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"getAdRedditObject",value:function(e,t,n,r){}},{key:"ActualizeDetector",value:function(){if(!this.isValidUrl)return!1;var e=!1;return this.getFeedContainer&&this.isValidUrl&&(e=!0),e}},{key:"ActivateMutationObserver",value:function(){var e=this;return!!this.isValidUrl&&(this.feedContainer=this.getFeedContainer,this.feedContainer&&(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,f.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.feedObserver&&(e.feedObserver.disconnect(),e.feedObserver=null)})))),this.feedObserver)}},{key:"DeactivateMutationObserver",value:function(){this.feedObserver&&(this.lastTopPosition=parseInt(this.feedContainer.getBoundingClientRect().top),this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null)}},{key:"Detector",value:function(){if(!this.isValidUrl)return!1;this.AdBlockerAgent.IsEnabledForReddit()&&this.processRedditAds(!0),this.isCommentPage||this.isCommentPopup||(this.feedContainer=this.doesElementExists(this.feedContainer)?this.feedContainer:this.getFeedContainer,this.feedContainer&&this.processFeedAds())}},{key:"doesElementExists",value:function(e){if(!e)return!1;var t=e.outerHTML;return document.querySelector("html").outerHTML.includes(t)}},{key:"processRedditAds",value:function(e){this.processFeedAds(e)}},{key:"processFeedAds",value:function(e){this.extractOccurrences(f.REDDIT_AD_PLACEMENT_TYPE_FEED)}},{key:"allCellsAndMinImgSpace",value:function(){var e=this,t=[],n=0;if(this.feedContainer){var r=Array.from(this.feedContainer.children),i=Array.from(this.feedContainer.querySelectorAll(this.redditConfig.FEED.QUERY_POSTS));t=r,i&&i.length&&(t=r.concat(i)),n=this.redditConfig.FEED.IMG_SPACE_PERCENTAGE}return{allCells:t=t.filter((function(t){return e.isPromoted(t)&&t.offsetHeight<e.redditConfig.FEED.MAX_CHILD_HEIGHT})),minImgSquerePercentage:n}}},{key:"extractOccurrences",value:function(){var e=this.allCellsAndMinImgSpace(),t=e.allCells,n=e.minImgSquerePercentage;if(t.length){var r,o=i(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!a.hasAttribute(f.ATTRIBUTE_BIS_ID)&&!a.hasAttribute(f.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(a,n)&&this.isAvatarImgReady(a,this.adPlacementType)){this.isCarousel(a)&&this.redditConfig.IS_ACTIVE_GET_SLIDES_SRC&&this.getSlidesSrc(a);var s=h.GenerateAndSetBisIdToRedditAds(a),c=!1;if(this.isShadowRootExist(a)){var u=this.deepClone(a),l=this.buildBannerHtml(u,this.adPlacementType),d=this.getAdRedditObject(a,l,"",this.adPlacementType);this.isVideoPost(a)&&(c=!0,d.videoData=this.lookingForVideoDataInContent(a)),this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(a),this.AdBlockerAgent.SetHiddenAmount(1)),u.remove(),setTimeout(this.ExtractAd.bind(this,s,d,c),100)}else{this.setSizesAndIdForAllElements(a);var E=a.cloneNode(!0),A=this.buildBannerHtml(E,this.adPlacementType),T=this.getAdRedditObject(a,A,"",this.adPlacementType);this.isVideoPost(a)&&(c=!0,T.videoData=this.lookingForVideoDataInContent(a)),this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(a),this.AdBlockerAgent.SetHiddenAmount(1)),E.remove(),setTimeout(this.ExtractAd.bind(this,s,T,c),100)}}}}catch(e){o.e(e)}finally{o.f()}}}},{key:"isShadowRootExist",value:function(e){return!!e.shadowRoot||Array.from(e.querySelectorAll("*")).some((function(e){return e.shadowRoot}))}},{key:"deepClone",value:function(e){var t=this,n=1,r=document.createElement("div");return function e(r,i){var o=function(t,n){for(;t;)e(t,n),t=t.nextSibling};if(r){var a=r.cloneNode(!1);"SLOT"===r.nodeName&&(r.setAttribute("data-assigning-slot-id",n),a.setAttribute("data-assigning-slot-id",n)),r.assignedSlot&&r instanceof Element&&r.assignedSlot.hasAttribute("data-assigning-slot-id")&&a.setAttribute("data-assigned-to",r.assignedSlot.getAttribute("data-assigning-slot-id")),n+=1,i.appendChild(a),r.shadowRoot&&(t.setSizesAndIdForAllElements(r.shadowRoot),r.shadowRoot&&r.shadowRoot.firstChild.setAttribute&&h.SetFullSizeToElement(r.shadowRoot.firstChild),o(r.shadowRoot.firstChild,a)),t.setSizesAndIdForAllElements(r),r&&r.setAttribute&&h.SetFullSizeToElement(r),o(r.firstChild,a)}}(e,r),this.replaceElementsToRightSlots(r.firstElementChild),r.firstElementChild}},{key:"replaceElementsToRightSlots",value:function(e){var t,n=e.querySelectorAll("*[data-assigned-to]"),r=e.querySelectorAll("*[data-assigning-slot-id]"),o=i(n);try{for(o.s();!(t=o.n()).done;){var a,s=t.value,c=s.getAttribute("data-assigned-to"),u=i(r);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(c===l.getAttribute("data-assigning-slot-id")){l.appendChild(s);break}}}catch(e){u.e(e)}finally{u.f()}}}catch(e){o.e(e)}finally{o.f()}}},{key:"getSlidesSrc",value:function(e){var t=e.querySelector("ul").parentElement,n=t.querySelector(this.redditConfig.CAROUSEL_BUTTON_NEXT),r=t.querySelector(this.redditConfig.CAROUSEL_BUTTON_PREVIUOS);n&&r&&(n.click(),r.click())}},{key:"buildBannerHtml",value:function(e,t){var n;t===f.REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN?n=this.rightColumnContainer:t===f.REDDIT_AD_PLACEMENT_TYPE_FEED?n=this.feedContainer:t===f.REDDIT_AD_PLACEMENT_TYPE_COMMENT_PAGE&&(n=this.commentPageContainer),this.setWrapperClass(n);var r=this.headCopyWithStyles,i=document.createElement("html"),o=this.bodyCopyWithStyles,a=document.createElement("div"),s=n.cloneNode();return a.appendChild(s),this.setWrapperStyles(n,a),r.appendChild(this.getClassNameForStyles(e)),i.appendChild(r),s.appendChild(e),o.appendChild(a),i.appendChild(o),i}},{key:"setWrapperClass",value:function(e){var t=e.parentElement,n=!1;if(t)for(var r=0;r<50&&!n&&t;r++)if(t.nextSibling&&-1!==t.nextSibling.nodeName.search(/style/i)&&t.previousSibling&&-1!==t.previousSibling.nodeName.search(/style/i)){var i=t.getAttribute("class");e.className+=e.className.length?" "+i:i,n=!0}else t=t.parentElement}},{key:"setWrapperStyles",value:function(e,t){t.style.cssText=t.style.cssText+"max-width: ".concat(this.maxWidthContainer(e))}},{key:"getFeedContainer",get:function(){var e,t=this.redditConfig.FEED.QUERIES,n=window.innerWidth,r=this.redditConfig.FEED.SECONDARY_CHECK_QUERY,o=this.redditConfig.FEED.QUERY_TO_EXCLUDE,a=i(t);try{for(a.s();!(e=a.n()).done;)for(var s=e.value,c=Array.from(document.querySelectorAll(s)),u=0,l=c;u<l.length;u++){var d=l[u],f=getComputedStyle(d),h=(n-parseInt(f.width))/n*100;if(parseInt(f.height)>1e3&&h>2&&null===d.querySelector(o))return d.querySelector(r)?d.querySelector(r):d}}catch(e){a.e(e)}finally{a.f()}return null}},{key:"headCopyWithStyles",get:function(){var e=this,t=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((function(n){for(var r=n.KEY,i=n.ALL_STYLES_FROM,o=n.FEED_PAGE,a=function(){var t=c[s];if(-1===t.nodeName.search(/^(style|link)$/gi))return t.remove(),"continue";if(t.dataset[r]){var n=i.some((function(e){return t.dataset[r].includes(e)}));n||e.isCommentPage||(n=o.some((function(e){return t.dataset[r].includes(e)}))),n||t.remove()}},s=0,c=Array.from(t.children);s<c.length;s++)a()})),this.neccesaryStyleRules){var n=document.createElement("style");n.innerHTML=this.neccesaryStyleRules,t.appendChild(n)}return this.getStylesByTagName(t),t}},{key:"neccesaryStyleRules",get:function(){var e=null,t=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((function(e){var t,n=new RegExp(e,"gi"),r=document.querySelector("head").outerHTML.match(n);return r&&r.length&&(t=r.join("")),t})).filter((function(e){return e}));return t&&t.length&&(e=t.join("")),e}},{key:"getClassNameForStyles",value:function(e){var t=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((function(n){for(var r=e.querySelector(n.CLASS_NAME_CHILD),i=r&&r.parentElement?r.parentElement:null,o="",a=1;a<n.DEEP_LEVEL;a++)i&&(i=i.parentElement);i&&(o=i.classList[0],t.innerHTML+="."+o+n.STYLES)})),t}},{key:"getStylesByTagName",value:function(e){var t=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((function(t){var n=new RegExp(t.ATTRIBUTE_REGEX_VALUE);return Array.from(e.querySelectorAll(t.TAG_NAME)).filter((function(e){if(e&&e[t.ATTRIBUTE_NAME]&&-1!==e[t.ATTRIBUTE_NAME].search(n))return e;e.remove()}))})).filter((function(e){return e})).forEach((function(e){t=t.concat(e)})),t.forEach((function(t){e.appendChild(t)}))}},{key:"bodyCopyWithStyles",get:function(){var e,t=document.createElement("body"),n=null===(e=document.querySelector("body style"))||void 0===e?void 0:e.cloneNode(!0);return n&&t.appendChild(n),t}},{key:"maxWidthContainer",value:function(e){return e?e.offsetWidth+"px":"auto"}},{key:"isVideoPost",value:function(e){var t=this,n=!1;return e&&(n=Array.from(e.querySelectorAll("*")).some((function(e){return e.shadowRoot?!!e.shadowRoot.querySelectorAll(t.redditConfig.TAGS_FOR_VIDEO_CHECK).length:!!e.querySelectorAll(t.redditConfig.TAGS_FOR_VIDEO_CHECK).length}))),n}},{key:"lookingForVideoDataInContent",value:function(e){var t=this.redditConfig.VIDEO_TRAFFIC_DETECTOR.QUERY_VIDEO_DATA_FROM_CONTENT,n=e.querySelector(t);if(n){var r=n.getAttribute("src");if(r&&!r.includes("blob:")){var i=new RegExp(this.redditConfig.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX),o=r.match(i);if(o&&o.length)return{videoId:o[1],url:r}}}return{}}},{key:"isPromoted",value:function(e){var t=this;if(e){var n=e;1===n.childElementCount&&n.firstElementChild.shadowRoot&&n.firstElementChild.shadowRoot.firstElementChild&&(n=n.firstElementChild.shadowRoot.firstElementChild);var r=Array.from(n.querySelectorAll(this.redditConfig.FEED.PROMOTED_SELECTOR)),i=Array.from(n.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR)),o=Array.from(e.querySelectorAll(this.redditConfig.RIGHT_COLUMN.PROMOTED_SELECTOR)),a=r.concat(o).concat(i);if(a.length)return a.some((function(e){var n=e.textContent.trim().toLowerCase();return n?t.redditConfig.PROMOTED_ALIASES.some((function(e){return n.indexOf(e)>=0})):e.dataset.beforeContent?(n=e.dataset.beforeContent,t.redditConfig.PROMOTED_ALIASES.some((function(e){return n.indexOf(e)>=0}))):void 0}))}return!1}},{key:"IsPostContentRendered",value:function(e,t){var n=!1;if(e){var r=e.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(r&&0===r.length){var i=h.GetFullElementSize(e);i.w>0&&h.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,e,i)>=t&&(n=!0)}e.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(n=!0)}return n}},{key:"isAvatarImgReady",value:function(e,t){if(t===f.REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN)return!0;if(e){var n=e;1===n.childElementCount&&n.firstElementChild.shadowRoot&&(n=n.firstElementChild.shadowRoot.firstElementChild);var r=n.querySelector(this.redditConfig.QUERY_CHECK_READY_AD_CELLS);return!(!r||r.shadowRoot&&(!r.shadowRoot||!r.shadowRoot.querySelector("img")))}}},{key:"isValidUrl",get:function(){return!this.redditConfig.FEED.INVALID_URL_PATHS.some((function(e){return window.location.href.includes(e)}))}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(d);e.exports=E},5552:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=n(1029),f=n(3124),h=n(1225),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(i=o.call(this,e,t,n)).id=e,i.rightColumnObserver=null,i.redditConfig=r,i.rightColumnContainer=null,i.AdBlockerAgent=n,i.lastTopPosition=null,i.adPlacementType=f.REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN,i}return t=u,(n=[{key:"HideElement",value:function(){}},{key:"getAdRedditObject",value:function(){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"ActualizeDetector",value:function(){var e=!1;return this.getRightColumnContainer&&(e=!0),e}},{key:"ActivateMutationObserver",value:function(){var e=this;return this.rightColumnContainer=this.getRightColumnContainer,this.rightColumnContainer&&(this.rightColumnObserver||(this.rightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,f.AD_DETECTOR_INITIATOR_MUTATION)),this.rightColumnObserver.observe(this.rightColumnContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.rightColumnObserver&&(e.rightColumnObserver.disconnect(),e.rightColumnObserver=null)})))),this.rightColumnObserver}},{key:"Detector",value:function(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processRightColumnAds(!0),this.rightColumnContainer=this.doesElementExists(this.rightColumnContainer)?this.rightColumnContainer:this.getRightColumnContainer,this.rightColumnContainer&&this.processRightColumnAds()}},{key:"processRightColumnAds",value:function(e){this.extractOccurrences(f.REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN)}},{key:"allCellsAndMinImgSpace",value:function(){var e=this,t=[],n=0;return this.rightColumnContainer&&(t=Array.from(this.rightColumnContainer.children).map((function(e){return e.querySelector("div ~ div > button")?e.querySelector("div:nth-child(1)"):e})),n=this.redditConfig.RIGHT_COLUMN.IMG_SPACE_PERCENTAGE),{allCells:t=t.filter((function(t){return e.isPromoted(t)})),minImgSquerePercentage:n}}},{key:"extractOccurrences",value:function(){var e=this.allCellsAndMinImgSpace(),t=e.allCells,n=e.minImgSquerePercentage;if(t.length){var r,o=i(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!a.hasAttribute(f.ATTRIBUTE_BIS_ID)&&!a.hasAttribute(f.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(a,n)){var s=h.GenerateAndSetBisIdToRedditAds(a);if(this.isShadowRootExist(a)){var c=this.deepClone(a),u=this.buildBannerHtml(c),l=this.lookingTargetUrl(u),d=this.getAdRedditObject(a,u,l,this.adPlacementType);this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(a),this.AdBlockerAgent.SetHiddenAmount(1)),c.remove(),setTimeout(this.ExtractAd.bind(this,s,d),100)}else{this.setSizesAndIdForAllElements(a);var E=a.cloneNode(!0),A=this.buildBannerHtml(E),T=this.lookingTargetUrl(A),y=this.getAdRedditObject(a,A,T,this.adPlacementType);this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(a),this.AdBlockerAgent.SetHiddenAmount(1)),E.remove(),setTimeout(this.ExtractAd.bind(this,s,y),100)}}}}catch(e){o.e(e)}finally{o.f()}}}},{key:"isShadowRootExist",value:function(e){return!!e.shadowRoot||Array.from(e.querySelectorAll("*")).some((function(e){return e.shadowRoot}))}},{key:"deepClone",value:function(e){var t=this,n=1,r=document.createElement("div");return function e(r,i){var o=function(t,n){for(;t;)e(t,n),t=t.nextSibling};if(r){var a=r.cloneNode(!1);"SLOT"===r.nodeName&&(r.setAttribute("data-assigning-slot-id",n),a.setAttribute("data-assigning-slot-id",n)),r.assignedSlot&&r instanceof Element&&r.assignedSlot.hasAttribute("data-assigning-slot-id")&&a.setAttribute("data-assigned-to",r.assignedSlot.getAttribute("data-assigning-slot-id")),n+=1,i.appendChild(a),r.shadowRoot&&(t.setSizesAndIdForAllElements(r.shadowRoot),r.shadowRoot&&r.shadowRoot.firstChild.setAttribute&&h.SetFullSizeToElement(r.shadowRoot.firstChild),o(r.shadowRoot.firstChild,a)),t.setSizesAndIdForAllElements(r),r&&r.setAttribute&&h.SetFullSizeToElement(r),o(r.firstChild,a)}}(e,r),this.replaceElementsToRightSlots(r.firstElementChild),r.firstElementChild}},{key:"buildBannerHtml",value:function(e){var t=this.rightColumnContainer;this.setWrapperClass(t);var n=this.headCopyWithStyles,r=document.createElement("html"),i=this.bodyCopyWithStyles,o=document.createElement("div"),a=t.cloneNode();return o.appendChild(a),this.setWrapperStyles(t,o),n.appendChild(this.getClassNameForStyles(e)),r.appendChild(n),a.appendChild(e),i.appendChild(o),r.appendChild(i),r}},{key:"setWrapperClass",value:function(e){var t=e.parentElement,n=!1;if(t)for(var r=0;r<50&&!n&&t;r++)if(t.nextSibling&&-1!==t.nextSibling.nodeName.search(/style/i)&&t.previousSibling&&-1!==t.previousSibling.nodeName.search(/style/i)){var i=t.getAttribute("class");e.className+=e.className.length?" "+i:i,n=!0}else t=t.parentElement}},{key:"setWrapperStyles",value:function(e,t){t.style.cssText=t.style.cssText+"max-width: ".concat(this.maxWidthContainer(e))}},{key:"replaceElementsToRightSlots",value:function(e){var t,n=e.querySelectorAll("*[data-assigned-to]"),r=e.querySelectorAll("*[data-assigning-slot-id]"),o=i(n);try{for(o.s();!(t=o.n()).done;){var a,s=t.value,c=s.getAttribute("data-assigned-to"),u=i(r);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(c===l.getAttribute("data-assigning-slot-id")){l.appendChild(s);break}}}catch(e){u.e(e)}finally{u.f()}}}catch(e){o.e(e)}finally{o.f()}}},{key:"isPromoted",value:function(e){var t=this;if(e){var n=e,r=Array.from(n.querySelectorAll(this.redditConfig.RIGHT_COLUMN.PROMOTED_SELECTOR));if(r.length)return r.some((function(e){var n=e.textContent.trim().toLowerCase();return n?t.redditConfig.PROMOTED_ALIASES.some((function(e){return n.indexOf(e)>=0})):e.dataset.beforeContent?(n=e.dataset.beforeContent,t.redditConfig.PROMOTED_ALIASES.some((function(e){return n.indexOf(e)>=0}))):void 0}))}return!1}},{key:"IsPostContentRendered",value:function(e,t){var n=!1;if(e){var r=e.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(r&&0===r.length){var i=h.GetFullElementSize(e);i.w>0&&h.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,e,i)>=t&&(n=!0)}e.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(n=!0)}return n}},{key:"lookingTargetUrl",value:function(e){var t="",n=Array.from(e.querySelectorAll('a[target="_blank"]')).filter((function(e){return!(!e||!e.href||e.href.includes("reddit.com/user/"))}));return n.length&&(t=n[0].href),t}},{key:"headCopyWithStyles",get:function(){var e=this,t=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((function(n){for(var r=n.KEY,i=n.ALL_STYLES_FROM,o=n.FEED_PAGE,a=function(){var t=c[s];if(-1===t.nodeName.search(/^(style|link)$/gi))return t.remove(),"continue";if(t.dataset[r]){var n=i.some((function(e){return t.dataset[r].includes(e)}));n||e.isCommentPage||(n=o.some((function(e){return t.dataset[r].includes(e)}))),n||t.remove()}},s=0,c=Array.from(t.children);s<c.length;s++)a()})),this.neccesaryStyleRules){var n=document.createElement("style");n.innerHTML=this.neccesaryStyleRules,t.appendChild(n)}return this.getStylesByTagName(t),t}},{key:"neccesaryStyleRules",get:function(){var e=null,t=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((function(e){var t,n=new RegExp(e,"gi"),r=document.querySelector("head").outerHTML.match(n);return r&&r.length&&(t=r.join("")),t})).filter((function(e){return e}));return t&&t.length&&(e=t.join("")),e}},{key:"getClassNameForStyles",value:function(e){var t=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((function(n){for(var r=e.querySelector(n.CLASS_NAME_CHILD),i=r&&r.parentElement?r.parentElement:null,o="",a=1;a<n.DEEP_LEVEL;a++)i&&(i=i.parentElement);i&&(o=i.classList[0],t.innerHTML+="."+o+n.STYLES)})),t}},{key:"getStylesByTagName",value:function(e){var t=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((function(t){var n=new RegExp(t.ATTRIBUTE_REGEX_VALUE);return Array.from(e.querySelectorAll(t.TAG_NAME)).filter((function(e){if(e&&e[t.ATTRIBUTE_NAME]&&-1!==e[t.ATTRIBUTE_NAME].search(n))return e;e.remove()}))})).filter((function(e){return e})).forEach((function(e){t=t.concat(e)})),t.forEach((function(t){e.appendChild(t)}))}},{key:"bodyCopyWithStyles",get:function(){var e,t=document.createElement("body"),n=null===(e=document.querySelector("body style"))||void 0===e?void 0:e.cloneNode(!0);return n&&t.appendChild(n),t}},{key:"maxWidthContainer",value:function(e){return e?e.offsetWidth+"px":"auto"}},{key:"getRightColumnContainer",get:function(){var e,t=null,n=i(this.redditConfig.RIGHT_COLUMN.QUERIES);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(t=document.querySelector(r))break}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"doesElementExists",value:function(e){if(!e)return!1;var t=e.outerHTML;return document.querySelector("html").outerHTML.includes(t)}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(d);e.exports=E},4387:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(1225),o=n(3124),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t}var t,n,a;return t=e,(n=[{key:"setAttributes",value:function(e){var t=i.getURL("../executers/".concat(o.REDDIT_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("nonce",""),e.src=t}},{key:"InjectDetector",value:function(){if(document.head){var e=document.createElement("script");this.setAttributes(e),window.addEventListener("DOMContentLoaded",(function t(){document.head.appendChild(e),window.removeEventListener("DOMContentLoaded",t)}))}}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=a},3173:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=n(8962),f=n(1225),h=n(3124),E=n(9543),A=n(5212),T=n(9426),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(i=o.call(this,e)).available=!1,i.onPageRefreshed=i.onPageUrlChanged,i.twConfig=t.TwitterConfig,i.IOManager=n,i.AdBlockerAgent=r,i.feedObserver=null,i.rightColumnObserver=null,i.activated=!1,i.processTwitterAdsInterval=null,i.observerNodesListenerInterval=null,i.reactivateDetectorTimeout=null,i.observerNodesChecksAmount=0,i.lastFeedPostAdsCheckTime=f.GetCurrentTimestampMs(),i.lastFeedWhoToFollowAdsCheckTime=f.GetCurrentTimestampMs(),i.lastRightColumnWhoToFollowAdsCheckTime=f.GetCurrentTimestampMs(),i.VideoTrafficDetector=null,i.ActivateVideoTrafficDetector(h.ACTIVATION_BY_ADS_SELF),i}return t=u,(n=[{key:"onPageUrlChanged",value:function(e,t){this.available&&(this.reactivateDetectorTimeout||(this.reactivateDetectorTimeout=setTimeout(this.ReActivateDetector.bind(this),100)))}},{key:"ActivateVideoTrafficDetector",value:function(e){this.VideoTrafficDetector||(this.VideoTrafficDetector=new T(this.id),this.VideoTrafficDetector.InjectDetector())}},{key:"ActivateDetector",value:function(e){var t=this;e===h.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.twConfig&&!this.activated&&(this.activated=!0,this.ActivateVideoTrafficDetector(e),this.lastFeedPostAdsCheckTime=f.GetCurrentTimestampMs()-3e3,this.lastFeedWhoToFollowAdsCheckTime=f.GetCurrentTimestampMs()-3e3,this.lastRightColumnWhoToFollowAdsCheckTime=f.GetCurrentTimestampMs()-3e3,this.processTwitterAdsInterval=setInterval(this.processTwitterAds.bind(this,h.AD_DETECTOR_INITIATOR_TIMER),1e3),this.AdBlockerAgent.IsEnabledForTwitter()&&(this.processTwitterAds(h.AD_DETECTOR_INITIATOR_ACTIVATION),setTimeout(this.processTwitterAds.bind(this,h.AD_DETECTOR_INITIATOR_ACTIVATION),350),setTimeout(this.processTwitterAds.bind(this,h.AD_DETECTOR_INITIATOR_ACTIVATION),700)),this.observerNodesListenerInterval=setInterval((function(){t.observerNodesChecksAmount=t.observerNodesChecksAmount+1;var e=document.querySelector(t.twConfig.FEED_CONTAINER);!t.feedObserver&&e&&(t.feedObserver=new MutationObserver(t.processFeedTwitterAds.bind(t,h.AD_DETECTOR_INITIATOR_MUTATION)),t.feedObserver.observe(e,{childList:!0,subtree:!0}));var n=document.querySelector(t.twConfig.RIGHT_COLUMN_CONTAINER);!t.rightColumnObserver&&n&&(t.rightColumnObserver=new MutationObserver(t.processRightColumnWhoToFollowAds.bind(t,h.AD_DETECTOR_INITIATOR_MUTATION)),t.rightColumnObserver.observe(n,{childList:!0,subtree:!0})),(e&&n||t.observerNodesChecksAmount>20)&&(clearInterval(t.observerNodesListenerInterval),t.observerNodesListenerInterval=null)}),300))}},{key:"DeactivateDetector",value:function(){this.processTwitterAdsInterval&&(clearInterval(this.processTwitterAdsInterval),this.processTwitterAdsInterval=null),this.observerNodesListenerInterval&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null),this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null),this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null),this.observerNodesChecksAmount=0,this.activated=!1}},{key:"ReActivateDetector",value:function(){this.reactivateDetectorTimeout=null,this.DeactivateDetector(),this.ActivateDetector()}},{key:"processFeedTwitterAds",value:function(e){this.processFeedPostAds(e),this.processFeedWhoToFollowAds(e)}},{key:"processTwitterAds",value:function(e){this.processRightColumnWhoToFollowAds(e),this.processFeedTwitterAds(e)}},{key:"processFeedPostAds",value:function(e){var t=f.GetCurrentTimestampMs();t-this.lastFeedPostAdsCheckTime>300&&(this.extractOccurrences(h.TWITTER_AD_PLACEMENT_TYPE_FEED),this.lastFeedPostAdsCheckTime=t)}},{key:"processRightColumnWhoToFollowAds",value:function(e){var t=f.GetCurrentTimestampMs();t-this.lastRightColumnWhoToFollowAdsCheckTime>300&&(this.extractOccurrences(h.TWITTER_AD_PLACEMENT_TYPE_RIGHT_COLUMN_WHO_TO_FOLLOW),this.lastRightColumnWhoToFollowAdsCheckTime=t)}},{key:"processFeedWhoToFollowAds",value:function(e){var t=f.GetCurrentTimestampMs();t-this.lastFeedWhoToFollowAdsCheckTime>300&&(this.extractOccurrences(h.TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW),this.lastFeedWhoToFollowAdsCheckTime=t)}},{key:"allCellsAndMinImgSpace",value:function(e){var t=this,n=[],r=0;return e===h.TWITTER_AD_PLACEMENT_TYPE_RIGHT_COLUMN_WHO_TO_FOLLOW?(n=Array.from(document.querySelectorAll(this.twConfig.RIGHT_COLUMN_WHO_TO_FOLLOW_SELECTOR)),r=this.twConfig.RIGHT_COLUMN_MIN_IMGS_SPACE_PERCENTAGE):e===h.TWITTER_AD_PLACEMENT_TYPE_FEED?(n=Array.from(document.querySelectorAll(this.twConfig.FEED_TWEETS_SELECTOR)),r=this.twConfig.FEED_MIN_IMGS_SPACE_PERCENTAGE):e===h.TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW&&(n=Array.from(document.querySelectorAll(this.twConfig.FEED_WHO_TO_FOLLOW_SELECTOR)),r=this.twConfig.FEED_WHO_TO_FOLLOW_MIN_IMGS_SPACE_PERCENTAGE),{allCells:n=n.filter((function(e){return t.isPromoted(e)})),minImgSquerePercentage:r}}},{key:"extractOccurrences",value:function(e){var t=this.allCellsAndMinImgSpace(e),n=t.allCells,r=t.minImgSquerePercentage;if(n.length){var o,a=i(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(!s.hasAttribute(h.ATTRIBUTE_BIS_ID)&&!s.hasAttribute(h.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(s,r)){var c=f.GenerateAndSetBisIdToTwitterAds(s);this.setSizesAndIdForAllElements(s);var u=this.getAdTwitterObject(s,e);e===h.TWITTER_AD_PLACEMENT_TYPE_FEED&&this.isVideo(s,this.twConfig.TAGS_FOR_VIDEO_TWEET_CHECK)&&!this.isCarouselCandidate(s)&&(u.videoData={}),this.AdBlockerAgent.IsEnabledForTwitter()&&(this.HideElement(s),this.AdBlockerAgent.SetHiddenAmount(1)),setTimeout(this.processAndSendTwitterAd.bind(this,c,u),100)}}}catch(e){a.e(e)}finally{a.f()}}}},{key:"processAndSendTwitterAd",value:function(e,t){var n=document.querySelector("[".concat(h.ATTRIBUTE_BIS_ID,"=").concat(e,"]")),r=!!n&&!!this.isVideo(n,this.twConfig.TAGS_FOR_VIDEO_TWEET_CHECK);n&&(A.SendCandidatePlacementsCount(this.id,1,h.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TWITTER,null),A.SendAdCandidates(this.id,[t],h.MESSAGE_TYPE_CANDIDATES_DATA_TWITTER,null),d.CONFIG_MARK_AD_CANDIDATES&&d.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&(n.style.cssText+=r?h.STYLES_OUTLINE_VIDEO_AD:h.STYLES_OUTLINE_SUCCESS_DETECT))}},{key:"setSizesAndIdForAllElements",value:function(e){var t=this;if(e){var n=this.getElementId();e.setAttribute(h.ATTRIBUTE_BIS_ELEMENT_ID,n),e.querySelectorAll("*").forEach((function(e){var n=t.getElementId();e.setAttribute(h.ATTRIBUTE_BIS_ELEMENT_ID,n),f.SetFullSizeToElement(e)}))}}},{key:"isPromoted",value:function(e){var t=this;if(e){var n=Array.from(e.querySelectorAll(this.twConfig.PROMOTED_SELECTOR));if(n.length)return n.some((function(e){var n=e.textContent;return!(!n||"string"!=typeof n)&&t.twConfig.PROMOTED_ALIASES.some((function(e){return e.toLowerCase().trim()===n.toLowerCase().trim()}))}))}return!1}},{key:"isCarouselCandidate",value:function(e){return!(!e||!e.querySelector(this.twConfig.CHECK_IF_CAROUSEL_QUERY))}},{key:"IsPostContentRendered",value:function(e,t){var n=!1;if(e){var r=e.querySelectorAll(this.twConfig.PROGRESS_SELECTOR);if(r&&0===r.length){var i=f.GetFullElementSize(e);i.w>0&&f.GetImagesSpacePercentage(this.twConfig.TAGS_FOR_LOADING_CHECK,e,i)>=t&&(n=!0)}}return n}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(E);e.exports=y},9426:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(1225),o=n(3124),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t}var t,n,a;return t=e,(n=[{key:"InjectDetector",value:function(){if(document.head){var e=document.createElement("script");this.setAttributes(e),window.addEventListener("DOMContentLoaded",(function t(){document.head.appendChild(e),window.removeEventListener("DOMContentLoaded",t)}))}}},{key:"setAttributes",value:function(e){var t=i.getURL("../executers/".concat(o.TWITTER_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("nonce",""),e.src=t}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=a},1225:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(3124),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"QuerySelectorAll",value:function(e,t){return document.__proto__.querySelectorAll.call(e,t)}},{key:"QuerySelector",value:function(e,t){return document.__proto__.querySelector.call(e,t)}},{key:"Escape",value:function(e){return e.replace(/\"/g,"&quot;")}},{key:"ToJSON",value:function(e){return"function"==typeof e.toJSON?e.toJSON():JSON.stringify(e)}},{key:"GetBaseHref",value:function(){var t=e.QuerySelector(document,"base");return t&&t.href?t.href:""}},{key:"GetTabIdKey",value:function(e){return"tb_"+e}},{key:"GetMainPageId",value:function(e){return"mp_"+e}},{key:"IsOnChromeRuntime",value:function(){var e=!0;if(chrome){if(chrome.runtime){try{chrome.runtime.getManifest()}catch(t){e=!1}if(e)return chrome.app?void 0!==chrome.app.isInstalled:!!chrome.runtime}else if(chrome.app)return chrome.app?void 0!==chrome.app.isInstalled:!!chrome.runtime}else if(self.navigator.userAgent.toLowerCase().includes("firefox"))return!!chrome.runtime;return!1}},{key:"GetElementSize",value:function(e){var t={x:0,y:0,w:0,h:0};if(e&&e.getBoundingClientRect){var n=e.getBoundingClientRect();t={x:~~(n.left+window.pageXOffset),y:~~(n.top+window.pageYOffset),w:~~n.width,h:~~n.height}}return t}},{key:"IsCoordinatesValid",value:function(e){return!!(e&&e.hasOwnProperty("x")&&"number"==typeof e.x&&e.hasOwnProperty("y")&&"number"==typeof e.y)}},{key:"GetFullElementSize",value:function(t,n,r){var i=e.GetElementSize(t);return e.IsCoordinatesValid(r)&&(i.x=i.x+r.x,i.y=i.y+r.y),e.IsCoordinatesValid(n)?(i.abs_x=i.x+n.x,i.abs_y=i.y+n.y):(i.abs_x=i.x,i.abs_y=i.y),i}},{key:"SetFullSizeToElement",value:function(t,n,r){var i={x:0,y:0,w:0,h:0};return e.IsCoordinatesValid(r)&&(i.x=i.x+r.x,i.y=i.y+r.y),t&&t.setAttribute&&(i=e.GetFullElementSize(t,n,r),t.setAttribute("bis_size",e.ToJSON(i))),i}},{key:"GenerateAndSetBisId",value:function(t,n){var r=n+e.GenerateQuickId();return t&&t.setAttribute&&t.setAttribute(i.ATTRIBUTE_BIS_ID,r),r}},{key:"GenerateAndSetBisIdToFrame",value:function(t){return e.GenerateAndSetBisId(t,"fr_")}},{key:"GenerateAndSetBisIdToBanner",value:function(t){return e.GenerateAndSetBisId(t,"bn_")}},{key:"GenerateAndSetBisIdToPinterestAds",value:function(t){return e.GenerateAndSetBisId(t,"pt_")}},{key:"GenerateAndSetBisIdToInstagramAds",value:function(t){return e.GenerateAndSetBisId(t,"ig_")}},{key:"GenerateAndSetBisIdToFBAds",value:function(t){return e.GenerateAndSetBisId(t,"fb_")}},{key:"GenerateAndSetBisIdToTwitterAds",value:function(t){return e.GenerateAndSetBisId(t,"tw_")}},{key:"GenerateAndSetBisIdToRedditAds",value:function(t){return e.GenerateAndSetBisId(t,"rd_")}},{key:"SetBisDepth",value:function(e,t){e&&e.setAttribute&&e.setAttribute("bis_depth",t)}},{key:"SetBisChainId",value:function(e,t){e&&e.setAttribute&&e.setAttribute("bis_chainid",t)}},{key:"SetBannerId",value:function(e,t){e&&e.setAttribute&&e.setAttribute("bis_bannerid",t)}},{key:"UpdateCandidateStatusBorderColor",value:function(e,t){if(e&&e.style&&e.style.cssText&&t){var n="";t.filteredOut?n=i.STYLES_BORDER_BANNER_FILTERED:t.sentToBackend?n=i.STYLES_BORDER_BANNER_SENT:t.targetUrlExtracted?n=i.STYLES_BORDER_BANNER_URL_EXTRACTED:t.fullContentExtracted&&(n=i.STYLES_BORDER_BANNER_CONTENT_EXTRACTED);var r=e.style.cssText;r.includes(n)||(r=r.replace(/((border|outline): .{3,20} solid 6px !important;)|((border|outline): 6px solid .{3,20} !important;)/,n),e.style.cssText=r)}}},{key:"GetMainDomainFromHost",value:function(e){if(e&&e.split){var t=e.split(".");if(t.length>=2)return t[t.length-2]+"."+t[t.length-1]}return null}},{key:"GetMainDomainFromUrl",value:function(t){return e.GetMainDomainFromHost(e.GetHostNameFromUrl(t))}},{key:"GetHostNameFromUrl",value:function(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&t.length>2&&"string"==typeof t[2]&&t[2].length>0?t[2]:null}},{key:"IsUrlFromHost",value:function(t,n){return-1!==t.indexOf(e.GetMainDomainFromUrl(n))}},{key:"IsPublisherInBlacklist",value:function(t,n){var r=!1,i=e.GetHostNameFromUrl(t);return n&&n.length&&i&&n.includes(i)&&(r=!0),r}},{key:"GetUrlFromStyleStr",value:function(e){var t=e.replace(/"/g,"'"),n=t.indexOf("http");-1==n&&(n=t.indexOf("//"));var r=t.indexOf("'",n),i="";return n>0&&r>0&&n<r&&(i=t.substr(n,r-n)),i}},{key:"GetCurrentDataTimeStr",value:function(){function e(e){return e<10?"0"+e:""+e}var t=new Date;return"".concat(t.getFullYear(),"-").concat(e(t.getMonth()+1),"-").concat(e(t.getDate())," ").concat(e(t.getHours()),":").concat(e(t.getMinutes()),":").concat(e(t.getSeconds()))}},{key:"GetWindowSize",value:function(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}},{key:"IsIframeHasContentScript",value:function(t){try{if(t&&!e.IsIframeSecure(t)&&"ok"!==t.contentDocument.body.getAttribute("bis_status"))return!1}catch(e){}return!0}},{key:"IsIframeSecure",value:function(e){return!e||0!==e.src.length&&"about:blank"!==e.src&&"about:srcdoc"!==e.src&&0!==e.src.indexOf("javascript:")}},{key:"isValidUrl",value:function(e){return"string"==typeof e&&e.length>0&&(-1!==e.indexOf("http")||-1!==e.indexOf("//"))}},{key:"IsValidBisId",value:function(e){return!!(e.startsWith("mp_")||e.startsWith("bg_")||e.startsWith("fr_"))}},{key:"IsYouTubeUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.indexOf("youtube.com")}},{key:"IsFacebookUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.indexOf("facebook.com")}},{key:"IsTwitterUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.indexOf("twitter.com")}},{key:"IsRedditUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.indexOf("reddit.com")}},{key:"IsPinterestUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.search(/pinterest\.(com|ca|at|ch|cl|co\.kr|com\.au|com\.mx|co\.uk|de|dk|es|fr|ie|it|jp|nz|ph|pt|se)/)}},{key:"IsInstagramUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.indexOf("instagram.com")}},{key:"IsTiktokUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.indexOf("tiktok.com")}},{key:"GetFullIdStr",value:function(e,t,n){return"ext:".concat(chrome.runtime.id,"-chainId:").concat(e,"-frameId:").concat(t,"-bisId:").concat(n)}},{key:"GetRandomIntInRange",value:function(e,t){return parseInt((Math.random()*(t-e)+e).toFixed(0))}},{key:"GetCurrentTimestamp",value:function(){return Date.now()/1e3|0}},{key:"GetCurrentTimestampMs",value:function(){return Date.now()}},{key:"GenerateQuickId",value:function(){return(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22)}},{key:"GenerateTicketId",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}},{key:"IsInFilterList",value:function(e,t){var n=!1;if(e)for(var r=0;r<e.length&&!n;r++)-1!=t.indexOf(e[r])&&(n=!0);return n}},{key:"IsChrome",value:function(){return-1!==navigator.userAgent.indexOf("Chrome")}},{key:"IsFirefox",value:function(){return-1!==navigator.userAgent.indexOf("Firefox")}},{key:"IsFBVideoDataValid",value:function(e){var t=!1;if(e)try{"number"==typeof e.detectionTime&&"string"==typeof e.videoId&&"string"==typeof e.videoUrl&&e.videoId.length&&e.videoUrl.length&&(t=!0)}catch(e){}return t}},{key:"GetDefaultAdblockerStatus",value:function(){var e={};return e[i.ADBLOCKER_FOR_DISPLAY]=i.ADBLOCKER_STATUS_DISABLED,e[i.ADBLOCKER_FOR_FACEBOOK]=i.ADBLOCKER_STATUS_DISABLED,e[i.ADBLOCKER_FOR_TWITTER]=i.ADBLOCKER_STATUS_DISABLED,e[i.ADBLOCKER_FOR_REDDIT]=i.ADBLOCKER_STATUS_DISABLED,e[i.ADBLOCKER_FOR_PINTEREST]=i.ADBLOCKER_STATUS_DISABLED,e[i.ADBLOCKER_FOR_INSTAGRAM]=i.ADBLOCKER_STATUS_DISABLED,e[i.USE_LOCAL_CONFIG]=i.ADBLOCKER_STATUS_DISABLED,e}},{key:"GetImagesSpacePercentage",value:function(t,n,r){var i=0;if(n){var o=Array.from(n.querySelectorAll("*")).map((function(e){return e.shadowRoot?e.shadowRoot.querySelectorAll(t):"IMG"===e.nodeName?e:e.querySelectorAll(t)})).filter((function(e){return e})).reduce((function(e,t){return t&&t.length&&t.forEach((function(t){e.includes(t)||e.push(t)})),"IMG"===t.nodeName&&e.push(t),e}),[]);if(o&&o.length>=1&&r.w*r.h>0){var a=0;o.forEach((function(n){var r=n;r&&r.shadowRoot&&(r=r.shadowRoot.firstElementChild.querySelector(t));var i=e.GetElementSize(n);a+=i.w*i.h})),a&&(i=a/(r.w*r.h)*100)}}return i}},{key:"CheckDocumentReadyState",value:function(e){return document.readyState===e}},{key:"getCurrentTab",value:function(){var e={type:i.MESSAGE_TYPE_GET_CURRENT_TAB_ID};return new Promise((function(t,n){try{chrome.runtime.sendMessage(e).then((function(e){t(e)})).catch((function(e){}))}catch(e){n(e)}}))}},{key:"getURL",value:function(e){return chrome.runtime.getURL(e)}},{key:"getDataFromStorageLocal",value:function(e){return chrome.storage.local.get([e]).then((function(t){return t[e]?t[e]:t}))}},{key:"getDataFromStorageSync",value:function(e){return new Promise((function(t,n){try{chrome.storage.sync.get([e]).then((function(n){n[e]?t(n[e]):t(n)}))}catch(e){n(e)}}))}},{key:"GetCookie",value:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}},{key:"GetOriginFromHref",value:function(e){e&&e.search(/^http/)}},{key:"GetLocaleDateString",value:function(){try{return(new Date).toJSON().replace("T",", ")}catch(e){return(new Date).toTimeString()}}}],(n=null)&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=o},3124:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(4019),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"DOCUMENT_READYSTATE_LOADING",get:function(){return"loading"}},{key:"DOCUMENT_READYSTATE_INTERACTIVE",get:function(){return"interactive"}},{key:"DOCUMENT_READYSTATE_COMPLETE",get:function(){return"complete"}},{key:"ATTRIBUTE_BIS_ID",get:function(){return"bis_id"}},{key:"ATTRIBUTE_BIS_SIZE",get:function(){return"bis_size"}},{key:"ATTRIBUTE_BIS_STYLE",get:function(){return"bis_style"}},{key:"ATTRIBUTE_BIS_STATUS",get:function(){return"bis_status"}},{key:"ATTRIBUTE_BIS_LABEL",get:function(){return"bis_label"}},{key:"ATTRIBUTE_BIS_ELEMENT_ID",get:function(){return"bis_element_id"}},{key:"ATTRIBUTE_BIS_HIDE_HEIGHT",get:function(){return"bis_hide_height"}},{key:"ATTRIBUTE_BIS_HIDE_WIDTH",get:function(){return"bis_hide_width"}},{key:"ATTRIBUTE_BIS_HIDE_STATUS",get:function(){return"bis_hide_status"}},{key:"ATTRIBUTE_BIS_HIDE_LEFT_OFFSET",get:function(){return"bis_hide_left_offset"}},{key:"ACTIVATION_BY_ADS_MANAGER",get:function(){return"ACTIVATION_BY_ADS_MANAGER"}},{key:"ACTIVATION_BY_ADS_SELF",get:function(){return"ACTIVATION_BY_ADS_SELF"}},{key:"MESSAGE_ID",get:function(){return"PANELOS_MESSAGE"}},{key:"MESSAGE_TYPE_TEST",get:function(){return"TEST"}},{key:"MESSAGE_TYPE_IFRAME_CONTENT",get:function(){return"IFRAME_CONTENT"}},{key:"MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME",get:function(){return"GET_HEADER_INFO_FOR_BLOCKED_IFRAME"}},{key:"MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE",get:function(){return"GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE"}},{key:"MESSAGE_TYPE_IFRAME_INVALID_CHAIN_SEGMENT_CONTENT",get:function(){return"IFRAME_INVALID_CHAIN_SEGMENT_CONTENT"}},{key:"MESSAGE_TYPE_TAB_INITIALIZATION",get:function(){return"TAB_INITIALIZATION"}},{key:"MESSAGE_TYPE_TAB_SINGLE_PAGE_REINITIALIZATION",get:function(){return"TAB_SINGLE_PAGE_REINITIALIZATION"}},{key:"MESSAGE_TYPE_TAB_URL_CHANGED",get:function(){return"TAB_URL_CHANGED"}},{key:"MESSAGE_TYPE_TAB_ADBLOCKER_STATUS_CHANGED",get:function(){return"TAB_ADBLOCKER_STATUS_CHANGED"}},{key:"MESSAGE_TYPE_IFRAME_INITIALIZATION",get:function(){return"IFRAME_INITIALIZATION"}},{key:"MESSAGE_TYPE_IFRAME_INITIALIZATION_RESPONSE",get:function(){return"IFRAME_INITIALIZATION_RESPONSE"}},{key:"MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_INPUTS",get:function(){return"IFRAME_CONTENT_INFO_DETECTED_INPUTS"}},{key:"MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_REDIRECTS",get:function(){return"IFRAME_CONTENT_INFO_DETECTED_REDIRECTS"}},{key:"MESSAGE_TYPE_HIDDEN_AD_CANDIDATES_AMOUNT",get:function(){return"HIDDEN_AD_CANDIDATES_AMOUNT"}},{key:"MESSAGE_TYPE_GET_WINDOW_TARGET_URL",get:function(){return"GET_WINDOW_TARGET_URL"}},{key:"MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND",get:function(){return"GET_WINDOW_TARGET_URL_RESPOND"}},{key:"MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL",get:function(){return"GET_WINDOW_CLICK_TARGET_URL"}},{key:"MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND",get:function(){return"GET_WINDOW_CLICK_TARGET_URL_RESPOND"}},{key:"MESSAGE_TYPE_GET_FRAME_CONTENT",get:function(){return"GET_FRAME_CONTENT"}},{key:"MESSAGE_TYPE_TARGET_URL_DETECTION_BY_CLICK",get:function(){return"TARGET_URL_DETECTION_BY_CLICK"}},{key:"MESSAGE_TYPE_NEW_PAGE_CREATED_TICKET",get:function(){return"NEW_PAGE_CREATED_TICKET"}},{key:"MESSAGE_TYPE_PANEL_REGULATOR_RESULT",get:function(){return"PANEL_REGULATOR_RESULT"}},{key:"MESSAGE_TYPE_OUT_TICKET",get:function(){return"OUT_TICKET"}},{key:"MESSAGE_TYPE_CHAIN_ACTIVATION",get:function(){return"CHAIN_ACTIVATION"}},{key:"MESSAGE_TYPE_HEADER_INFO_TO_STORAGE",get:function(){return"HEADER_INFO_TO_STORAGE"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_SKINADS",get:function(){return"CANDIDATES_DATA_SKINADS"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_BANNERS",get:function(){return"CANDIDATES_DATA_BANNERS"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK",get:function(){return"CANDIDATES_DATA_FACEBOOK"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_TWITTER",get:function(){return"CANDIDATES_DATA_TWITTER"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_REDDIT",get:function(){return"CANDIDATES_DATA_REDDIT"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_PINTEREST",get:function(){return"CANDIDATES_DATA_PINTEREST"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_INSTAGRAM",get:function(){return"CANDIDATES_DATA_INSTAGRAM"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_FACEBOOK",get:function(){return"CANDIDATE_PLACEMENTS_FACEBOOK"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TWITTER",get:function(){return"CANDIDATE_PLACEMENTS_TWITTER"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_REDDIT",get:function(){return"CANDIDATE_PLACEMENTS_REDDIT"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_PINTEREST",get:function(){return"CANDIDATE_PLACEMENTS_PINTEREST"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_HTML5",get:function(){return"CANDIDATE_PLACEMENTS_HTML5"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TIKTOK",get:function(){return"CANDIDATE_PLACEMENTS_TIKTOK"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_INSTAGRAM",get:function(){return"CANDIDATE_PLACEMENTS_INSTAGRAM"}},{key:"MESSAGE_TYPE_HTML5_CANDIDATES_EXTRACTION_STATUSES",get:function(){return"HTML5_CANDIDATES_EXTRACTION_STATUSES"}},{key:"MESSAGE_TYPE_BANNER_CANDIDATES_EXTRACTION_STATUSES",get:function(){return"BANNER_CANDIDATES_EXTRACTION_STATUSES"}},{key:"MESSAGE_TYPE_SKIN_AD_CANDIDATES_EXTRACTION_STATUSES",get:function(){return"SKIN_AD_CANDIDATES_EXTRACTION_STATUSES"}},{key:"MESSAGE_TYPE_VIDEO_XHR_CANDIDATE",get:function(){return"VIDEO_XHR_CANDIDATE"}},{key:"MESSAGE_TYPE_VIDEO_HAR",get:function(){return"VIDEO_HAR"}},{key:"MESSAGE_TYPE_FACEBOOK_VIDEO_DATA",get:function(){return"FACEBOOK_VIDEO_DATA"}},{key:"MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA",get:function(){return"FACEBOOK_INSTREAM_DATA"}},{key:"MESSAGE_TYPE_FACEBOOK_MARKETPLACE_VIDEO_DATA",get:function(){return"FACEBOOK_MARKETPLACE_VIDEO_DATA"}},{key:"MESSAGE_TYPE_PINTEREST_VIDEO_DATA",get:function(){return"PINTEREST_VIDEO_DATA"}},{key:"MESSAGE_TYPE_TWITTER_VIDEO_DATA",get:function(){return"TWITTER_VIDEO_DATA"}},{key:"MESSAGE_TYPE_REDDIT_VIDEO_DATA",get:function(){return"REDDIT_VIDEO_DATA"}},{key:"MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA",get:function(){return"REDDIT_RIGHT_COLUMN_DATA"}},{key:"MESSAGE_TYPE_INSTAGRAM_VIDEO_DATA",get:function(){return"INSTAGRAM_VIDEO_DATA"}},{key:"MESSAGE_TYPE_INSTAGRAM_STORY_DATA",get:function(){return"INSTAGRAM_STORY_DATA"}},{key:"MESSAGE_TYPE_INSTAGRAM_FULL_TEXT_DATA",get:function(){return"INSTAGRAM_FULL_TEXT_DATA"}},{key:"MESSAGE_TYPE_INSTAGRAM_CAROUSEL_SLIDES_SOURCES",get:function(){return"INSTAGRAM_CAROUSEL_SLIDES_SOURCES"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANALYTICS_ID",get:function(){return"GET_PANALYTICS_ID"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANELOS_VERSION",get:function(){return"GET_PANELOS_VERSION"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_STATUS",get:function(){return"GET_ADBLOCKER_STATUS"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_COUNTERS",get:function(){return"GET_ADBLOCKER_COUNTERS"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_ADBLOCKER",get:function(){return"ENABLE_ADBLOCKER"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_ADBLOCKER",get:function(){return"DISABLE_ADBLOCKER"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_DATA_COLLECTION_STATUS",get:function(){return"GET_DATA_COLLECTION_STATUS"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_DATA_COLLECTION",get:function(){return"ENABLE_DATA_COLLECTION"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_DATA_COLLECTION",get:function(){return"DISABLE_DATA_COLLECTION"}},{key:"MESSAGE_TYPE_ADBLOCK_INSPECTOR_AGENT_REPORT",get:function(){return"ADBLOCK_INSPECTOR_AGENT_REPORT"}},{key:"MESSAGE_TYPE_GET_EXCLUDE_LIST",get:function(){return"GET_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_ADD_INTO_EXCLUDE_LIST",get:function(){return"ADD_INTO_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_REMOVE_FROM_EXCLUDE_LIST",get:function(){return"REMOVE_FROM_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_ADD_CURRENT_DOMAIN_INTO_EXCLUDE_LIST",get:function(){return"ADD_CURRENT_DOMAIN_INTO_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_ADD_CURRENT_PAGE_INTO_EXCLUDE_LIST",get:function(){return"ADD_CURRENT_PAGE_INTO_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_GET_CURRENT_DOMAIN",get:function(){return"GET_CURRENT_DOMAIN"}},{key:"MESSAGE_TYPE_GET_CURRENT_PAGE_URL",get:function(){return"GET_CURRENT_PAGE_URL"}},{key:"MESSAGE_TYPE_USE_LOCAL_CONFIG",get:function(){return"USE_LOCAL_CONFIG"}},{key:"MESSAGE_TYPE_GET_LOCAL_CONFIG_STATUS",get:function(){return"GET_LOCAL_CONFIG_STATUS"}},{key:"ADBLOCKER_STATUS_ENABLED",get:function(){return"enabled"}},{key:"ADBLOCKER_STATUS_DISABLED",get:function(){return"disabled"}},{key:"VIDEO_TRAFFIC_SOURCE_HTML",get:function(){return"HTML"}},{key:"VIDEO_TRAFFIC_SOURCE_JS",get:function(){return"JS"}},{key:"VIDEO_TRAFFIC_SOURCE_XHR",get:function(){return"XHR"}},{key:"VIDEO_TRAFFIC_MEDIA_TYPE_HTML",get:function(){return"HTML"}},{key:"VIDEO_TRAFFIC_FACEBOOK_MEDIA_TYPE_JSON",get:function(){return"JSON"}},{key:"VIDEO_TRAFFIC_FACEBOOK_MEDIA_ALIAS_JSON",get:function(){return"JSON_FB"}},{key:"VIDEO_TRAFFIC_ALIAS_YT_JSON_NEXTPAGE",get:function(){return"YT_JSON_NEXTPAGE"}},{key:"VIDEO_TRAFFIC_ALIAS_YT_HTML_DESKTOP_INSCRIPT_PLAYER_RESPONSE",get:function(){return"YT_HTML_DESKTOP_INSCRIPT_PLAYER_RESPONSE"}},{key:"VIDEO_TRAFFIC_FILENAME_TO_INJECT",get:function(){return"vi-tr.js"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_FEED",get:function(){return"feed"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH",get:function(){return"feedWatch"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE",get:function(){return"marketplace"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN",get:function(){return"rightColumn"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_STORIES",get:function(){return"stories"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_VIDEO_PAGE",get:function(){return"videoPage"}},{key:"FACEBOOK_AD_VIDEO_URL_REPLACE_NAME",get:function(){return"[ADVERTISER_NAME]"}},{key:"FACEBOOK_AD_VIDEO_URL_REPLACE_VIDEO_ID",get:function(){return"[VIDEO_ID]"}},{key:"FACEBOOK_FILENAME_TO_INJECT",get:function(){return"vi-oo-tr.js"}},{key:"TWITTER_AD_PLACEMENT_TYPE_FEED",get:function(){return"feedPost"}},{key:"TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW",get:function(){return"feedWhoToFollow"}},{key:"TWITTER_AD_PLACEMENT_TYPE_RIGHT_COLUMN_WHO_TO_FOLLOW",get:function(){return"rightColumnWhoToFollow"}},{key:"TWITTER_FILENAME_TO_INJECT",get:function(){return"vi-tt-tr.js"}},{key:"REDDIT_AD_PLACEMENT_TYPE_FEED",get:function(){return"feed"}},{key:"REDDIT_AD_PLACEMENT_TYPE_COMMENT_PAGE",get:function(){return"commentPage"}},{key:"REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN",get:function(){return"rightColumn"}},{key:"REDDIT_FILENAME_TO_INJECT",get:function(){return"vi-rd-tr.js"}},{key:"PINTEREST_AD_PLACEMENT_TYPE_FEED",get:function(){return"feed"}},{key:"PINTEREST_AD_PLACEMENT_TYPE_SEARCH",get:function(){return"searchPage"}},{key:"PINTEREST_AD_PLACEMENT_TYPE_PIN",get:function(){return"pinPage"}},{key:"PINTEREST_FILENAME_TO_INJECT",get:function(){return"vi-pn-tr.js"}},{key:"INSTAGRAM_FILENAME_TO_INJECT",get:function(){return"vi-ig-tr.js"}},{key:"PINTEREST_LOADER_TYPE_PIN_PAGE",get:function(){return"pinPage"}},{key:"PINTEREST_LOADER_TYPE_USER_INFO",get:function(){return"userInfo"}},{key:"INSTAGRAM_AD_PLACEMENT_TYPE_FEED",get:function(){return"feed"}},{key:"INSTAGRAM_AD_PLACEMENT_TYPE_STORY",get:function(){return"story"}},{key:"KNOWN_CSS_NAMES",get:function(){return["align-content","align-items","align-self","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","block-size","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start-color","border-block-start-style","border-block-start-width","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-end-end-radius","border-end-start-radius","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-adjust","color-interpolation","color-interpolation-filters","column-count","column-fill","column-gap","column-rule-color","column-rule-style","column-rule-width","column-width","contain","content","counter-increment","counter-reset","counter-set","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","fill","fill-opacity","fill-rule","filter","flex-basis","flex-direction","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column-end","grid-column-start","grid-row-end","grid-row-start","grid-template-areas","grid-template-columns","grid-template-rows","height","hyphens","image-orientation","image-rendering","ime-mode","inline-size","inset-block-end","inset-block-start","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style-image","list-style-position","list-style-type","margin-block-end","margin-block-start","margin-bottom","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marker-end","marker-mid","marker-start","mask","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-position-x","mask-position-y","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","object-fit","object-position","opacity","order","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-inline","overflow-wrap","overflow-x","overflow-y","overscroll-behavior-x","overscroll-behavior-y","padding-block-end","padding-block-start","padding-bottom","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","paint-order","perspective","perspective-origin","pointer-events","position","quotes","r","resize","right","row-gap","ruby-align","ruby-position","rx","ry","scroll-behavior","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","scrollbar-color","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","table-layout","text-align","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","top","touch-action","transform","transform-box","transform-origin","transform-style","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vector-effect","vertical-align","visibility","white-space","width","will-change","word-break","word-spacing","writing-mode","x","y","z-index","-moz-appearance","-moz-box-align","-moz-box-direction","-moz-box-flex","-moz-box-ordinal-group","-moz-box-orient","-moz-box-pack","-moz-float-edge","-moz-force-broken-image-icon","-moz-image-region","-moz-orient","-moz-outline-radius-bottomleft","-moz-outline-radius-bottomright","-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-stack-sizing","-moz-tab-size","-moz-text-size-adjust","-moz-user-focus","-moz-user-input","-moz-user-modify","-moz-window-dragging","-webkit-line-clamp","-webkit-text-fill-color","-webkit-text-stroke-color","-webkit-text-stroke-width","offset-distance","offset-path","offset-rotate","orphans","speak","tab-size","text-underline-position","text-size-adjust","widows","zoom","-webkit-appearance","-webkit-border-horizontal-spacing","-webkit-border-image","-webkit-border-vertical-spacing","-webkit-box-align","-webkit-box-decoration-break","-webkit-box-direction","-webkit-box-flex","-webkit-box-ordinal-group","-webkit-box-orient","-webkit-box-pack","-webkit-box-reflect","column-span","backdrop-filter","-webkit-font-smoothing","-webkit-highlight","-webkit-hyphenate-character","-webkit-line-break","-webkit-locale","-webkit-margin-before-collapse","-webkit-margin-after-collapse","-webkit-mask-box-image","-webkit-mask-box-image-outset","-webkit-mask-box-image-repeat","-webkit-mask-box-image-slice","-webkit-mask-box-image-source","-webkit-mask-box-image-width","-webkit-mask-clip","-webkit-mask-composite","-webkit-mask-image","-webkit-mask-origin","-webkit-mask-position","-webkit-mask-repeat","-webkit-mask-size","-webkit-print-color-adjust","-webkit-rtl-ordering","-webkit-tap-highlight-color","-webkit-text-combine","-webkit-text-decorations-in-effect","-webkit-text-emphasis-color","-webkit-text-emphasis-position","-webkit-text-emphasis-style","-webkit-text-orientation","-webkit-text-security","-webkit-user-drag","-webkit-user-modify","-webkit-writing-mode","-webkit-app-region","buffered-rendering","color-rendering","alignment-baseline","baseline-shift","d"]}},{key:"FACEBOOK_DESIGN_VERSION_OLD",get:function(){return 1}},{key:"FACEBOOK_DESIGN_VERSION_NEW",get:function(){return 2}},{key:"OUT_TICKET_TYPE_SINGLE",get:function(){return"SINGLE"}},{key:"OUT_TICKET_TYPE_MULTI",get:function(){return"MULTI"}},{key:"ADBLOCKER_FOR_DISPLAY",get:function(){return"DISPLAY"}},{key:"ADBLOCKER_FOR_FACEBOOK",get:function(){return"FACEBOOK"}},{key:"ADBLOCKER_FOR_TWITTER",get:function(){return"TWITTER"}},{key:"ADBLOCKER_FOR_REDDIT",get:function(){return"REDDIT"}},{key:"ADBLOCKER_FOR_PINTEREST",get:function(){return"PINTEREST"}},{key:"ADBLOCKER_FOR_INSTAGRAM",get:function(){return"INSTAGRAM"}},{key:"USE_LOCAL_CONFIG",get:function(){return"CONFIG"}},{key:"AD_DETECTOR_INITIATOR_TIMER",get:function(){return"timer"}},{key:"AD_DETECTOR_INITIATOR_MUTATION",get:function(){return"mutation"}},{key:"AD_DETECTOR_INITIATOR_PAGECHANGE",get:function(){return"pagechange"}},{key:"AD_DETECTOR_INITIATOR_ACTIVATION",get:function(){return"activation"}},{key:"AD_DETECTOR_INITIATOR_URL",get:function(){return"url"}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_NONE",get:function(){return 0}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_INITED",get:function(){return 1}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_STARTED",get:function(){return 2}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_STARTED",get:function(){return 3}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_FINISHED",get:function(){return 4}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_FINISHED",get:function(){return 5}},{key:"IFRAMES_TRAFFIC_FILENAME_TO_INJECT",get:function(){return"fr-co.js"}},{key:"CANDIDATE_PROCESS_STATUS_DETECED",get:function(){return 1}},{key:"CANDIDATE_PROCESS_STATUS_START_PROCESSING",get:function(){return 2}},{key:"CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED",get:function(){return 3}},{key:"CANDIDATE_PROCESS_STATUS_PREBUILD_INFO_SENT",get:function(){return 4}},{key:"TICKET_BUILDING_STATUS_INIT",get:function(){return 0}},{key:"TICKET_BUILDING_STATUS_STARTED",get:function(){return 1}},{key:"TICKET_BUILDING_STATUS_GETTING_WEBNAVIGATION_IFRAMES",get:function(){return 2}},{key:"TICKET_BUILDING_STATUS_GOT_WEBNAVIGATION_IFRAMES",get:function(){return 3}},{key:"TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_ACTIVE",get:function(){return 4}},{key:"TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_DONE",get:function(){return 5}},{key:"TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_ACTIVE",get:function(){return 6}},{key:"TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_DONE",get:function(){return 7}},{key:"TICKET_BUILDING_STATUS_DONE",get:function(){return 8}},{key:"TICKET_ALIAS_PANALYTICSID",get:function(){return i.decode("cGFuZWxpc3RJZA==")}},{key:"TICKET_ALIAS_PINSTANCEID",get:function(){return i.decode("cGFuZWxJZA==")}},{key:"MAX_OUT_TICKETS_QUEUE_LENGTH",get:function(){return 20}},{key:"EXCLUDE_DOMAINS_LIST",value:function(){return"EXCLUDE_DOMAINS_LIST"}},{key:"EXCLUDE_PAGES_LIST",value:function(){return"EXCLUDE_PAGES_LIST"}},{key:"STYLES_BORDER_BANNER_CONTENT_EXTRACTED",get:function(){return"border: 6px solid blue !important;"}},{key:"STYLES_BORDER_BANNER_URL_EXTRACTED",get:function(){return"border: 6px solid blueviolet !important;"}},{key:"STYLES_BORDER_BANNER_FILTERED",get:function(){return"border: 6px solid orange !important;"}},{key:"STYLES_BORDER_BANNER_SENT",get:function(){return"border: 6px solid green !important;"}},{key:"STYLES_OUTLINE_SUCCESS_DETECT",get:function(){return"outline: green solid 6px !important;"}},{key:"STYLES_OUTLINE_VIDEO_AD",get:function(){return"outline: rgba(42, 213, 255, 1) solid 6px !important;"}},{key:"STYLES_OUTLINE_TEXT_AD",get:function(){return"outline: rgba(243, 143, 20, 1) solid 6px !important;"}},{key:"STYLES_CONSOLE_LOGS_INFO",get:function(){return"background-color: rgba(108, 101, 224, 0.2); color: rgba(58, 191, 224, 1)"}},{key:"STYLES_CONSOLE_LOGS_ERROR",get:function(){return"background-color: rgba(241, 0, 43, 0.4); color: rgba(58, 191, 224, 1)"}}],(n=null)&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=o},1850:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(3124),o=n(1225),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"EmptyMessage",get:function(){return{posdMessageId:i.MESSAGE_ID,posdHash:o.GenerateQuickId(),from:"",to:"",multiTo:[],type:"",content:""}}},{key:"IsValid",value:function(e){try{if(void 0!==e&&void 0!==e.posdMessageId&&void 0!==e.type&&void 0!==e.content)return e.posdMessageId===i.MESSAGE_ID}catch(e){throw e}return!1}},{key:"IsStrictValid",value:function(e){try{if(void 0!==e&&void 0!==e.posdMessageId&&void 0!==e.from&&void 0!==e.to&&void 0!==e.type&&void 0!==e.content)return e.posdMessageId===i.MESSAGE_ID}catch(e){throw e}return!1}}],(n=null)&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=a},9622:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(3124),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"getStylesByElementsBisId",value:function(e){var t=this,n={};return this.addStylesForNode(e,n),e.querySelectorAll("*").forEach((function(e){t.addStylesForNode(e,n)})),n}},{key:"addStylesForNode",value:function(e,t){var n=this.getStyles(e);t[e.getAttribute(i.ATTRIBUTE_BIS_ELEMENT_ID)]=n}},{key:"getStyles",value:function(e){var t=window.getComputedStyle(e,null);return this.minimiseComputedStyles(t)}},{key:"minimiseComputedStyles",value:function(e){for(var t={},n=0;n<e.length;n++){var r=e.item(n),o=e.getPropertyValue(r);t[o]||(t[o]=[]);var a=i.KNOWN_CSS_NAMES.indexOf(r);a>=0?t[o].push(a):t[o].push(r)}return t}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=o},4019:e=>{var t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var n,r,i,o,a,s,c,u="",l=0;for(e=t._utf8_encode(e);l<e.length;)o=(n=e.charCodeAt(l++))>>2,a=(3&n)<<4|(r=e.charCodeAt(l++))>>4,s=(15&r)<<2|(i=e.charCodeAt(l++))>>6,c=63&i,isNaN(r)?s=c=64:isNaN(i)&&(c=64),u=u+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(s)+this._keyStr.charAt(c);return u},decode:function(e){if("{"===e[0])return e;var n,r,i,o,a,s,c="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)n=this._keyStr.indexOf(e.charAt(u++))<<2|(o=this._keyStr.indexOf(e.charAt(u++)))>>4,r=(15&o)<<4|(a=this._keyStr.indexOf(e.charAt(u++)))>>2,i=(3&a)<<6|(s=this._keyStr.indexOf(e.charAt(u++))),c+=String.fromCharCode(n),64!=a&&(c+=String.fromCharCode(r)),64!=s&&(c+=String.fromCharCode(i));return c=t._utf8_decode(c)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode:function(e){for(var t="",n=0,r=0,i=0,o=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&i),n+=2):(i=e.charCodeAt(n+1),o=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o),n+=3);return t}};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(7588);var e=n(3124),t=n(4269),r=n(5106),i=n(1225);if(self==top)(new t).Init();else if(i.CheckDocumentReadyState(e.DOCUMENT_READYSTATE_LOADING))document.addEventListener("DOMContentLoaded",(function(){(new r).Init()}));else if(i.CheckDocumentReadyState(e.DOCUMENT_READYSTATE_INTERACTIVE)||i.CheckDocumentReadyState(e.DOCUMENT_READYSTATE_COMPLETE)){(new r).Init()}})()})();