(()=>{function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,f=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){f=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(f)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var n,r=null!==(n=sessionStorage.getItem("bis_data"))?JSON.parse(n):null,o=r?r.config.facebookConfig.videoDetectorConfigNew:null,i=r?r.id+"_w":null;var a="SCRIPT",u="XML_HTTP_REQUEST",f="INSTREAM_CONFIG",s="MARKETPLACE_VIDEO_AD",l="FEED_VIDEO_AD",c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",f={detectionTime:Date.now()/1e3|0,videoId:e,videoUrl:t,previewImageUrl:r,audioUrl:n,linkDisplay:o,userName:i,adName:a,adLogo:u};return f},v=function(e,t){var n=new RegExp(t,"i"),r=e.match(n);if(!r)return!1;var o=r.filter((function(e){return e}));return!!o[1]&&o[1]},A=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=r?o.PARSERS.filter((function(e){return e.TYPE===r})):o.PARSERS,u=e(a);try{var c=function(){var e=n.value;if(e.CHECKER.some((function(e){return t.includes(e)})))return r===f?(setTimeout((function(){return d(e,t,i)}),0),"break"):r===s?(setTimeout((function(){return R(e,t)}),0),"break"):r===l?(setTimeout((function(){return E(e,t)}),0),"break"):(setTimeout((function(){return p(e,t)}),0),"break")};for(u.s();!(n=u.n()).done;){var v=c();if("break"===v)break}}catch(e){u.e(e)}finally{u.f()}},E=function(t,n){try{var r="".concat(n).replace(/\}(\r|\n)/g,"}BIS_SEPARATOR").split(/BIS\_SEPARATOR/g),o=t.CHECKER;r=r.filter((function(e){return o.some((function(t){return new RegExp(t).test(e)}))}));var i=[];if(r.length){var a,u=e(r);try{for(u.s();!(a=u.n()).done;){var f=a.value,s=f;"string"==typeof f&&(s=JSON.parse(f));var l=y(s,t),v=O(s,t),A=g(s,t),E=S(s,t.PATH_USER_NAME),d=c(A,l,"",v,"",E);A&&l&&i.push(d)}}catch(e){u.e(e)}finally{u.f()}i.forEach((function(e){setTimeout(b(e,"FACEBOOK_VIDEO_DATA"),0)}))}}catch(e){}},d=function(t,n,r){var o=[],i=[];try{o.push(JSON.parse(n)),setTimeout(b({url:r,requestMethod:"POST",content:o},"FACEBOOK_INSTREAM_DATA"),0)}catch(a){(o="".concat(n).replace(/\}(\r|\n)/g,"}BIS_SEPARATOR").split(/BIS\_SEPARATOR/g)).forEach((function(n,r){if(!(n.length<=3)&&t.CHECKER.some((function(e){return n.includes(e)}))){var o,a=JSON.parse(n),u=a,f=a,s=e(t.PATH_NODES);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=t.PATH_NODES.indexOf(l),v=t.PATH_NODES.length-1;c!==v&&u[l]&&(u=u[l]),c===v&&u[l]&&((u=u[l]).length?u.forEach((function(e){e.bisLinks={aboutPageLink:_(e,t.PATH_USER_ID)},e.video_id=h(e,t.PATH_VIDEO_ID),i.push(e)})):(u.bisLinks={aboutPageLink:_(u,t.PATH_USER_ID)},u.video_id=h(u,t.PATH_VIDEO_ID),i.push(u)))}}catch(e){s.e(e)}finally{s.f()}var A,E=e(t.PATH_ALL_VIDEO);try{var d=function(){var n=A.value,r=t.PATH_ALL_VIDEO.indexOf(n),o=t.PATH_ALL_VIDEO.length-1;if(r!==o&&f[n]&&(f=f[n]),"string"!=typeof n&&r===o&&n.length)if(f.length)f.forEach((function(t,r){var o=i[r];if(o.video_id===t.video_id){var a,u=e(n);try{for(u.s();!(a=u.n()).done;){var f=a.value;if(t[f]){o[f]=t[f];break}}}catch(e){u.e(e)}finally{u.f()}}}));else if(1===i.length){var a=i[0];if(a.video_id===f.video_id){var u,s=e(n);try{for(s.s();!(u=s.n()).done;){var l=u.value;if(f[l]){a[l]=f[l];break}}}catch(e){s.e(e)}finally{s.f()}}}};for(E.s();!(A=E.n()).done;)d()}catch(e){E.e(e)}finally{E.f()}}})),i.forEach((function(e){setTimeout(b({url:r,requestMethod:"POST",content:e},"FACEBOOK_INSTREAM_DATA"),0)}))}},h=function(t,n){var r,o=t,i=null,a=e(n);try{for(a.s();!(r=a.n()).done;){var u=r.value,f=n.indexOf(u),s=n.length-1;f!==s&&o[u]&&(o=o[u]),f===s&&o[u]&&(i=o[u])}}catch(e){a.e(e)}finally{a.f()}return parseInt(i,10)},_=function(t,n){var r,o=t,i=null,a=e(n);try{for(a.s();!(r=a.n()).done;){var u=r.value,f=n.indexOf(u),s=n.length-1;f!==s&&o[u]&&(o=o[u]),f===s&&o[u]&&(i="https://www.facebook.com/".concat(o[u],"/about"))}}catch(e){a.e(e)}finally{a.f()}return i},p=function(e,t){t=t.replace(/ /g,"");var n=v(t,e.VIDEO_ID);if(n){var r=null,i=null,a="",u="",f="";e.VIDEO_HD_URL&&(r=v(t,e.VIDEO_HD_URL)),e.VIDEO_SD_URL&&(i=v(t,e.VIDEO_SD_URL)),e.LINK_DISPLAY&&(f=v(t,e.LINK_DISPLAY)),o.VIDEO_AUDIO_URL&&(a=(a=v(t,e.VIDEO_AUDIO_URL))?a.split("\\").join(""):a),e.THUMBNAIL&&(u=(u=v(t,e.THUMBNAIL))?u.split("\\").join(""):u);var s=i||r;if(s){s=s.split("\\").join("");var l=c(n,s,a,u,f);setTimeout(b(l,"FACEBOOK_VIDEO_DATA"),0)}}},R=function(t,n){try{var r="".concat(n).replace(/\}(\r|\n)/g,"}BIS_SEPARATOR").split(/BIS\_SEPARATOR/g),o=t.CHECKER;r=r.filter((function(e){return o.some((function(t){return new RegExp(t).test(e)}))}));var i=[];if(r.length){var a,u=e(r);try{for(u.s();!(a=u.n()).done;){var f=a.value,s=f;"string"==typeof f&&(s=JSON.parse(f));var l=T(s,t),v=y(s,t),A=O(s,t),E=g(s,t),d=S(s,t.PATH_NAME),h=S(s,t.PATH_LOGO),_=c(E,v,l,A,"","",d,h);E&&v&&i.push(_)}}catch(e){u.e(e)}finally{u.f()}i.forEach((function(e){setTimeout(b(e,"FACEBOOK_VIDEO_DATA"),0)}))}}catch(e){}},S=function(t,n){var r,o=null,i=e(n);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,f=t,s=0;s<u;s++){var l=a[s],c=u-1;if(!f[l])break;s!==c&&f[l]&&(f=f[l]),s===c&&f[l]&&(o=f[l])}}catch(e){i.e(e)}finally{i.f()}return o},T=function(t,n){var r,o=null,i=e(n.PATH_AUDIO_URL);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,f=t,s=0;s<u;s++){var l=a[s],c=u-1;if(!f[l])break;s!==c&&f[l]&&(f=f[l]),s===c&&f[l]&&(o=f[l])}}catch(e){i.e(e)}finally{i.f()}return o},y=function(t,n){var r,o=null,i=e(n.PATH_VIDEO_URL);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,f=t,s=0;s<u;s++){var l=a[s],c=u-1;if(!f[l])break;s!==c&&f[l]&&(f=f[l]),s===c&&f[l]&&(o=f[l])}}catch(e){i.e(e)}finally{i.f()}return o},O=function(t,n){var r,o=null,i=e(n.PATH_THUMBNAIL);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,f=t,s=0;s<u;s++){var l=a[s],c=u-1;if(!f[l])break;s!==c&&f[l]&&(f=f[l]),s===c&&f[l]&&(o=f[l])}}catch(e){i.e(e)}finally{i.f()}return o},g=function(t,n){var r,o=null,i=e(n.PATH_VIDEO_ID);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,f=t,s=0;s<u;s++){var l=a[s],c=u-1;if(!f[l])break;s!==c&&f[l]&&(f=f[l]),s===c&&f[l]&&(o=f[l])}}catch(e){i.e(e)}finally{i.f()}return o},I=function(e,t){t=String(t);var n=o.PARSER_CONFIG[e];return n.SEPARATOR?t.split(n.SEPARATOR):[t]},D=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=I(t,e);r.forEach((function(e){setTimeout((function(){return A(e,t,n)}),0)}))},b=function(e,t){return function(){!function(e,t,n){try{var r={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:n,from:e,to:e.substring(0,e.length-2),content:t};window.postMessage(r)}catch(e){}}(i,e,t)}};if(o.PARSER_CONFIG.SCRIPT.USE){setInterval((function(){var t,n=e(document.querySelectorAll("script"));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.hasAttribute("bis_use")||(r.setAttribute("bis_use","true"),D(r.innerHTML,a))}}catch(e){n.e(e)}finally{n.f()}}),o.PARSER_CONFIG.SCRIPT.INTERVAL_MS||5e3)}if(o.PARSER_CONFIG.LISTEN_HTTP_REQUESTS){var H=XMLHttpRequest.prototype.open,P=XMLHttpRequest.prototype.setRequestHeader,L=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.setRequestHeader=function(){var e=arguments[0].toLowerCase(),t=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[e]=t,P.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],H.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){var e=this.onreadystatechange;return this.onreadystatechange=function(){var t=this,n=o.MATCH_URLS,r=o.MATCH_HEADERS,i=this.requestHeaders?Object.keys(this.requestHeaders):null,a=o.PARSER_CONFIG.INSTREAM_CONFIG,c=o.PARSER_CONFIG.MARKETPLACE_VIDEO_AD,v=o.PARSER_CONFIG.FEED_VIDEO_AD,A=!1,E=null,d=null;if(i&&(A=i.some((function(e){if(r[e]&&r[e].includes(t.requestHeaders[e]))return E=e,d=t.requestHeaders[e],!0}))),4===this.readyState&&n.filter((function(e){return e.indexOf(t.responseURL)})).length>0)if(A)switch(!0){case a.USE&&a.HEADERS[E].includes(d):setTimeout((function(){return D(t.response,f,t.responseURL)}),0);break;case c.USE&&c.HEADERS[E].includes(d):setTimeout((function(){return D(t.response,s,t.responseURL)}),0);break;case v.USE&&v.HEADERS[E].includes(d):setTimeout((function(){return D(t.response,l,t.responseURL)}),0)}else setTimeout((function(){return D(t.response,u)}),0);if(e)return e.apply(this,arguments)},L.apply(this,arguments)}}window.addEventListener("message",(function(t){if(t.data.attribute&&"bis-text"===t.data.attribute)for(var n=Array.from(document.querySelectorAll("canvas")),o=null,i=t.data.attribute,a=r.config.facebookConfig.PATH_TO_CANVAS_TEXT,u=0,f=n;u<f.length;u++){var s=f[u];if(!Object.entries(s).some((function(e){if(e[0].search(/reactFiber/)>=0)return o=e[0],!0})))return void s.setAttribute(i,"");var l,c=s[o],v=e(a);try{for(v.s();!(l=v.n()).done;){var A=l.value;c[A]&&(c=c[A])}}catch(e){v.e(e)}finally{v.f()}s.setAttribute(i,c)}}))})();